import{a as b}from"./chunk-543QFZRG.js";import"./chunk-YHIVJIYC.js";import{a as g}from"./chunk-THCZEFPZ.js";import"./chunk-P5TE6FOK.js";import"./chunk-N3GUYB4W.js";import"./chunk-YJWIIGXE.js";import"./chunk-YUKQXM5O.js";import"./chunk-M3W4QUEG.js";import"./chunk-BYXBJQAS.js";import"./chunk-QHH3SHC3.js";import{a as k}from"./chunk-GYQ2QOAA.js";import{a as y}from"./chunk-JEDHGX64.js";import"./chunk-ACQN7LQS.js";import{a as u,b as S}from"./chunk-7DC7YEPQ.js";import{$a as o,$b as h,Bb as p,Cb as v,Ga as f,Ra as n,S as d,ab as s,bb as r,nb as m,ob as l,xa as a}from"./chunk-OKFD3A6M.js";import"./chunk-KAT7YFEL.js";var M=class c{movementEngine=d(b);translationService=d(u);totalMovements=0;suspiciousMovements=0;highRiskStaffCount=0;avgRiskScore=0;staffRiskScores=[];riskByTypeData={labels:[this.translationService.translate("movements.type.sale"),this.translationService.translate("movements.type.purchase"),this.translationService.translate("movements.type.adjustment"),this.translationService.translate("movements.type.theft")],datasets:[{label:this.translationService.translate("movements.chart.riskScore"),data:[15,10,75,100]}]};dailyTrendData={labels:[this.translationService.translate("common.days.mon"),this.translationService.translate("common.days.tue"),this.translationService.translate("common.days.wed"),this.translationService.translate("common.days.thu"),this.translationService.translate("common.days.fri"),this.translationService.translate("common.days.sat"),this.translationService.translate("common.days.sun")],datasets:[{label:this.translationService.translate("movements.chart.dailyVariance"),data:[5,12,8,15,20,10,7]}]};chartOptions={responsive:!0,maintainAspectRatio:!1};staffColumns=[{key:"staffName",label:"movements.staff"},{key:"totalMovements",label:"movements.totalMovements"},{key:"suspiciousMovements",label:"movements.suspiciousMovements"},{key:"riskScore",label:"movements.riskScore"},{key:"riskLevel",label:"movements.riskLevel"}];ngOnInit(){this.loadStaffRiskScores()}loadStaffRiskScores(){this.movementEngine.getStaffRiskScores().subscribe({next:i=>{this.staffRiskScores=i,this.totalMovements=i.reduce((t,e)=>t+e.totalMovements,0),this.suspiciousMovements=i.reduce((t,e)=>t+e.suspiciousMovements,0),this.highRiskStaffCount=i.filter(t=>t.riskLevel==="high"||t.riskLevel==="critical").length,this.avgRiskScore=i.length>0?i.reduce((t,e)=>t+e.riskScore,0)/i.length:0}})}static \u0275fac=function(t){return new(t||c)};static \u0275cmp=f({type:c,selectors:[["app-movements-risk-dashboard"]],decls:22,vars:26,consts:[[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6"],["label","movements.totalMovements",3,"value","trend","trendPositive"],["label","movements.suspiciousMovements",3,"value","trend","trendPositive"],["label","movements.highRiskStaff",3,"value"],["label","movements.avgRiskScore",3,"value"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"p-6","rounded-lg",2,"background-color","var(--card-bg)"],[1,"text-lg","font-semibold","mb-4"],[3,"type","data","options"],[3,"columns","data","emptyMessage"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"div",1),r(2,"app-stat-card",2)(3,"app-stat-card",3)(4,"app-stat-card",4)(5,"app-stat-card",5),s(),o(6,"div",6)(7,"div",7)(8,"h3",8),m(9),p(10,"translate"),s(),r(11,"app-chart",9),s(),o(12,"div",7)(13,"h3",8),m(14),p(15,"translate"),s(),r(16,"app-chart",9),s()(),o(17,"div",7)(18,"h3",8),m(19),p(20,"translate"),s(),r(21,"app-table",10),s()()),t&2&&(a(2),n("value",e.totalMovements)("trend","+12%")("trendPositive",!0),a(),n("value",e.suspiciousMovements)("trend","-3")("trendPositive",!0),a(),n("value",e.highRiskStaffCount),a(),n("value",e.avgRiskScore.toFixed(1)),a(4),l(v(10,20,"movements.riskByType")),a(2),n("type","bar")("data",e.riskByTypeData)("options",e.chartOptions),a(3),l(v(15,22,"movements.dailyTrend")),a(2),n("type","line")("data",e.dailyTrendData)("options",e.chartOptions),a(3),l(v(20,24,"movements.staffRiskScores")),a(2),n("columns",e.staffColumns)("data",e.staffRiskScores)("emptyMessage","movements.noStaffData"))},dependencies:[h,y,k,g,S],encapsulation:2})};export{M as MovementsRiskDashboardComponent};
