import{a as Q}from"./chunk-7Z2MHGOK.js";import{a as H}from"./chunk-PRIAQIJ7.js";import{a as j}from"./chunk-77NWAUUO.js";import{a as N}from"./chunk-L2QHXWDV.js";import{b as L,d as V}from"./chunk-5NQMXUDV.js";import"./chunk-TXY55LQM.js";import{$a as v,Ab as g,Ea as h,Ja as c,Pa as E,R as x,Ra as b,Sb as T,Tb as P,Ua as m,Va as I,Vb as A,X as _,Xa as k,Y as D,Ya as w,Z as S,Za as t,_ as C,_a as i,bb as B,cb as y,db as d,lb as n,mb as l,nb as f,wa as r,yb as u,zb as M}from"./chunk-F5WAPTHD.js";import"./chunk-7CGTOI24.js";function F(a,o){if(a&1&&v(0,"app-alert",1),a&2){let e=d();E("title",e.errorMessage)}}function G(a,o){if(a&1&&(t(0,"div",16)(1,"label",14),n(2,"Description"),i(),t(3,"p",17),n(4),i()()),a&2){let e=d(2);r(4),l(e.drug.generalDrug==null?null:e.drug.generalDrug.description)}}function O(a,o){if(a&1&&(t(0,"div")(1,"label",14),n(2,"Price After Discount"),i(),t(3,"p",20),n(4),i()()),a&2){let e=d(2);r(4),l(e.drug.priceAfterDiscount)}}function q(a,o){a&1&&(t(0,"span",25),n(1,"(Expiring Soon)"),i())}function R(a,o){if(a&1&&(t(0,"div")(1,"label",14),n(2,"Expiry Date"),i(),t(3,"p",17),n(4),u(5,"date"),c(6,q,2,0,"span",25),i()()),a&2){let e=d(2);r(3),b("text-red-600",e.isExpiringSoon(e.drug.expiryDate)),r(),f(" ",g(5,4,e.drug.expiryDate,"mediumDate")," "),r(2),m(e.isExpiringSoon(e.drug.expiryDate)?6:-1)}}function z(a,o){if(a&1&&(t(0,"tr")(1,"td",31),n(2),i(),t(3,"td",31),n(4),i(),t(5,"td",31),n(6),u(7,"date"),i(),t(8,"td",31),n(9),u(10,"date"),i()()),a&2){let e=o.$implicit;r(2),l(e.quantity),r(2),l(e.unitCost),r(2),l(g(7,4,e.purchaseDate,"short")),r(3),l(g(10,7,e.expiryDate,"short"))}}function $(a,o){if(a&1&&(t(0,"div",22)(1,"h2",12),n(2,"Cost Layers"),i(),t(3,"div",26)(4,"table",27)(5,"thead",28)(6,"tr")(7,"th",29),n(8,"Quantity"),i(),t(9,"th",29),n(10,"Unit Cost"),i(),t(11,"th",29),n(12,"Purchase Date"),i(),t(13,"th",29),n(14,"Expiry Date"),i()()(),t(15,"tbody",30),k(16,z,11,10,"tr",null,I),i()()()()),a&2){let e=d(2);r(16),w(e.drug.costLayers)}}function J(a,o){if(a&1){let e=B();t(0,"div",2)(1,"div",4)(2,"h1",5),n(3,"Product Details"),i(),t(4,"div",6)(5,"app-button",7),y("onClick",function(){_(e);let s=d();return D(s.editDrug())}),S(),t(6,"svg",8),v(7,"path",9),i(),n(8," Edit "),i(),C(),t(9,"app-button",7),y("onClick",function(){_(e);let s=d();return D(s.goBack())}),S(),t(10,"svg",8),v(11,"path",10),i(),n(12," Back "),i()()(),C(),t(13,"div",11)(14,"h2",12),n(15,"General Information"),i(),t(16,"div",13)(17,"div")(18,"label",14),n(19,"Drug Name"),i(),t(20,"p",15),n(21),i()(),c(22,G,5,1,"div",16),t(23,"div")(24,"label",14),n(25,"Manufacturer"),i(),t(26,"p",17),n(27),i()(),t(28,"div")(29,"label",14),n(30,"International Barcode"),i(),t(31,"p",18),n(32),i()(),t(33,"div")(34,"label",14),n(35,"Internal Barcode (PLU)"),i(),t(36,"p",18),n(37),i()()()(),t(38,"div",11)(39,"h2",12),n(40,"Stock Information"),i(),t(41,"div",19)(42,"div")(43,"label",14),n(44,"Price"),i(),t(45,"p",20),n(46),i()(),c(47,O,5,1,"div"),t(48,"div")(49,"label",14),n(50,"Stock Quantity"),i(),t(51,"p",20),n(52),i()(),t(53,"div")(54,"label",14),n(55,"Minimum Stock"),i(),t(56,"p",17),n(57),i()(),c(58,R,7,7,"div"),t(59,"div")(60,"label",14),n(61,"Status"),i(),t(62,"app-badge",21),n(63),u(64,"titlecase"),i()()()(),c(65,$,18,0,"div",22),t(66,"div",23)(67,"div",24)(68,"div")(69,"label",14),n(70,"Created At"),i(),t(71,"p",17),n(72),u(73,"date"),i()(),t(74,"div")(75,"label",14),n(76,"Last Updated"),i(),t(77,"p",17),n(78),u(79,"date"),i()()()()()}if(a&2){let e=d();r(21),l((e.drug.generalDrug==null?null:e.drug.generalDrug.name)||"N/A"),r(),m(e.drug.generalDrug!=null&&e.drug.generalDrug.description?22:-1),r(5),l((e.drug.generalDrug==null?null:e.drug.generalDrug.manufacturer)||"N/A"),r(5),l((e.drug.generalDrug==null?null:e.drug.generalDrug.internationalBarcode)||"N/A"),r(5),l(e.drug.internalBarcode),r(9),l(e.drug.price),r(),m(e.drug.priceAfterDiscount!==e.drug.price?47:-1),r(4),b("text-red-600",e.drug.stockQuantity<e.drug.minimumStock),r(),f(" ",e.drug.stockQuantity," "),r(5),l(e.drug.minimumStock),r(),m(e.drug.expiryDate?58:-1),r(4),E("variant",e.getStatusVariant(e.drug.status)),r(),f(" ",M(64,17,e.drug.status)," "),r(2),m(e.drug.costLayers&&e.drug.costLayers.length>0?65:-1),r(7),l(g(73,19,e.drug.createdAt,"medium")),r(6),l(g(79,22,e.drug.updatedAt,"medium"))}}function K(a,o){a&1&&(t(0,"div",3)(1,"p",32),n(2,"Loading product details..."),i()())}var U=class a{route=x(L);router=x(V);drugsService=x(Q);drug=null;loading=!0;errorMessage="";ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o?this.loadDrug(o):(this.errorMessage="Product ID is required",this.loading=!1)}loadDrug(o){this.loading=!0,this.errorMessage="",this.drugsService.getPharmacyDrugById(o).subscribe({next:e=>{this.drug=e,this.loading=!1,e||(this.errorMessage="Product not found")},error:e=>{this.errorMessage="Failed to load product details",this.loading=!1,console.error("Error loading drug:",e)}})}editDrug(){this.drug&&this.router.navigate(["/drugs",this.drug.id,"edit"])}goBack(){this.router.navigate(["/drugs"])}getStatusVariant(o){return o==="active"?"success":o==="out_of_stock"?"danger":"default"}isExpiringSoon(o){let e=new Date,p=new Date(o),s=Math.floor((p.getTime()-e.getTime())/(1e3*60*60*24));return s<=30&&s>=0}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=h({type:a,selectors:[["app-drug-detail"]],decls:4,vars:2,consts:[[1,"space-y-[var(--spacing-gap)]"],["type","error",3,"title"],[1,"bg-[var(--card-bg)]","rounded-[var(--radius-lg)]","shadow-[var(--shadow-sm)]","p-[var(--spacing-card)]"],[1,"text-center","py-12"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-[var(--text-primary)]"],[1,"flex","gap-3"],["variant","outline",3,"onClick"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"mb-6","pb-6","border-b","border-[var(--border-color)]"],[1,"text-lg","font-semibold","text-[var(--text-primary)]","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"block","text-sm","font-medium","text-[var(--card-text)]","mb-1"],[1,"text-[var(--text-primary)]","font-medium"],[1,"md:col-span-2"],[1,"text-[var(--text-primary)]"],[1,"text-[var(--text-primary)]","font-mono"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],[1,"text-[var(--text-primary)]","font-medium","text-lg"],[3,"variant"],[1,"mb-6"],[1,"pt-6","border-t","border-[var(--border-color)]"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","text-sm"],[1,"ml-2","text-xs"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-[var(--border-color)]"],[1,"bg-[var(--page-bg)]"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-[var(--card-text)]","uppercase"],[1,"bg-[var(--card-bg)]","divide-y","divide-[var(--border-color)]"],[1,"px-4","py-3","text-sm","text-[var(--text-primary)]"],[1,"text-[var(--card-text)]"]],template:function(e,p){e&1&&(t(0,"div",0),c(1,F,1,1,"app-alert",1)(2,J,80,25,"div",2)(3,K,3,0,"div",3),i()),e&2&&(r(),m(p.errorMessage?1:-1),r(),m(p.drug?2:p.loading?3:-1))},dependencies:[A,T,P,N,j,H],encapsulation:2})};export{U as DrugDetailComponent};
