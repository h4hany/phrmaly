import{a as W}from"./chunk-CUGV46X5.js";import{a as z}from"./chunk-PUVF5ECJ.js";import"./chunk-Y5QUESDN.js";import{c as N,d as c,e as q,f as T,h as A,k as V,n as D,o as G,p as O,q as $,t as j,v as L,x as R}from"./chunk-VW37JDOU.js";import{a as H}from"./chunk-YJWIIGXE.js";import{d as F}from"./chunk-QHH3SHC3.js";import{a as U}from"./chunk-TLPU4UMA.js";import"./chunk-ACQN7LQS.js";import{b as w}from"./chunk-7DC7YEPQ.js";import{$ as E,$a as t,$b as I,Bb as r,Cb as n,Ga as M,Ra as d,S as y,Y as h,Z as C,Za as _,_ as B,_a as S,ab as i,bb as b,db as P,eb as f,fb as v,nb as l,ob as p,pb as x,xa as e}from"./chunk-OKFD3A6M.js";import{a as K,b as k}from"./chunk-KAT7YFEL.js";var J=(m,o)=>o.id;function Y(m,o){if(m&1){let a=P();t(0,"div",28)(1,"input",34),f("change",function(u){let g=h(a).$implicit,X=v();return C(X.toggleCapability(g.id,u))}),i(),t(2,"label",35),l(3),r(4,"translate"),i()()}if(m&2){let a=o.$implicit,s=v();e(),d("id","capability-"+a.id)("value",a.id)("checked",s.isCapabilitySelected(a.id)),e(),d("for","capability-"+a.id),e(),x(" ",n(4,5,a.nameKey)," ")}}function Z(m,o){if(m&1){let a=P();t(0,"app-selectable-card",36),f("cardClick",function(){let u=h(a).$implicit,g=v();return C(g.toggleModule(u.id))}),t(1,"div",37)(2,"h3",38),l(3),r(4,"translate"),i()(),t(5,"p",39),l(6),r(7,"translate"),i()()}if(m&2){let a=o.$implicit,s=v();d("selected",s.isModuleSelected(a.id)),e(3),p(n(4,3,a.nameKey)),e(3),p(n(7,5,a.descriptionKey))}}var Q=class m{fb=y(L);router=y(F);subscriptionsService=y(U);planForm;loading=!1;selectedCapabilities=[];selectedModules=[];capabilities=[{id:"unlimited_pharmacies",nameKey:"platform.subscriptions.capabilityUnlimitedPharmacies"},{id:"unlimited_staff",nameKey:"platform.subscriptions.capabilityUnlimitedStaff"},{id:"priority_support",nameKey:"platform.subscriptions.capabilityPrioritySupport"},{id:"advanced_analytics",nameKey:"platform.subscriptions.capabilityAdvancedAnalytics"},{id:"api_access",nameKey:"platform.subscriptions.capabilityApiAccess"},{id:"custom_integrations",nameKey:"platform.subscriptions.capabilityCustomIntegrations"},{id:"white_label",nameKey:"platform.subscriptions.capabilityWhiteLabel"},{id:"dedicated_account_manager",nameKey:"platform.subscriptions.capabilityDedicatedManager"}];availableModules=[{id:"inventory",nameKey:"platform.modules.inventory",descriptionKey:"account.create.modules.inventory.description"},{id:"hr",nameKey:"platform.modules.hr",descriptionKey:"account.create.modules.hr.description"},{id:"finance",nameKey:"platform.modules.finance",descriptionKey:"account.create.modules.finance.description"},{id:"automation",nameKey:"platform.modules.automation",descriptionKey:"account.create.modules.automation.description"},{id:"loyalty",nameKey:"platform.modules.loyalty",descriptionKey:"account.create.modules.loyalty.description"},{id:"api_access",nameKey:"platform.modules.api_access",descriptionKey:"account.create.modules.apiAccess.description"},{id:"ai_features",nameKey:"platform.modules.ai_features",descriptionKey:"account.create.modules.aiFeatures.description"},{id:"analytics",nameKey:"platform.modules.analytics",descriptionKey:"account.create.modules.analytics.description"},{id:"reports",nameKey:"platform.modules.reports",descriptionKey:"account.create.modules.reports.description"},{id:"multi_branch",nameKey:"platform.modules.multi_branch",descriptionKey:"account.create.modules.multiBranch.description"}];ngOnInit(){this.initializeForm()}initializeForm(){this.planForm=this.fb.group({name:["",[c.required]],description:["",[c.required]],tier:["starter",[c.required]],price:[0,[c.required,c.min(0)]],billingCycle:["monthly",[c.required]],maxPharmacies:[1,[c.required,c.min(-1)]],maxStaff:[1,[c.required,c.min(-1)]]})}toggleCapability(o,a){a.target.checked?this.selectedCapabilities.includes(o)||this.selectedCapabilities.push(o):this.selectedCapabilities=this.selectedCapabilities.filter(u=>u!==o)}isCapabilitySelected(o){return this.selectedCapabilities.includes(o)}toggleModule(o){let a=this.selectedModules.indexOf(o);a>=0?this.selectedModules.splice(a,1):this.selectedModules.push(o)}isModuleSelected(o){return this.selectedModules.includes(o)}createPlan(){if(this.planForm.invalid){this.planForm.markAllAsTouched();return}this.loading=!0;let o=k(K({},this.planForm.value),{enabledModules:this.selectedModules,features:{capabilities:this.selectedCapabilities},isActive:!0,isArchived:!1});console.log("Creating plan:",o),setTimeout(()=>{this.loading=!1,this.router.navigate(["/super-admin/subscriptions"])},2e3)}goBack(){this.router.navigate(["/super-admin/subscriptions"])}static \u0275fac=function(a){return new(a||m)};static \u0275cmp=M({type:m,selectors:[["app-create-plan"]],decls:78,vars:69,consts:[[1,"w-full","px-4","sm:px-6","lg:px-8","py-8"],[1,"mb-6"],[1,"flex","items-center","text-sm","text-[var(--card-text)]","hover:text-[var(--text-primary)]","mb-4",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-2xl","font-bold","text-[var(--text-primary)]"],[1,"text-sm","text-[var(--card-text)]","mt-1"],[1,"space-y-6",3,"formGroup"],[1,"bg-[var(--card-bg)]","rounded-[var(--radius-lg)]","shadow-[var(--shadow-sm)]","p-6"],[1,"text-lg","font-semibold","text-[var(--text-primary)]","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["formControlName","name",3,"label","required","placeholder"],[1,"block","text-sm","font-medium","text-[var(--card-text)]","mb-1"],["formControlName","tier",1,"w-full","px-4","py-2","border","border-[var(--border-color)]","rounded-[var(--radius-md)]","text-sm","bg-[var(--card-bg)]","text-[var(--text-primary)]"],["value","starter"],["value","professional"],["value","enterprise"],["value","custom"],["formControlName","price","type","number",3,"label","required","placeholder"],["formControlName","billingCycle",1,"w-full","px-4","py-2","border","border-[var(--border-color)]","rounded-[var(--radius-md)]","text-sm","bg-[var(--card-bg)]","text-[var(--text-primary)]"],["value","monthly"],["value","annual"],["formControlName","maxPharmacies","type","number",3,"label","required","placeholder"],["formControlName","maxStaff","type","number",3,"label","required","placeholder"],[1,"mt-6"],[1,"block","text-sm","font-medium","text-[var(--card-text)]","mb-2"],["formControlName","description","rows","4",1,"w-full","px-4","py-2","border","border-[var(--border-color)]","rounded-[var(--radius-md)]","text-sm","bg-[var(--card-bg)]","text-[var(--text-primary)]",3,"placeholder"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex","items-center"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[3,"selected"],[1,"flex","items-center","justify-end","gap-4","pt-6","border-t","border-[var(--border-color)]"],["variant","outline",3,"onClick"],["variant","primary",3,"onClick","disabled","loading"],["type","checkbox",1,"w-4","h-4","text-[var(--primary-color)]","border-[var(--border-color)]","rounded","focus:ring-[var(--primary-color)]",3,"change","id","value","checked"],[1,"ml-2","text-sm","text-[var(--text-primary)]","cursor-pointer",3,"for"],[3,"cardClick","selected"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-sm","text-gray-600"]],template:function(a,s){a&1&&(t(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return s.goBack()}),B(),t(3,"svg",3),b(4,"path",4),i(),l(5),r(6,"translate"),i(),E(),t(7,"h1",5),l(8),r(9,"translate"),i(),t(10,"p",6),l(11),r(12,"translate"),i()(),t(13,"form",7)(14,"div",8)(15,"h2",9),l(16),r(17,"translate"),i(),t(18,"div",10),b(19,"app-text-input",11),t(20,"div")(21,"label",12),l(22),r(23,"translate"),i(),t(24,"select",13)(25,"option",14),l(26),r(27,"translate"),i(),t(28,"option",15),l(29),r(30,"translate"),i(),t(31,"option",16),l(32),r(33,"translate"),i(),t(34,"option",17),l(35),r(36,"translate"),i()()(),b(37,"app-text-input",18),t(38,"div")(39,"label",12),l(40),r(41,"translate"),i(),t(42,"select",19)(43,"option",20),l(44),r(45,"translate"),i(),t(46,"option",21),l(47),r(48,"translate"),i()()(),b(49,"app-text-input",22)(50,"app-text-input",23),i(),t(51,"div",24)(52,"label",25),l(53),r(54,"translate"),i(),b(55,"textarea",26),r(56,"translate"),i()(),t(57,"div",8)(58,"h2",9),l(59),r(60,"translate"),i(),t(61,"div",27),_(62,Y,5,7,"div",28,J),i()(),t(64,"div",8)(65,"h2",9),l(66),r(67,"translate"),i(),t(68,"div",29),_(69,Z,8,7,"app-selectable-card",30,J),i()(),t(71,"div",31)(72,"app-button",32),f("onClick",function(){return s.goBack()}),l(73),r(74,"translate"),i(),t(75,"app-button",33),f("onClick",function(){return s.createPlan()}),l(76),r(77,"translate"),i()()()()),a&2&&(e(5),x(" ",n(6,33,"common.back")," "),e(3),p(n(9,35,"platform.subscriptions.createPlan")),e(3),p(n(12,37,"platform.subscriptions.createPlanSubtitle")),e(2),d("formGroup",s.planForm),e(3),p(n(17,39,"platform.subscriptions.planBasicInfo")),e(3),d("label","platform.subscriptions.planName")("required",!0)("placeholder","platform.subscriptions.planNamePlaceholder"),e(3),p(n(23,41,"platform.subscriptions.planTier")),e(4),p(n(27,43,"platform.subscriptions.tierStarter")),e(3),p(n(30,45,"platform.subscriptions.tierProfessional")),e(3),p(n(33,47,"platform.subscriptions.tierEnterprise")),e(3),p(n(36,49,"platform.subscriptions.tierCustom")),e(2),d("label","platform.subscriptions.planPrice")("required",!0)("placeholder","platform.subscriptions.planPricePlaceholder"),e(3),p(n(41,51,"platform.subscriptions.billingCycle")),e(4),p(n(45,53,"platform.plan.month")),e(3),p(n(48,55,"platform.plan.year")),e(2),d("label","platform.subscriptions.maxPharmacies")("required",!0)("placeholder","platform.subscriptions.maxPharmaciesPlaceholder"),e(),d("label","platform.subscriptions.maxStaff")("required",!0)("placeholder","platform.subscriptions.maxStaffPlaceholder"),e(3),p(n(54,57,"platform.subscriptions.planDescription")),e(2),d("placeholder",n(56,59,"platform.subscriptions.planDescriptionPlaceholder")),e(4),p(n(60,61,"platform.subscriptions.planCapabilities")),e(3),S(s.capabilities),e(4),p(n(67,63,"platform.subscriptions.planModules")),e(3),S(s.availableModules),e(4),x(" ",n(74,65,"common.cancel")," "),e(2),d("disabled",s.planForm.invalid)("loading",s.loading),e(),x(" ",n(77,67,"platform.subscriptions.createPlan")," "))},dependencies:[I,R,A,O,$,N,G,q,T,j,V,D,z,H,W,w],encapsulation:2})};export{Q as CreatePlanComponent};
