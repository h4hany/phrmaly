import{Hb as h,Ia as p,K as g,Q as e,f as s,fc as b,i,n as l,s as u,u as o}from"./chunk-E4S7NVXB.js";var a=class n{http=e(b);translations={en:{},ar:{}};translationsLoaded=new s(!1);translationsLoaded$=this.translationsLoaded.asObservable();currentLangSubject=new s("en");currentLang$=this.currentLangSubject.asObservable();constructor(){this.loadTranslations();let t=localStorage.getItem("language");t&&this.setLanguage(t)}loadTranslations(){u({en:this.http.get("i18n/en.json").pipe(o(t=>(console.error("Error loading English translations:",t),i({})))),ar:this.http.get("i18n/ar.json").pipe(o(t=>(console.error("Error loading Arabic translations:",t),i({}))))}).subscribe({next:t=>{this.translations.en=t.en||{},this.translations.ar=t.ar||{},this.translationsLoaded.next(!0);let r=this.currentLangSubject.value;this.currentLangSubject.next(r),console.log("Translations loaded successfully:",{en:Object.keys(this.translations.en).length,ar:Object.keys(this.translations.ar).length})},error:t=>{console.error("Error loading translations:",t),this.translationsLoaded.next(!0)}})}translate(t){let r=this.currentLangSubject.value,c=this.translations[r]?.[t];return c||(this.translationsLoaded.value&&console.warn(`Translation missing for key: ${t}`),t)}setLanguage(t){localStorage.setItem("language",t),this.currentLangSubject.next(t),document.documentElement.setAttribute("dir",t==="ar"?"rtl":"ltr"),document.documentElement.setAttribute("lang",t)}getCurrentLanguage(){return this.currentLangSubject.value}toggleLanguage(){let t=this.currentLangSubject.value==="en"?"ar":"en";this.setLanguage(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})};var d=class n{translationService=e(a);changeDetectorRef=e(h);subscription;constructor(){this.subscription=l([this.translationService.currentLang$,this.translationService.translationsLoaded$]).subscribe(()=>{this.changeDetectorRef.markForCheck()})}transform(t){return t&&this.translationService.translate(t)}ngOnDestroy(){this.subscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=p({name:"translate",type:n,pure:!1})};export{a,d as b};
