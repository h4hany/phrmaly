import{a as g}from"./chunk-NAQJBDHJ.js";import{a as l}from"./chunk-XBZAXIUZ.js";import{L as n,R as o,g as i}from"./chunk-W6WRXJJ4.js";import{a as s}from"./chunk-7CGTOI24.js";var c=class a{pharmacyContext=o(g);translationService=o(l);currentLangSubject=new i("en");currentLang$=this.currentLangSubject.asObservable();STORAGE_KEY="theme_colors";constructor(){this.pharmacyContext.currentPharmacy$.subscribe(e=>{e&&this.applyPharmacyTheme(e)});let r=localStorage.getItem("language");r?this.setLanguage(r):this.setLanguage("en"),this.loadTheme()}applyPharmacyTheme(r){let e=document.documentElement;r.primaryColor&&e.style.setProperty("--primary-color",r.primaryColor),r.secondaryColor&&e.style.setProperty("--secondary-color",r.secondaryColor),r.sidebarColor&&e.style.setProperty("--sidebar-color",r.sidebarColor),r.rtlEnabled?(document.documentElement.setAttribute("dir","rtl"),this.setLanguage("ar")):document.documentElement.setAttribute("dir","ltr")}getDefaultTheme(){return{primaryBg:"#D9F275",primaryText:"#003032",sidebarBg:"#003032",sidebarText:"#E3F4F5",sidebarActiveBg:"#D9F275",sidebarActiveText:"#003032",cardBg:"#FFFFFF",cardText:"#697579",pageBg:"#F7F7F7",successColor:"#10b981",successBg:"#d1fae5",successText:"#065f46",warningColor:"#f59e0b",warningBg:"#fef3c7",warningText:"#92400e",dangerColor:"#ef4444",dangerBg:"#fee2e2",dangerText:"#991b1b",patientCardBg:"#003032",patientCardText:"#D9F275",scrollbarBg:"#003032",scrollbarThumb:"#D9F275"}}getTheme(){let r=localStorage.getItem(this.STORAGE_KEY);if(r)try{return JSON.parse(r)}catch{return this.getDefaultTheme()}return this.getDefaultTheme()}saveTheme(r){let e=this.getTheme(),t=s(s({},e),r);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),this.applyTheme(t)}applyTheme(r){let e=document.documentElement,t=s(s(s({},this.getDefaultTheme()),this.getTheme()),r);e.style.setProperty("--primary-bg",t.primaryBg),e.style.setProperty("--primary-text",t.primaryText),e.style.setProperty("--sidebar-bg",t.sidebarBg),e.style.setProperty("--sidebar-text",t.sidebarText),e.style.setProperty("--sidebar-active-bg",t.sidebarActiveBg),e.style.setProperty("--sidebar-active-text",t.sidebarActiveText),e.style.setProperty("--card-bg",t.cardBg),e.style.setProperty("--card-text",t.cardText),e.style.setProperty("--page-bg",t.pageBg),e.style.setProperty("--success-color",t.successColor),e.style.setProperty("--success-bg",t.successBg),e.style.setProperty("--success-text",t.successText),e.style.setProperty("--warning-color",t.warningColor),e.style.setProperty("--warning-bg",t.warningBg),e.style.setProperty("--warning-text",t.warningText),e.style.setProperty("--danger-color",t.dangerColor),e.style.setProperty("--danger-bg",t.dangerBg),e.style.setProperty("--danger-text",t.dangerText),e.style.setProperty("--patient-card-bg",t.patientCardBg),e.style.setProperty("--patient-card-text",t.patientCardText),e.style.setProperty("--scrollbar-bg",t.scrollbarBg),e.style.setProperty("--scrollbar-thumb",t.scrollbarThumb),e.style.setProperty("--primary-color",t.primaryBg),e.style.setProperty("--secondary-color",t.primaryBg),e.style.setProperty("--sidebar-color",t.sidebarBg)}loadTheme(){let r=this.getTheme();this.applyTheme(r)}resetTheme(){localStorage.removeItem(this.STORAGE_KEY),this.applyTheme(this.getDefaultTheme())}setLanguage(r){this.translationService.setLanguage(r),this.currentLangSubject.next(r)}getCurrentLanguage(){return this.translationService.getCurrentLanguage()}toggleLanguage(){this.translationService.toggleLanguage(),this.currentLangSubject.next(this.translationService.getCurrentLanguage())}static \u0275fac=function(e){return new(e||a)};static \u0275prov=n({token:a,factory:a.\u0275fac,providedIn:"root"})};export{c as a};
