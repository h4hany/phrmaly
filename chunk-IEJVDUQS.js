import{a as q}from"./chunk-WSDWKGSM.js";import"./chunk-X6VRM7CQ.js";import"./chunk-WX7MLWZI.js";import"./chunk-3NBSZF5I.js";import{a as U}from"./chunk-NMDNQUB4.js";import{a as O}from"./chunk-FEXFTTPF.js";import{a as F,b as W}from"./chunk-PPX5YYRY.js";import"./chunk-O3HD32UM.js";import{a as j}from"./chunk-XG6FMBJJ.js";import{a as N}from"./chunk-6CFKC637.js";import{a as G}from"./chunk-3QVO6BSK.js";import{a as H}from"./chunk-2OU3JUYQ.js";import"./chunk-5PFWNSG3.js";import"./chunk-T542ZMY7.js";import"./chunk-URFUYTQU.js";import"./chunk-BYXBJQAS.js";import{a as K,b as _}from"./chunk-3UJCRMW3.js";import{b as z,d as A}from"./chunk-C3O3TVFX.js";import{$a as i,Ab as p,Bb as m,Cb as T,Fa as b,Ka as v,Pa as y,Q as S,Qa as u,Ra as B,Ua as D,Va as d,W as P,X as M,Xb as R,Y as x,Z as g,_a as n,_b as C,ab as f,cb as L,db as k,eb as c,mb as o,nb as s,ob as w,pb as V,wa as t}from"./chunk-E4S7NVXB.js";import"./chunk-C6Q5SG76.js";function Y(a,l){if(a&1&&f(0,"app-icon",3),a&2){let e=c();u("name",e.icon)}}function Z(a,l){a&1&&(x(),f(0,"path",12))}function $(a,l){a&1&&(x(),f(0,"path",13))}function ee(a,l){if(a&1&&(n(0,"div",10),x(),n(1,"svg",11),v(2,Z,1,0,":svg:path",12)(3,$,1,0,":svg:path",13),i(),g(),n(4,"span",14),o(5),i()()),a&2){let e=c();D(e.trendClass),t(2),d(e.trend>0?2:3),t(3),V("",e.trend>0?"+":"","",e.trend,"%")}}function te(a,l){if(a&1&&(n(0,"span",8),o(1),i()),a&2){let e=c();t(),s(e.unit)}}function ie(a,l){if(a&1&&(n(0,"p",9),o(1),p(2,"translate"),i()),a&2){let e=c();t(),s(m(2,1,e.subtitle))}}var I=class a{label="";value=0;unit="";subtitle="";icon="";trend;get formattedValue(){return typeof this.value=="number"?this.value>=1e6?(this.value/1e6).toFixed(1)+"M":this.value>=1e3?(this.value/1e3).toFixed(1)+"K":this.value.toLocaleString():this.value}get trendClass(){return this.trend===void 0?"":this.trend>=0?"text-green-600":"text-red-600"}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=b({type:a,selectors:[["app-staff-kpi-card"]],inputs:{label:"label",value:"value",unit:"unit",subtitle:"subtitle",icon:"icon",trend:"trend"},decls:13,vars:8,consts:[[1,"bg-[var(--card-bg)]","rounded-[var(--radius-lg)]","shadow-[var(--shadow-sm)]","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","gap-2"],[1,"w-5","h-5","text-[var(--primary-color)]",3,"name"],[1,"text-sm","font-medium","text-[var(--card-text)]"],[1,"flex","items-center","gap-1",3,"class"],[1,"flex","items-baseline","gap-2"],[1,"text-3xl","font-bold","text-[var(--text-primary)]"],[1,"text-sm","text-[var(--card-text)]"],[1,"text-xs","text-[var(--card-text)]","mt-2"],[1,"flex","items-center","gap-1"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["fill-rule","evenodd","d","M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z","clip-rule","evenodd"],["fill-rule","evenodd","d","M14.707 12.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l2.293-2.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"text-xs","font-medium"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),v(3,Y,1,1,"app-icon",3),n(4,"h3",4),o(5),p(6,"translate"),i()(),v(7,ee,6,5,"div",5),i(),n(8,"div",6)(9,"span",7),o(10),i(),v(11,te,2,1,"span",8),i(),v(12,ie,3,3,"p",9),i()),e&2&&(t(3),d(r.icon?3:-1),t(2),s(m(6,6,r.label)),t(2),d(r.trend!==void 0?7:-1),t(3),s(r.formattedValue),t(),d(r.unit?11:-1),t(),d(r.subtitle?12:-1))},dependencies:[C,_,G],encapsulation:2})};function ne(a,l){if(a&1&&(n(0,"span",6),o(1),p(2,"translate"),i()),a&2){let e=c();t(),s(m(2,1,e.label))}}var E=class a{score=0;size=120;strokeWidth=8;showLabel=!0;label="";get center(){return this.size/2}get radius(){return(this.size-this.strokeWidth)/2}get circumference(){return 2*Math.PI*this.radius}get offset(){let l=this.score/100;return this.circumference*(1-l)}get scoreColor(){return this.score>=90?"#10b981":this.score>=80?"#3b82f6":this.score>=70?"#f59e0b":this.score>=60?"#f97316":"#ef4444"}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=b({type:a,selectors:[["app-performance-score-ring"]],inputs:{score:"score",size:"size",strokeWidth:"strokeWidth",showLabel:"showLabel",label:"label"},decls:8,vars:17,consts:[[1,"relative","inline-flex","items-center","justify-center"],[1,"transform","-rotate-90"],["fill","none","stroke","var(--border-color)"],["fill","none","stroke-linecap","round",1,"transition-all","duration-500"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center"],[1,"text-2xl","font-bold"],[1,"text-xs","text-[var(--card-text)]"]],template:function(e,r){e&1&&(n(0,"div",0),x(),n(1,"svg",1),f(2,"circle",2)(3,"circle",3),i(),g(),n(4,"div",4)(5,"span",5),o(6),i(),v(7,ne,3,3,"span",6),i()()),e&2&&(t(),y("width",r.size)("height",r.size),t(),y("cx",r.center)("cy",r.center)("r",r.radius)("stroke-width",r.strokeWidth),t(),y("cx",r.center)("cy",r.center)("r",r.radius)("stroke",r.scoreColor)("stroke-width",r.strokeWidth)("stroke-dasharray",r.circumference)("stroke-dashoffset",r.offset),t(2),B("color",r.scoreColor),t(),s(r.score),t(),d(r.showLabel?7:-1))},dependencies:[C,_],encapsulation:2})};function ae(a,l){if(a&1&&f(0,"app-alert",1),a&2){let e=c();u("title",e.errorMessage)}}function re(a,l){if(a&1&&(n(0,"div")(1,"label",14),o(2),p(3,"translate"),i(),n(4,"p",16),o(5),i()()),a&2){let e=c(2);t(2),s(m(3,2,"staff.phone")),t(3),s(e.staff.phone)}}function oe(a,l){if(a&1&&(n(0,"div")(1,"label",14),o(2),p(3,"translate"),i(),n(4,"p",16),o(5),i()()),a&2){let e=c(2);t(2),s(m(3,2,"staff.username")),t(3),s(e.staff.username)}}function le(a,l){if(a&1&&(n(0,"div",22),f(1,"app-staff-kpi-card",23)(2,"app-staff-kpi-card",24)(3,"app-staff-kpi-card",25)(4,"app-staff-kpi-card",24),i(),n(5,"div",26)(6,"div",27)(7,"h3",12),o(8),p(9,"translate"),i(),n(10,"div",28),f(11,"app-performance-score-ring",29),i(),n(12,"div",30)(13,"p",5),o(14),i()()(),n(15,"div",27)(16,"h3",12),o(17),p(18,"translate"),i(),n(19,"div",31),f(20,"app-risk-badge",32),i(),n(21,"div",33)(22,"div",34)(23,"span",35),o(24),p(25,"translate"),i(),n(26,"span",36),o(27),i()(),n(28,"div",34)(29,"span",35),o(30),p(31,"translate"),i(),n(32,"span",36),o(33),i()()()()(),n(34,"div",27)(35,"h3",12),o(36),p(37,"translate"),i(),f(38,"app-timeline",37),i()),a&2){let e=c(3);t(),u("label","hr.performance.salesRevenue")("value",e.performanceMetrics.sales.totalRevenue)("unit","USD")("icon","chart")("trend",e.performanceMetrics.sales.growthPercentage),t(),u("label","hr.performance.totalInvoices")("value",e.performanceMetrics.sales.totalInvoices)("icon","receipt"),t(),u("label","hr.performance.attendance")("value",e.performanceMetrics.attendance.percentage)("unit","%")("icon","calendar"),t(),u("label","hr.performance.errors")("value",e.performanceMetrics.errors.totalErrors)("icon","alert"),t(4),s(m(9,28,"hr.performance.overallScore")),t(3),u("score",e.performanceMetrics.overallScore)("label","hr.performance.grade"),t(3),s(e.performanceMetrics.performanceGrade),t(3),s(m(18,30,"hr.performance.riskAssessment")),t(3),u("level",e.performanceMetrics.riskLevel)("score",e.performanceMetrics.riskScore),t(4),s(m(25,32,"hr.performance.suspiciousMovements")),t(3),s(e.performanceMetrics.inventory.suspiciousMovements),t(3),s(m(31,34,"hr.performance.totalMovements")),t(3),s(e.performanceMetrics.inventory.movements),t(3),s(m(37,36,"hr.performance.activityTimeline")),t(2),u("events",e.timelineEvents)}}function se(a,l){a&1&&(n(0,"div",2)(1,"p",35),o(2),p(3,"translate"),i()()),a&2&&(t(2),s(m(3,1,"common.loading")))}function pe(a,l){if(a&1&&(n(0,"app-tabs")(1,"app-tab",20),p(2,"translate"),n(3,"div",21),v(4,le,39,38)(5,se,4,3,"div",2),i()()()),a&2){let e=c(2);t(),u("title",m(2,3,"hr.performance.title"))("active",!0),t(3),d(e.performanceMetrics?4:e.loadingPerformance?5:-1)}}function me(a,l){if(a&1){let e=L();n(0,"div",3)(1,"div",4)(2,"h1",5),o(3),p(4,"translate"),i(),n(5,"div",6)(6,"app-button",7),k("onClick",function(){P(e);let h=c();return M(h.editStaff())}),x(),n(7,"svg",8),f(8,"path",9),i(),o(9),p(10,"translate"),i(),g(),n(11,"app-button",7),k("onClick",function(){P(e);let h=c();return M(h.goBack())}),x(),n(12,"svg",8),f(13,"path",10),i(),o(14),p(15,"translate"),i()()(),g(),n(16,"div",11)(17,"h2",12),o(18),p(19,"translate"),i(),n(20,"div",13)(21,"div")(22,"label",14),o(23),p(24,"translate"),i(),n(25,"p",15),o(26),i()(),n(27,"div")(28,"label",14),o(29),p(30,"translate"),i(),n(31,"p",16),o(32),i()(),v(33,re,6,4,"div")(34,oe,6,4,"div"),n(35,"div")(36,"label",14),o(37),p(38,"translate"),i(),n(39,"p",17),o(40),i()(),n(41,"div")(42,"label",14),o(43),p(44,"translate"),i(),n(45,"p",17),o(46),p(47,"translate"),i()()()(),n(48,"div",18)(49,"div",19)(50,"div")(51,"label",14),o(52),p(53,"translate"),i(),n(54,"p",16),o(55),p(56,"date"),i()(),n(57,"div")(58,"label",14),o(59),p(60,"translate"),i(),n(61,"p",16),o(62),p(63,"date"),i()()()()(),v(64,pe,6,5,"app-tabs")}if(a&2){let e=c();t(3),s(m(4,19,"staff.details")),t(6),w(" ",m(10,21,"common.edit")," "),t(5),w(" ",m(15,23,"common.back")," "),t(4),s(m(19,25,"staff.personalInfo")),t(5),s(m(24,27,"staff.fullName")),t(3),s(e.staff.fullName),t(3),s(m(30,29,"staff.email")),t(3),s(e.staff.email),t(),d(e.staff.phone?33:-1),t(),d(e.staff.username?34:-1),t(3),s(m(38,31,"staff.role")),t(3),s(e.getRoleLabel(e.staff.role)),t(3),s(m(44,33,"staff.status")),t(3),s(m(47,35,e.staff.status==="active"?"staff.active":"staff.inactive")),t(6),s(m(53,37,"staff.createdAt")),t(3),s(T(56,39,e.staff.createdAt,"medium")),t(4),s(m(60,42,"staff.updatedAt")),t(3),s(T(63,44,e.staff.updatedAt,"medium")),t(2),d(e.staff?64:-1)}}function ce(a,l){a&1&&(n(0,"div",2)(1,"p",35),o(2),p(3,"translate"),i()()),a&2&&(t(2),s(m(3,1,"staff.loadingDetails")))}var X=class a{route=S(z);router=S(A);pharmacyStaffService=S(U);translationService=S(K);hrPerformanceService=S(q);staff=null;loading=!0;errorMessage="";loadingPerformance=!1;performanceMetrics=null;timelineEvents=[];ngOnInit(){let l=this.route.snapshot.paramMap.get("id");l?this.loadStaff(l):(this.errorMessage="Staff member ID is required",this.loading=!1)}loadStaff(l){this.loading=!0,this.errorMessage="",this.pharmacyStaffService.getById(l).subscribe({next:e=>{this.staff=e,this.loading=!1,e?this.loadPerformanceData(l):this.errorMessage="Staff member not found"},error:e=>{this.errorMessage="Failed to load staff member details",this.loading=!1,console.error("Error loading staff:",e)}})}loadPerformanceData(l){this.loadingPerformance=!0;let e=new Date,r=new Date;r.setMonth(r.getMonth()-1),this.hrPerformanceService.getPerformanceMetrics(l,r,e).subscribe({next:h=>{this.performanceMetrics=h,this.loadingPerformance=!1,this.loadActivityTimeline(l)},error:h=>{console.error("Error loading performance metrics:",h),this.loadingPerformance=!1}})}loadActivityTimeline(l){this.hrPerformanceService.getStaffActivities(l,20).subscribe({next:e=>{this.timelineEvents=e.map(r=>({id:r.id,title:r.description,timestamp:r.timestamp,type:r.type==="sale"?"success":r.type==="audit"?"warning":"info",metadata:r.metadata}))},error:e=>{console.error("Error loading activities:",e)}})}getRoleLabel(l){let r={account_owner:"staff.accountOwner",pharmacy_manager:"staff.pharmacyManager",pharmacy_staff:"staff.pharmacyStaff"}[l]||l;return this.translationService.translate(r)||l}editStaff(){this.staff&&this.router.navigate(["/pharmacy-staff",this.staff.id,"edit"])}goBack(){this.router.navigate(["/pharmacy-staff"])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=b({type:a,selectors:[["app-pharmacy-staff-detail"]],decls:4,vars:2,consts:[[1,"space-y-[var(--spacing-gap)]"],["type","error",3,"title"],[1,"text-center","py-12"],[1,"bg-[var(--card-bg)]","rounded-[var(--radius-lg)]","shadow-[var(--shadow-sm)]","p-[var(--spacing-card)]"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-[var(--text-primary)]"],[1,"flex","gap-3"],["variant","outline",3,"onClick"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"mb-6","pb-6","border-b","border-[var(--border-color)]"],[1,"text-lg","font-semibold","text-[var(--text-primary)]","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"block","text-sm","font-medium","text-[var(--card-text)]","mb-1"],[1,"text-[var(--text-primary)]","font-medium"],[1,"text-[var(--text-primary)]"],[1,"text-[var(--text-primary)]","capitalize"],[1,"pt-6","border-t","border-[var(--border-color)]"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","text-sm"],[3,"title","active"],[1,"space-y-6","p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],[3,"label","value","unit","icon","trend"],[3,"label","value","icon"],[3,"label","value","unit","icon"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"bg-[var(--card-bg)]","rounded-[var(--radius-lg)]","shadow-[var(--shadow-sm)]","p-6"],[1,"flex","items-center","justify-center"],[3,"score","label"],[1,"text-center","mt-4"],[1,"flex","items-center","justify-center","mb-4"],[3,"level","score"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"text-[var(--card-text)]"],[1,"font-medium","text-[var(--text-primary)]"],[3,"events"]],template:function(e,r){e&1&&(n(0,"div",0),v(1,ae,1,1,"app-alert",1)(2,me,65,47)(3,ce,4,3,"div",2),i()),e&2&&(t(),d(r.errorMessage?1:-1),t(),d(r.staff?2:r.loading?3:-1))},dependencies:[C,R,N,j,_,W,F,I,E,O,H],encapsulation:2})};export{X as PharmacyStaffDetailComponent};
