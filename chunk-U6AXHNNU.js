import{a as W}from"./chunk-5ORS4DIM.js";import{a as R}from"./chunk-HZMAO6XJ.js";import{c as I,d as y,e as M,f as T,h as A,j as k,m as G,n as O,o as P,p as D,t as V,v as q}from"./chunk-NWB6AJFO.js";import{a as B}from"./chunk-7YIMD4Q6.js";import{a as j}from"./chunk-WY32ECM4.js";import{b as N,d as w}from"./chunk-VPFLKGZN.js";import"./chunk-CYRIZKVF.js";import{$a as a,Ea as C,Ja as s,Pa as d,R as m,Ra as h,Ua as c,Wb as x,Za as t,_a as e,cb as F,db as _,lb as r,nb as E,wa as o}from"./chunk-W6WRXJJ4.js";import"./chunk-7CGTOI24.js";function z(n,l){if(n&1&&a(0,"app-alert",1),n&2){let p=_();d("title",p.errorMessage)}}function H(n,l){n&1&&(t(0,"p",7),r(1,"Name is required"),e())}function J(n,l){n&1&&(t(0,"p",7),r(1,"Type is required"),e())}function K(n,l){n&1&&(t(0,"p",7),r(1,"Please enter a valid email"),e())}var U=class n{fb=m(V);router=m(w);route=m(N);suppliersService=m(W);supplierForm;loading=!1;errorMessage="";isEdit=!1;supplierId=null;ngOnInit(){this.supplierId=this.route.snapshot.paramMap.get("id"),this.isEdit=!!this.supplierId,this.supplierForm=this.fb.group({name:["",[y.required]],type:["",[y.required]],phone:[""],email:["",[y.email]],address:[""],status:["active"],notes:[""]}),this.isEdit&&this.supplierId&&this.loadSupplier()}loadSupplier(){this.suppliersService.getById(this.supplierId).subscribe({next:l=>{l&&this.supplierForm.patchValue(l)},error:()=>{this.errorMessage="Failed to load supplier data"}})}onSubmit(){this.supplierForm.valid?(this.loading=!0,this.errorMessage="",(this.isEdit?this.suppliersService.update(this.supplierId,this.supplierForm.value):this.suppliersService.create(this.supplierForm.value)).subscribe({next:()=>{this.router.navigate(["/suppliers"])},error:p=>{this.errorMessage=p.message||"An error occurred while saving the supplier",this.loading=!1}})):Object.keys(this.supplierForm.controls).forEach(l=>{this.supplierForm.get(l)?.markAsTouched()})}onCancel(){this.router.navigate(["/suppliers"])}static \u0275fac=function(p){return new(p||n)};static \u0275cmp=C({type:n,selectors:[["app-supplier-form"]],decls:54,vars:15,consts:[[3,"title"],["type","error",3,"title"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"text-red-500"],["type","text","formControlName","name",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#166534]"],[1,"mt-1","text-sm","text-red-600"],["formControlName","type",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#166534]"],["value",""],["value","manufacturer"],["value","warehouse"],["type","tel","formControlName","phone",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#166534]"],["type","email","formControlName","email",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#166534]"],[1,"md:col-span-2"],["type","text","formControlName","address",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#166534]"],["formControlName","status",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#166534]"],["value","active"],["value","inactive"],["formControlName","notes","rows","3",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#166534]"],[1,"flex","items-center","justify-end","gap-4","pt-6","border-t"],["type","button","variant","outline",3,"onClick"],["type","submit","variant","primary",3,"loading","disabled"]],template:function(p,i){if(p&1&&(t(0,"app-form-wrapper",0),s(1,z,1,1,"app-alert",1),t(2,"form",2),F("ngSubmit",function(){return i.onSubmit()}),t(3,"div",3)(4,"div")(5,"label",4),r(6," Name "),t(7,"span",5),r(8,"*"),e()(),a(9,"input",6),s(10,H,2,0,"p",7),e(),t(11,"div")(12,"label",4),r(13," Type "),t(14,"span",5),r(15,"*"),e()(),t(16,"select",8)(17,"option",9),r(18,"Select Type"),e(),t(19,"option",10),r(20,"Manufacturer"),e(),t(21,"option",11),r(22,"Warehouse"),e()(),s(23,J,2,0,"p",7),e(),t(24,"div")(25,"label",4),r(26,"Phone"),e(),a(27,"input",12),e(),t(28,"div")(29,"label",4),r(30,"Email"),e(),a(31,"input",13),s(32,K,2,0,"p",7),e(),t(33,"div",14)(34,"label",4),r(35,"Address"),e(),a(36,"input",15),e(),t(37,"div",14)(38,"label",4),r(39,"Status"),e(),t(40,"select",16)(41,"option",17),r(42,"Active"),e(),t(43,"option",18),r(44,"Inactive"),e()()(),t(45,"div",14)(46,"label",4),r(47,"Notes"),e(),a(48,"textarea",19),e()(),t(49,"div",20)(50,"app-button",21),F("onClick",function(){return i.onCancel()}),r(51," Cancel "),e(),t(52,"app-button",22),r(53),e()()()()),p&2){let u,f,g,v,S,b;d("title",i.isEdit?"Edit Supplier":"Add New Supplier"),o(),c(i.errorMessage?1:-1),o(),d("formGroup",i.supplierForm),o(7),h("border-red-500",((u=i.supplierForm.get("name"))==null?null:u.invalid)&&((u=i.supplierForm.get("name"))==null?null:u.touched)),o(),c((f=i.supplierForm.get("name"))!=null&&f.invalid&&((f=i.supplierForm.get("name"))!=null&&f.touched)?10:-1),o(6),h("border-red-500",((g=i.supplierForm.get("type"))==null?null:g.invalid)&&((g=i.supplierForm.get("type"))==null?null:g.touched)),o(7),c((v=i.supplierForm.get("type"))!=null&&v.invalid&&((v=i.supplierForm.get("type"))!=null&&v.touched)?23:-1),o(8),h("border-red-500",((S=i.supplierForm.get("email"))==null?null:S.invalid)&&((S=i.supplierForm.get("email"))==null?null:S.touched)),o(),c((b=i.supplierForm.get("email"))!=null&&b.invalid&&((b=i.supplierForm.get("email"))!=null&&b.touched)?32:-1),o(20),d("loading",i.loading)("disabled",i.supplierForm.invalid),o(),E(" ",i.isEdit?"Update":"Create"," Supplier ")}},dependencies:[x,q,A,P,D,I,O,M,T,k,G,R,B,j],encapsulation:2})};export{U as SupplierFormComponent};
