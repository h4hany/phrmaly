import{a as O}from"./chunk-FMYBUIAP.js";import{a as q}from"./chunk-6TIB4JPT.js";import{a as H}from"./chunk-P5TE6FOK.js";import{a as L}from"./chunk-N3GUYB4W.js";import{a as N}from"./chunk-YJWIIGXE.js";import{b as A,d as V}from"./chunk-QHH3SHC3.js";import{a as F}from"./chunk-KPWAPXFF.js";import{b as j}from"./chunk-7DC7YEPQ.js";import{$ as _,$a as i,$b as T,Bb as p,Cb as o,Ga as w,H as f,La as C,Ra as y,S as u,Wa as v,Y as b,Z as S,Za as k,_ as I,_a as D,ab as a,bb as h,db as M,eb as E,fb as m,j as x,nb as n,ob as r,pb as c,xa as t}from"./chunk-OKFD3A6M.js";import{a as B,b as P}from"./chunk-KAT7YFEL.js";var R=(d,l)=>l.id;function $(d,l){if(d&1&&h(0,"app-alert",1),d&2){let e=m();y("title",e.errorMessage)}}function z(d,l){if(d&1&&(i(0,"div")(1,"label",14),n(2),p(3,"translate"),a(),i(4,"p",16),n(5),p(6,"dateFormat"),a()()),d&2){let e=m(2);t(2),r(o(3,2,"purchase.dueDate")),t(3),r(o(6,4,e.purchase.dueDate))}}function J(d,l){if(d&1&&(i(0,"tr",25)(1,"td",31),n(2),a(),i(3,"td",31),n(4),a(),i(5,"td",31),n(6),a(),i(7,"td",32),n(8),a()()),d&2){let e=l.$implicit;t(2),r(e.drugName),t(2),r(e.quantity),t(2),r(e.unitCost),t(2),r(e.totalCost)}}function K(d,l){if(d&1){let e=M();i(0,"div",2)(1,"div",4)(2,"h1",5),n(3),p(4,"translate"),a(),i(5,"div",6)(6,"app-button",7),E("onClick",function(){b(e);let g=m();return S(g.editPurchase())}),I(),i(7,"svg",8),h(8,"path",9),a(),n(9),p(10,"translate"),a(),_(),i(11,"app-button",7),E("onClick",function(){b(e);let g=m();return S(g.goBack())}),I(),i(12,"svg",8),h(13,"path",10),a(),n(14),p(15,"translate"),a()()(),_(),i(16,"div",11)(17,"h2",12),n(18),p(19,"translate"),a(),i(20,"div",13)(21,"div")(22,"label",14),n(23),p(24,"translate"),a(),i(25,"p",15),n(26),a()(),i(27,"div")(28,"label",14),n(29),p(30,"translate"),a(),i(31,"p",16),n(32),a()(),i(33,"div")(34,"label",14),n(35),p(36,"translate"),a(),i(37,"p",16),n(38),p(39,"dateFormat"),a()(),C(40,z,7,6,"div"),i(41,"div")(42,"label",14),n(43),p(44,"translate"),a(),i(45,"app-badge",17),n(46),p(47,"translate"),a()(),i(48,"div")(49,"label",14),n(50),p(51,"translate"),a(),i(52,"p",16),n(53),p(54,"dateFormat"),a()()()(),i(55,"div",18)(56,"h2",12),n(57),p(58,"translate"),a(),i(59,"div",19)(60,"table",20)(61,"thead",21)(62,"tr")(63,"th",22),n(64),p(65,"translate"),a(),i(66,"th",22),n(67),p(68,"translate"),a(),i(69,"th",22),n(70),p(71,"translate"),a(),i(72,"th",23),n(73),p(74,"translate"),a()()(),i(75,"tbody",24),k(76,J,9,4,"tr",25,R),a()()()(),i(78,"div",26)(79,"div",27)(80,"div",28)(81,"div",29)(82,"span"),n(83),p(84,"translate"),a(),i(85,"span",15),n(86),a()(),i(87,"div",29)(88,"span"),n(89),p(90,"translate"),a(),i(91,"span",16),n(92),a()(),i(93,"div",30)(94,"span"),n(95),p(96,"translate"),a(),i(97,"span"),n(98),a()()()()()()}if(d&2){let e=m();t(3),r(o(4,27,"purchase.details")),t(6),c(" ",o(10,29,"common.edit")," "),t(5),c(" ",o(15,31,"common.back")," "),t(4),r(o(19,33,"purchase.purchaseInfo")),t(5),r(o(24,35,"purchase.invoiceNumber")),t(3),r(e.purchase.invoiceNumber),t(3),r(o(30,37,"purchase.supplier")),t(3),r((e.purchase.supplier==null?null:e.purchase.supplier.name)||"Supplier "+e.purchase.supplierId),t(3),r(o(36,39,"purchase.purchaseDate")),t(3),r(o(39,41,e.purchase.purchaseDate)),t(2),v(e.purchase.dueDate?40:-1),t(3),r(o(44,43,"purchase.paymentStatus")),t(2),y("variant",e.getPaymentStatusVariant(e.purchase.paymentStatus)),t(),c(" ",o(47,45,e.getPaymentStatusLabel(e.purchase.paymentStatus))," "),t(4),r(o(51,47,"invoice.createdAt")),t(3),r(o(54,49,e.purchase.createdAt)),t(4),r(o(58,51,"purchase.items")),t(7),r(o(65,53,"purchase.drugName")),t(3),r(o(68,55,"purchase.quantity")),t(3),r(o(71,57,"purchase.unitCost")),t(3),r(o(74,59,"purchase.totalCost")),t(3),D(e.purchase.items),t(7),c("",o(84,61,"purchase.totalAmount"),":"),t(3),r(e.purchase.totalAmount),t(3),c("",o(90,63,"purchase.paidAmount"),":"),t(3),r(e.purchase.paidAmount),t(3),c("",o(96,65,"purchase.remainingAmount"),":"),t(3),r(e.purchase.remainingAmount)}}function Q(d,l){d&1&&(i(0,"div",3)(1,"p",33),n(2),p(3,"translate"),a()()),d&2&&(t(2),r(o(3,1,"common.loading")))}var G=class d{route=u(A);router=u(V);purchasesService=u(q);suppliersService=u(O);purchase=null;loading=!0;errorMessage="";ngOnInit(){let l=this.route.snapshot.paramMap.get("id");l?this.loadPurchase(l):(this.errorMessage="Purchase ID is required",this.loading=!1)}loadPurchase(l){this.loading=!0,this.errorMessage="",this.purchasesService.getById(l).pipe(f(e=>e?e.supplierId?this.suppliersService.getById(e.supplierId).pipe(f(s=>x(P(B({},e),{supplier:s||void 0})))):x(e):x(null))).subscribe({next:e=>{this.purchase=e,this.loading=!1,e||(this.errorMessage="Purchase not found")},error:e=>{this.errorMessage="Failed to load purchase details",this.loading=!1,console.error("Error loading purchase:",e)}})}editPurchase(){this.purchase&&this.router.navigate(["/purchases",this.purchase.id,"edit"])}goBack(){this.router.navigate(["/purchases"])}getPaymentStatusVariant(l){return l==="paid"?"success":l==="partial"?"warning":"default"}getPaymentStatusLabel(l){return{pending:"purchase.pending",partial:"purchase.partial",paid:"purchase.paid"}[l]||l}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=w({type:d,selectors:[["app-purchase-detail"]],decls:4,vars:2,consts:[[1,"space-y-[var(--spacing-gap)]"],["type","error",3,"title"],[1,"bg-[var(--card-bg)]","rounded-[var(--radius-lg)]","shadow-[var(--shadow-sm)]","p-[var(--spacing-card)]"],[1,"text-center","py-12"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-[var(--text-primary)]"],[1,"flex","gap-3"],["variant","outline",3,"onClick"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"mb-6","pb-6","border-b","border-[var(--border-color)]"],[1,"text-lg","font-semibold","text-[var(--text-primary)]","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"block","text-sm","font-medium","text-[var(--card-text)]","mb-1"],[1,"text-[var(--text-primary)]","font-medium"],[1,"text-[var(--text-primary)]"],[3,"variant"],[1,"mb-6"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-[var(--border-color)]"],[1,"bg-[var(--page-bg)]"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-[var(--card-text)]","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-[var(--card-text)]","uppercase","tracking-wider"],[1,"bg-[var(--card-bg)]","divide-y","divide-[var(--border-color)]"],[1,"hover:bg-[var(--page-bg)]","transition-colors"],[1,"pt-6","border-t","border-[var(--border-color)]"],[1,"flex","justify-end"],[1,"w-full","max-w-md","space-y-3"],[1,"flex","justify-between","text-sm","text-[var(--card-text)]"],[1,"flex","justify-between","text-lg","font-bold","text-[var(--text-primary)]","pt-3","border-t","border-[var(--border-color)]"],[1,"px-6","py-4","text-sm","text-[var(--text-primary)]"],[1,"px-6","py-4","text-sm","text-[var(--text-primary)]","text-right","font-medium"],[1,"text-[var(--card-text)]"]],template:function(e,s){e&1&&(i(0,"div",0),C(1,$,1,1,"app-alert",1)(2,K,99,67,"div",2)(3,Q,4,3,"div",3),a()),e&2&&(t(),v(s.errorMessage?1:-1),t(),v(s.purchase?2:s.loading?3:-1))},dependencies:[T,N,F,L,H,j],encapsulation:2})};export{G as PurchaseDetailComponent};
