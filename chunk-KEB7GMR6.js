import{a as H}from"./chunk-DIWHAP2H.js";import{a as F}from"./chunk-N3GUYB4W.js";import{a as A}from"./chunk-YUKQXM5O.js";import"./chunk-M3W4QUEG.js";import"./chunk-BYXBJQAS.js";import{d as M}from"./chunk-QHH3SHC3.js";import{a as z}from"./chunk-GYQ2QOAA.js";import{a as V}from"./chunk-JEDHGX64.js";import"./chunk-ACQN7LQS.js";import{b as j}from"./chunk-7DC7YEPQ.js";import{$ as x,$a as e,$b as O,A as u,Bb as s,Cb as l,Ga as P,La as k,M as w,Ra as c,S as g,Ua as D,Wa as S,Xa as R,Y as _,Z as E,Za as f,_ as v,_a as y,ab as a,bb as m,db as B,eb as T,fb as b,j as h,nb as o,ob as d,pb as C,xa as t}from"./chunk-OKFD3A6M.js";import"./chunk-KAT7YFEL.js";var I=class r{pharmacyContextService=g(A);getKPIs(){return this.pharmacyContextService.getCurrentPharmacy()?.id?h([{label:"dashboard.kpi.totalRevenue",value:"45,230",trend:"+12.5%",trendPositive:!0,subtitle:"dashboard.kpi.thisMonth"},{label:"dashboard.kpi.activePatients",value:1248,trend:"+8.2%",trendPositive:!0,subtitle:"dashboard.kpi.last30Days"},{label:"dashboard.kpi.lowStockItems",value:23,trend:"-5",trendPositive:!0,subtitle:"dashboard.kpi.needsAttention"},{label:"dashboard.kpi.expiringSoon",value:12,trend:"+3",trendPositive:!1,subtitle:"dashboard.kpi.next30Days"}]).pipe(u(500)):h([]).pipe(u(300))}getRiskInsights(){return this.pharmacyContextService.getCurrentPharmacy()?.id?h([{type:"inventory",level:"high",title:"dashboard.risk.inventoryTitle",description:"dashboard.risk.inventoryDesc",count:23,actionRequired:!0},{type:"staff",level:"medium",title:"dashboard.risk.staffTitle",description:"dashboard.risk.staffDesc",count:2,actionRequired:!1},{type:"expiry",level:"medium",title:"dashboard.risk.expiryTitle",description:"dashboard.risk.expiryDesc",value:2450,actionRequired:!0},{type:"supplier",level:"low",title:"dashboard.risk.supplierTitle",description:"dashboard.risk.supplierDesc",count:3,actionRequired:!0}]).pipe(u(500)):h([]).pipe(u(300))}getAttentionItems(){return this.pharmacyContextService.getCurrentPharmacy()?.id?h(["dashboard.attention.reviewMovements","dashboard.attention.approveTransfer","dashboard.attention.updatePricing","dashboard.attention.followUpPayments"]).pipe(u(300)):h([]).pipe(u(300))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})};var K=(r,n)=>n.label,L=(r,n)=>n.id,W=(r,n)=>n.type;function Z(r,n){if(r&1&&(e(0,"li",35)(1,"span",36),o(2,"\u2022"),a(),e(3,"span"),o(4),s(5,"translate"),a()()),r&2){let i=n.$implicit;t(4),d(l(5,1,i))}}function U(r,n){if(r&1&&(e(0,"div",1)(1,"h3",33),o(2),s(3,"translate"),a(),e(4,"ul",34),f(5,Z,6,3,"li",35,R),a()()),r&2){let i=b();t(2),d(l(3,1,"dashboard.attention")),t(3),y(i.attentionItems)}}function Y(r,n){if(r&1&&(m(0,"app-stat-card",3),s(1,"translate"),s(2,"translate")),r&2){let i=n.$implicit;c("label",l(1,5,i.label))("value",i.value)("trend",i.trend)("trendPositive",i.trendPositive)("subtitle",l(2,7,i.subtitle))}}function J(r,n){if(r&1){let i=B();e(0,"button",44),T("click",function(){_(i);let $=b().$implicit,q=b(2);return E(q.handleRiskAction($))}),o(1),s(2,"translate"),a()}r&2&&(t(),C(" ",l(2,1,"dashboard.takeAction")," "))}function Q(r,n){if(r&1&&(e(0,"div",38)(1,"div",39)(2,"h4",40),o(3),s(4,"translate"),a(),m(5,"app-risk-badge",41),a(),e(6,"p",42),o(7),s(8,"translate"),a(),k(9,J,3,3,"button",43),a()),r&2){let i=n.$implicit,p=b(2);D(p.getRiskPanelStyles(i)),t(3),d(l(4,6,i.title)),t(2),c("level",i.level),t(2),d(l(8,8,i.description)),t(2),S(i.actionRequired?9:-1)}}function X(r,n){if(r&1&&(e(0,"div",2),f(1,Q,10,10,"div",37,W),a()),r&2){let i=b();t(),y(i.riskInsights)}}function ee(r,n){if(r&1&&(e(0,"tr",32)(1,"td",45),o(2),a(),e(3,"td",46),o(4),a(),e(5,"td",47),o(6),a(),e(7,"td",48)(8,"app-badge",49),o(9),a()(),e(10,"td",48)(11,"app-badge",49),o(12),a()(),e(13,"td",50)(14,"button",51),v(),e(15,"svg",52),m(16,"path",53),a()()()()),r&2){let i=n.$implicit;t(2),d(i.id),t(2),d(i.medicineName),t(2),d(i.price),t(2),c("variant",i.orderStatus==="Paid"?"success":"warning"),t(),C(" ",i.orderStatus," "),t(2),c("variant",i.paymentStatus==="Completed"?"success":i.paymentStatus==="Pending"?"warning":"default"),t(),C(" ",i.paymentStatus," ")}}var N=class r{insightsEngine=g(I);router=g(M);kpis=[];riskInsights=[];attentionItems=[];revenueChartData;revenueChartOptions;ordersChartData;ordersChartOptions;recentOrders=[{id:"#ORD576",medicineName:"Paracetamol (2), Ibuprofen (1)",price:"25.50",orderStatus:"Paid",paymentStatus:"Completed"},{id:"#ORD575",medicineName:"Amoxicillin (3), Cetirizine (2)",price:"42.00",orderStatus:"Pending",paymentStatus:"In progress"},{id:"#ORD574",medicineName:"Loratadine (1), Omeprazole (1)",price:"15.00",orderStatus:"Paid",paymentStatus:"Pending"},{id:"#ORD573",medicineName:"Aspirin (4), Hydrocodone (1)",price:"48.00",orderStatus:"Paid",paymentStatus:"Completed"}];ngOnInit(){this.initRevenueChart(),this.initOrdersChart(),this.loadInsights()}loadInsights(){this.insightsEngine.getKPIs().subscribe(n=>{this.kpis=n}),this.insightsEngine.getRiskInsights().subscribe(n=>{this.riskInsights=n}),this.insightsEngine.getAttentionItems().subscribe(n=>{this.attentionItems=n})}getRiskPanelStyles(n){let i={low:"background-color: #dbeafe; border: 1px solid #3b82f6;",medium:"background-color: #fef3c7; border: 1px solid #f59e0b;",high:"background-color: #fee2e2; border: 1px solid #ef4444;",critical:"background-color: #fee2e2; border: 2px solid #dc2626;"};return i[n.level]||i.medium}handleRiskAction(n){n.type==="inventory"?this.router.navigate(["/inventory/movements/risk"]):n.type==="staff"?this.router.navigate(["/pharmacy-staff"]):n.type==="expiry"?this.router.navigate(["/inventory/alerts"]):n.type==="supplier"&&this.router.navigate(["/suppliers"])}initRevenueChart(){this.revenueChartData={labels:["01","02","03","04","05","06","07","08","09","10","11","12","13"],datasets:[{label:"Revenue",data:[12e3,19e3,15e3,25e3,22e3,3e4,18657,28e3,24e3,26e3,3e4,32e3,28e3],backgroundColor:"#166534",borderRadius:4}]},this.revenueChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(n){return n/1e3+"k"}},grid:{color:"#f3f4f6"}},x:{grid:{display:!1}}}}}initOrdersChart(){this.ordersChartData={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Orders",data:[65,59,80,81,56,55,40],borderColor:"#84cc16",backgroundColor:"rgba(132, 204, 22, 0.1)",fill:!0,tension:.4}]},this.ordersChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"#f3f4f6"}},x:{grid:{display:!1}}}}}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=P({type:r,selectors:[["app-dashboard"]],decls:88,vars:58,consts:[[1,"space-y-6"],[1,"p-6","rounded-lg","border-2",2,"background-color","var(--card-bg)","border-color","#f59e0b"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[3,"label","value","trend","trendPositive","subtitle"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6",2,"display","none"],["label","Total Revenue","value","112,200","trend","+2% Since last week",3,"trendPositive","highlighted"],["icon","",1,"w-8","h-8","bg-white/20","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["label","Total Profit","value","12,500","trend","+8% Since last week",3,"trendPositive"],["icon","",1,"w-8","h-8","bg-[#166534]/10","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-[#166534]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],["label","Total Cost","value","48,200","trend","+0.2% Since last week",3,"trendPositive"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"],["label","Average Order Value","value","96.50","trend","+5% Since last week",3,"trendPositive"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"px-3","py-1.5","border","border-gray-300","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-[#166534]"],[2,"height","300px"],[3,"type","data","options"],[1,"bg-white","rounded-lg","shadow"],[1,"px-6","py-4","border-b","border-gray-200","flex","items-center","justify-between"],["href","#",1,"text-sm","text-[#166534]","hover:underline"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"text-lg","font-semibold","mb-4",2,"color","var(--card-text)"],[1,"space-y-2"],[1,"flex","items-start","gap-2","text-sm",2,"color","var(--card-text)"],[1,"text-amber-500","mt-0.5"],[1,"p-4","rounded-lg",3,"style"],[1,"p-4","rounded-lg"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-semibold","text-sm"],[3,"level"],[1,"text-xs","mb-2",2,"opacity","0.8"],[1,"text-xs","font-medium","underline"],[1,"text-xs","font-medium","underline",3,"click"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","text-sm","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap"],[3,"variant"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"hover:text-gray-900"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"]],template:function(i,p){i&1&&(e(0,"div",0),k(1,U,7,3,"div",1),e(2,"div",2),f(3,Y,3,9,"app-stat-card",3,K),a(),k(5,X,3,0,"div",2),e(6,"div",4)(7,"app-stat-card",5)(8,"div",6),v(),e(9,"svg",7),m(10,"path",8),a()()(),x(),e(11,"app-stat-card",9)(12,"div",10),v(),e(13,"svg",11),m(14,"path",12),a()()(),x(),e(15,"app-stat-card",13)(16,"div",10),v(),e(17,"svg",11),m(18,"path",14),a()()(),x(),e(19,"app-stat-card",15)(20,"div",10),v(),e(21,"svg",11),m(22,"path",16),a()()()(),x(),e(23,"div",17)(24,"div",18)(25,"div",19)(26,"h3",20),o(27),s(28,"translate"),a(),e(29,"select",21)(30,"option"),o(31),s(32,"translate"),a(),e(33,"option"),o(34),s(35,"translate"),a(),e(36,"option"),o(37),s(38,"translate"),a()()(),e(39,"div",22),m(40,"app-chart",23),a()(),e(41,"div",18)(42,"div",19)(43,"h3",20),o(44),s(45,"translate"),a(),e(46,"select",21)(47,"option"),o(48),s(49,"translate"),a(),e(50,"option"),o(51),s(52,"translate"),a()()(),e(53,"div",22),m(54,"app-chart",23),a()()(),e(55,"div",24)(56,"div",25)(57,"h3",20),o(58),s(59,"translate"),a(),e(60,"a",26),o(61),s(62,"translate"),a()(),e(63,"div",27)(64,"table",28)(65,"thead",29)(66,"tr")(67,"th",30),o(68),s(69,"translate"),a(),e(70,"th",30),o(71),s(72,"translate"),a(),e(73,"th",30),o(74),s(75,"translate"),a(),e(76,"th",30),o(77),s(78,"translate"),a(),e(79,"th",30),o(80),s(81,"translate"),a(),e(82,"th",30),o(83),s(84,"translate"),a()()(),e(85,"tbody",31),f(86,ee,17,7,"tr",32,L),a()()()()()),i&2&&(t(),S(p.attentionItems.length>0?1:-1),t(2),y(p.kpis),t(2),S(p.riskInsights.length>0?5:-1),t(2),c("trendPositive",!0)("highlighted",!0),t(4),c("trendPositive",!0),t(4),c("trendPositive",!1),t(4),c("trendPositive",!0),t(8),d(l(28,28,"dashboard.chart.revenue")),t(4),d(l(32,30,"dashboard.chart.thisMonth")),t(3),d(l(35,32,"dashboard.chart.lastMonth")),t(3),d(l(38,34,"dashboard.chart.thisYear")),t(3),c("type","bar")("data",p.revenueChartData)("options",p.revenueChartOptions),t(4),d(l(45,36,"dashboard.chart.orders")),t(4),d(l(49,38,"dashboard.chart.thisWeek")),t(3),d(l(52,40,"dashboard.chart.thisMonth")),t(3),c("type","line")("data",p.ordersChartData)("options",p.ordersChartOptions),t(4),d(l(59,42,"dashboard.recentOrders")),t(3),d(l(62,44,"dashboard.viewAll")),t(7),d(l(69,46,"dashboard.table.orderId")),t(3),d(l(72,48,"dashboard.table.medicineName")),t(3),d(l(75,50,"dashboard.table.price")),t(3),d(l(78,52,"dashboard.table.orderStatus")),t(3),d(l(81,54,"dashboard.table.paymentStatus")),t(3),d(l(84,56,"dashboard.table.action")),t(3),y(p.recentOrders))},dependencies:[O,V,z,F,H,j],encapsulation:2})};export{N as DashboardComponent};
