import{a as G}from"./chunk-RUB32D7W.js";import{a as O}from"./chunk-JN6H6GOR.js";import{a as H}from"./chunk-XG6FMBJJ.js";import{a as q}from"./chunk-6CFKC637.js";import{a as F}from"./chunk-5PFWNSG3.js";import{b as L}from"./chunk-3UJCRMW3.js";import{b as j,d as N}from"./chunk-C3O3TVFX.js";import{$a as a,Ab as p,Bb as l,Cb as g,F as b,Fa as D,Ka as y,Q as u,Qa as E,Va as v,W as S,X as I,Xb as A,Y as _,Ya as k,Z as C,Za as M,_a as i,_b as V,ab as h,cb as T,db as B,eb as m,i as x,mb as n,nb as r,ob as c,wa as t}from"./chunk-E4S7NVXB.js";import{a as P,b as w}from"./chunk-C6Q5SG76.js";var $=(d,o)=>o.id;function z(d,o){if(d&1&&h(0,"app-alert",1),d&2){let e=m();E("title",e.errorMessage)}}function J(d,o){if(d&1&&(i(0,"div")(1,"label",14),n(2),p(3,"translate"),a(),i(4,"p",16),n(5),p(6,"date"),a()()),d&2){let e=m(2);t(2),r(l(3,2,"purchase.dueDate")),t(3),r(g(6,4,e.purchase.dueDate,"mediumDate"))}}function K(d,o){if(d&1&&(i(0,"tr",25)(1,"td",31),n(2),a(),i(3,"td",31),n(4),a(),i(5,"td",31),n(6),a(),i(7,"td",32),n(8),a()()),d&2){let e=o.$implicit;t(2),r(e.drugName),t(2),r(e.quantity),t(2),r(e.unitCost),t(2),r(e.totalCost)}}function Q(d,o){if(d&1){let e=T();i(0,"div",2)(1,"div",4)(2,"h1",5),n(3),p(4,"translate"),a(),i(5,"div",6)(6,"app-button",7),B("onClick",function(){S(e);let f=m();return I(f.editPurchase())}),_(),i(7,"svg",8),h(8,"path",9),a(),n(9),p(10,"translate"),a(),C(),i(11,"app-button",7),B("onClick",function(){S(e);let f=m();return I(f.goBack())}),_(),i(12,"svg",8),h(13,"path",10),a(),n(14),p(15,"translate"),a()()(),C(),i(16,"div",11)(17,"h2",12),n(18),p(19,"translate"),a(),i(20,"div",13)(21,"div")(22,"label",14),n(23),p(24,"translate"),a(),i(25,"p",15),n(26),a()(),i(27,"div")(28,"label",14),n(29),p(30,"translate"),a(),i(31,"p",16),n(32),a()(),i(33,"div")(34,"label",14),n(35),p(36,"translate"),a(),i(37,"p",16),n(38),p(39,"date"),a()(),y(40,J,7,7,"div"),i(41,"div")(42,"label",14),n(43),p(44,"translate"),a(),i(45,"app-badge",17),n(46),p(47,"translate"),a()(),i(48,"div")(49,"label",14),n(50),p(51,"translate"),a(),i(52,"p",16),n(53),p(54,"date"),a()()()(),i(55,"div",18)(56,"h2",12),n(57),p(58,"translate"),a(),i(59,"div",19)(60,"table",20)(61,"thead",21)(62,"tr")(63,"th",22),n(64),p(65,"translate"),a(),i(66,"th",22),n(67),p(68,"translate"),a(),i(69,"th",22),n(70),p(71,"translate"),a(),i(72,"th",23),n(73),p(74,"translate"),a()()(),i(75,"tbody",24),k(76,K,9,4,"tr",25,$),a()()()(),i(78,"div",26)(79,"div",27)(80,"div",28)(81,"div",29)(82,"span"),n(83),p(84,"translate"),a(),i(85,"span",15),n(86),a()(),i(87,"div",29)(88,"span"),n(89),p(90,"translate"),a(),i(91,"span",16),n(92),a()(),i(93,"div",30)(94,"span"),n(95),p(96,"translate"),a(),i(97,"span"),n(98),a()()()()()()}if(d&2){let e=m();t(3),r(l(4,27,"purchase.details")),t(6),c(" ",l(10,29,"common.edit")," "),t(5),c(" ",l(15,31,"common.back")," "),t(4),r(l(19,33,"purchase.purchaseInfo")),t(5),r(l(24,35,"purchase.invoiceNumber")),t(3),r(e.purchase.invoiceNumber),t(3),r(l(30,37,"purchase.supplier")),t(3),r((e.purchase.supplier==null?null:e.purchase.supplier.name)||"Supplier "+e.purchase.supplierId),t(3),r(l(36,39,"purchase.purchaseDate")),t(3),r(g(39,41,e.purchase.purchaseDate,"mediumDate")),t(2),v(e.purchase.dueDate?40:-1),t(3),r(l(44,44,"purchase.paymentStatus")),t(2),E("variant",e.getPaymentStatusVariant(e.purchase.paymentStatus)),t(),c(" ",l(47,46,e.getPaymentStatusLabel(e.purchase.paymentStatus))," "),t(4),r(l(51,48,"invoice.createdAt")),t(3),r(g(54,50,e.purchase.createdAt,"medium")),t(4),r(l(58,53,"purchase.items")),t(7),r(l(65,55,"purchase.drugName")),t(3),r(l(68,57,"purchase.quantity")),t(3),r(l(71,59,"purchase.unitCost")),t(3),r(l(74,61,"purchase.totalCost")),t(3),M(e.purchase.items),t(7),c("",l(84,63,"purchase.totalAmount"),":"),t(3),r(e.purchase.totalAmount),t(3),c("",l(90,65,"purchase.paidAmount"),":"),t(3),r(e.purchase.paidAmount),t(3),c("",l(96,67,"purchase.remainingAmount"),":"),t(3),r(e.purchase.remainingAmount)}}function U(d,o){d&1&&(i(0,"div",3)(1,"p",33),n(2),p(3,"translate"),a()()),d&2&&(t(2),r(l(3,1,"common.loading")))}var R=class d{route=u(j);router=u(N);purchasesService=u(O);suppliersService=u(G);purchase=null;loading=!0;errorMessage="";ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o?this.loadPurchase(o):(this.errorMessage="Purchase ID is required",this.loading=!1)}loadPurchase(o){this.loading=!0,this.errorMessage="",this.purchasesService.getById(o).pipe(b(e=>e?e.supplierId?this.suppliersService.getById(e.supplierId).pipe(b(s=>x(w(P({},e),{supplier:s||void 0})))):x(e):x(null))).subscribe({next:e=>{this.purchase=e,this.loading=!1,e||(this.errorMessage="Purchase not found")},error:e=>{this.errorMessage="Failed to load purchase details",this.loading=!1,console.error("Error loading purchase:",e)}})}editPurchase(){this.purchase&&this.router.navigate(["/purchases",this.purchase.id,"edit"])}goBack(){this.router.navigate(["/purchases"])}getPaymentStatusVariant(o){return o==="paid"?"success":o==="partial"?"warning":"default"}getPaymentStatusLabel(o){return{pending:"purchase.pending",partial:"purchase.partial",paid:"purchase.paid"}[o]||o}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=D({type:d,selectors:[["app-purchase-detail"]],decls:4,vars:2,consts:[[1,"space-y-[var(--spacing-gap)]"],["type","error",3,"title"],[1,"bg-[var(--card-bg)]","rounded-[var(--radius-lg)]","shadow-[var(--shadow-sm)]","p-[var(--spacing-card)]"],[1,"text-center","py-12"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-[var(--text-primary)]"],[1,"flex","gap-3"],["variant","outline",3,"onClick"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"mb-6","pb-6","border-b","border-[var(--border-color)]"],[1,"text-lg","font-semibold","text-[var(--text-primary)]","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"block","text-sm","font-medium","text-[var(--card-text)]","mb-1"],[1,"text-[var(--text-primary)]","font-medium"],[1,"text-[var(--text-primary)]"],[3,"variant"],[1,"mb-6"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-[var(--border-color)]"],[1,"bg-[var(--page-bg)]"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-[var(--card-text)]","uppercase","tracking-wider"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-[var(--card-text)]","uppercase","tracking-wider"],[1,"bg-[var(--card-bg)]","divide-y","divide-[var(--border-color)]"],[1,"hover:bg-[var(--page-bg)]","transition-colors"],[1,"pt-6","border-t","border-[var(--border-color)]"],[1,"flex","justify-end"],[1,"w-full","max-w-md","space-y-3"],[1,"flex","justify-between","text-sm","text-[var(--card-text)]"],[1,"flex","justify-between","text-lg","font-bold","text-[var(--text-primary)]","pt-3","border-t","border-[var(--border-color)]"],[1,"px-6","py-4","text-sm","text-[var(--text-primary)]"],[1,"px-6","py-4","text-sm","text-[var(--text-primary)]","text-right","font-medium"],[1,"text-[var(--card-text)]"]],template:function(e,s){e&1&&(i(0,"div",0),y(1,z,1,1,"app-alert",1)(2,Q,99,69,"div",2)(3,U,4,3,"div",3),a()),e&2&&(t(),v(s.errorMessage?1:-1),t(),v(s.purchase?2:s.loading?3:-1))},dependencies:[V,A,q,H,F,L],encapsulation:2})};export{R as PurchaseDetailComponent};
