import{K as p,i as n,y as o}from"./chunk-ILVQMZIM.js";import{a as r,b as d}from"./chunk-7CGTOI24.js";var v=class s{invoices=[{id:"INV001",invoiceNumber:"SALES-2024-001",patientId:"PAT001",items:[{id:"1",drugId:"PDRG001",drugName:"Paracetamol 500mg",quantity:2,unitPrice:5.5,totalPrice:11}],subtotal:11,discount:0,total:11,paymentStatus:"paid",paymentMethod:"cash",pharmacyId:"ph1",createdAt:new Date("2024-11-27"),updatedAt:new Date("2024-11-27")}];getAll(i){let e=i?.page||1,t=i?.pageSize||10,a=(e-1)*t,l=a+t,c=[...this.invoices],u=c.slice(a,l);return n({data:u,total:c.length,page:e,pageSize:t,totalPages:Math.ceil(c.length/t)}).pipe(o(500))}getById(i){let e=this.invoices.find(t=>t.id===i);return n(e||null).pipe(o(300))}create(i){let e=d(r({},i),{id:`INV${String(this.invoices.length+1).padStart(3,"0")}`,invoiceNumber:`SALES-2024-${String(this.invoices.length+1).padStart(3,"0")}`,createdAt:new Date,updatedAt:new Date});return this.invoices.push(e),n(e).pipe(o(500))}update(i,e){let t=this.invoices.findIndex(a=>a.id===i);if(t===-1)throw new Error("Invoice not found");return this.invoices[t]=d(r(r({},this.invoices[t]),e),{id:i,updatedAt:new Date}),n(this.invoices[t]).pipe(o(500))}delete(i){let e=this.invoices.findIndex(t=>t.id===i);return e===-1?n(!1).pipe(o(300)):(this.invoices.splice(e,1),n(!0).pipe(o(500)))}search(i){let e=i.toLowerCase();return n(this.invoices.filter(t=>t.invoiceNumber.toLowerCase().includes(e)||t.patientId.toLowerCase().includes(e))).pipe(o(300))}static \u0275fac=function(e){return new(e||s)};static \u0275prov=p({token:s,factory:s.\u0275fac,providedIn:"root"})};export{v as a};
