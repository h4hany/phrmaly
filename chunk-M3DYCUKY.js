import{a as me,b as ue}from"./chunk-PPX5YYRY.js";import{a as pe}from"./chunk-JYPY3KCN.js";import{c as X,d as F,e as Z,f as ee,h as te,k as ie,n as ne,o as re,p as ae,q as se,v as oe,x as le}from"./chunk-TK76J465.js";import{a as ce}from"./chunk-6CFKC637.js";import{a as de}from"./chunk-5PFWNSG3.js";import{b as K}from"./chunk-3UJCRMW3.js";import{e as J}from"./chunk-C3O3TVFX.js";import{$a as i,Ab as h,Bb as V,Cb as O,Fa as b,K as Q,Ka as T,Q as G,Qa as d,Sa as A,Va as y,W as k,Wa as R,X as x,Xb as U,Y as L,Ya as _,Z as H,Za as I,_a as t,_b as S,ab as u,cb as D,db as w,eb as m,i as f,ib as $,ja as p,jb as W,kb as Y,lb as z,mb as r,nb as l,ob as N,wa as s,y as v}from"./chunk-E4S7NVXB.js";import{a as E,b as M}from"./chunk-C6Q5SG76.js";var q=class a{tickets=[{id:"T001",subject:"Unable to add new drug",description:"I am having trouble adding a new drug to the system. The form keeps showing an error.",screen:"/drugs/new",status:"open",priority:"high",createdAt:new Date("2024-12-01"),updatedAt:new Date("2024-12-01"),userId:"1"},{id:"T002",subject:"Invoice printing issue",description:"The invoice is not printing correctly. The layout seems broken.",screen:"/invoices",status:"in_progress",priority:"medium",createdAt:new Date("2024-11-28"),updatedAt:new Date("2024-11-30"),userId:"1"},{id:"T003",subject:"Report generation slow",description:"The reports page takes too long to load. It seems to be stuck.",screen:"/reports",status:"resolved",priority:"low",createdAt:new Date("2024-11-25"),updatedAt:new Date("2024-11-27"),userId:"1"}];messages=[{id:"M001",ticketId:"T001",message:"I am having trouble adding a new drug to the system. The form keeps showing an error.",isFromSupport:!1,createdAt:new Date("2024-12-01T10:00:00")},{id:"M002",ticketId:"T001",message:"Thank you for reporting this issue. We are looking into it and will get back to you soon.",isFromSupport:!0,createdAt:new Date("2024-12-01T11:30:00")},{id:"M003",ticketId:"T002",message:"The invoice is not printing correctly. The layout seems broken.",isFromSupport:!1,createdAt:new Date("2024-11-28T09:00:00")},{id:"M004",ticketId:"T002",message:"We have identified the issue and are working on a fix. This should be resolved in the next update.",isFromSupport:!0,createdAt:new Date("2024-11-29T14:00:00")}];getAll(){return f([...this.tickets]).pipe(v(300))}getById(n){let e=this.tickets.find(o=>o.id===n);return f(e||null).pipe(v(200))}create(n){let e=M(E({},n),{id:`T${String(this.tickets.length+1).padStart(3,"0")}`,createdAt:new Date,updatedAt:new Date});this.tickets.unshift(e);let o={id:`M${String(this.messages.length+1).padStart(3,"0")}`,ticketId:e.id,message:n.description,isFromSupport:!1,createdAt:new Date};return this.messages.push(o),f(e).pipe(v(500))}getMessages(n){let e=this.messages.filter(o=>o.ticketId===n);return f(e).pipe(v(200))}addMessage(n,e,o=!1){let c={id:`M${String(this.messages.length+1).padStart(3,"0")}`,ticketId:n,message:e,isFromSupport:o,createdAt:new Date};this.messages.push(c);let g=this.tickets.find(C=>C.id===n);return g&&(g.updatedAt=new Date),f(c).pipe(v(300))}updateStatus(n,e){let o=this.tickets.find(c=>c.id===n);return o&&(o.status=e,o.updatedAt=new Date),f(o).pipe(v(200))}static \u0275fac=function(e){return new(e||a)};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var he=["createModal"],fe=(a,n)=>n.id;function ke(a,n){a&1&&(t(0,"div",8),r(1,"Loading tickets..."),i())}function xe(a,n){a&1&&(t(0,"div",8),r(1,"No tickets yet. Create your first ticket!"),i())}function be(a,n){if(a&1){let e=D();t(0,"div",36),w("click",function(){let c=k(e).$implicit,g=m(2);return x(g.selectTicket(c.id))}),t(1,"div",37)(2,"h3",38),r(3),i(),t(4,"app-badge",39),r(5),i()(),t(6,"p",40),r(7),i(),t(8,"div",41)(9,"span"),r(10),i(),t(11,"span"),r(12),h(13,"date"),i()()()}if(a&2){let e=n.$implicit,o=m(2);A("bg-blue-50",o.selectedTicketId()===e.id)("bg-white",o.selectedTicketId()!==e.id),s(3),l(e.subject),s(),d("variant",o.getStatusVariant(e.status)),s(),l(e.status),s(2),l(e.description),s(3),l(e.screen),s(2),l(O(13,10,e.updatedAt,"short"))}}function Te(a,n){if(a&1&&(t(0,"div",9),_(1,be,14,13,"div",35,fe),i()),a&2){let e=m();s(),I(e.tickets())}}function ye(a,n){if(a&1&&(t(0,"div",50)(1,"div",51)(2,"p",52),r(3),i(),t(4,"p",53),r(5),h(6,"date"),i()()()),a&2){let e=n.$implicit;A("flex-row-reverse",e.isFromSupport),s(),A("bg-blue-50",e.isFromSupport)("bg-gray-100",!e.isFromSupport),s(2),l(e.message),s(2),l(O(6,8,e.createdAt,"short"))}}function we(a,n){if(a&1){let e=D();t(0,"div",10)(1,"div",3)(2,"div",37)(3,"div")(4,"h2",42),r(5),i(),t(6,"p",43),r(7),i()(),t(8,"app-badge",39),r(9),i()()(),t(10,"div",44),_(11,ye,7,11,"div",45,fe),i(),t(13,"div",46)(14,"form",47),w("ngSubmit",function(){k(e);let c=m();return x(c.sendMessage())}),u(15,"input",48),t(16,"app-button",49),r(17," Send "),i()()()()}if(a&2){let e=m();s(5),l(e.selectedTicket().subject),s(2),l(e.selectedTicket().screen),s(),d("variant",e.getStatusVariant(e.selectedTicket().status)),s(),N(" ",e.selectedTicket().status," "),s(2),I(e.messages()),s(3),d("formGroup",e.messageForm),s(2),d("disabled",e.messageForm.invalid||e.sending())}}function Se(a,n){a&1&&(t(0,"div",11),r(1," Select a ticket to view details "),i())}function Ce(a,n){if(a&1&&(t(0,"p",34),r(1),i()),a&2){let e=m();s(),l(e.selectedFile().name)}}var P=class a{ticketsService=G(q);fb=G(oe);tickets=p([]);selectedTicketId=p(null);selectedTicket=p(null);messages=p([]);loading=!1;sending=p(!1);creating=p(!1);selectedFile=p(null);ticketForm;messageForm;createModal;ngOnInit(){this.ticketForm=this.fb.group({subject:["",F.required],screen:["",F.required],description:["",F.required]}),this.messageForm=this.fb.group({message:["",F.required]}),this.loadTickets()}loadTickets(){this.loading=!0,this.ticketsService.getAll().subscribe({next:n=>{this.tickets.set(n),this.loading=!1,n.length>0&&!this.selectedTicketId()&&this.selectTicket(n[0].id)},error:()=>{this.loading=!1}})}selectTicket(n){this.selectedTicketId.set(n),this.ticketsService.getById(n).subscribe({next:e=>{e&&(this.selectedTicket.set(e),this.loadMessages(n))}})}loadMessages(n){this.ticketsService.getMessages(n).subscribe({next:e=>{this.messages.set(e)}})}createTicket(){if(this.ticketForm.valid){this.creating.set(!0);let n=M(E({},this.ticketForm.value),{status:"open",priority:"medium",userId:"1"});this.ticketsService.create(n).subscribe({next:e=>{this.loadTickets(),this.selectTicket(e.id),this.ticketForm.reset(),this.selectedFile.set(null),this.createModal.close(),this.creating.set(!1)},error:()=>{this.creating.set(!1)}})}}sendMessage(){this.messageForm.valid&&this.selectedTicketId()&&(this.sending.set(!0),this.ticketsService.addMessage(this.selectedTicketId(),this.messageForm.value.message).subscribe({next:()=>{this.messageForm.reset(),this.loadMessages(this.selectedTicketId()),this.sending.set(!1)},error:()=>{this.sending.set(!1)}}))}onFileSelected(n){let e=n.target;e.files&&e.files[0]&&this.selectedFile.set(e.files[0])}getStatusVariant(n){return{open:"danger",in_progress:"warning",resolved:"success",closed:"default"}[n]||"default"}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=b({type:a,selectors:[["app-tickets"]],viewQuery:function(e,o){if(e&1&&$(he,5),e&2){let c;W(c=Y())&&(o.createModal=c.first)}},decls:68,vars:8,consts:[["createModal",""],[1,"flex","h-[calc(100vh-300px)]","gap-4"],[1,"w-1/3","border-r","border-gray-200","flex","flex-col"],[1,"p-4","border-b","border-gray-200"],["variant","primary",3,"onClick","fullWidth"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"flex-1","overflow-y-auto"],[1,"p-4","text-center","text-gray-500"],[1,"divide-y","divide-gray-200"],[1,"flex-1","flex","flex-col"],[1,"flex-1","flex","items-center","justify-center","text-gray-500"],["title","Create New Ticket",3,"confirmed","showFooter","confirmText","confirmLoading"],[1,"space-y-4",3,"formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"text-red-500"],["type","text","formControlName","subject",1,"w-full","px-4","py-2","border","border-gray-300","rounded-[var(--radius-md)]","focus:outline-none","focus:ring-2","focus:ring-[var(--primary-bg)]"],["formControlName","screen",1,"w-full","px-4","py-2","border","border-gray-300","rounded-[var(--radius-md)]","focus:outline-none","focus:ring-2","focus:ring-[var(--primary-bg)]"],["value",""],["value","/dashboard"],["value","/drugs"],["value","/drugs/new"],["value","/patients"],["value","/invoices"],["value","/purchases"],["value","/suppliers"],["value","/payments"],["value","/bundles"],["value","/inventory/alerts"],["value","/pharmacy-staff"],["value","/settings"],["value","/reports"],["formControlName","description","rows","5","placeholder","Describe the issue you're facing...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-[var(--radius-md)]","focus:outline-none","focus:ring-2","focus:ring-[var(--primary-bg)]"],["type","file","accept","image/*",1,"w-full","px-4","py-2","border","border-gray-300","rounded-[var(--radius-md)]","focus:outline-none","focus:ring-2","focus:ring-[var(--primary-bg)]",3,"change"],[1,"mt-1","text-sm","text-gray-600"],[1,"p-4","cursor-pointer","hover:bg-gray-50","transition-colors",3,"bg-blue-50","bg-white"],[1,"p-4","cursor-pointer","hover:bg-gray-50","transition-colors",3,"click"],[1,"flex","items-start","justify-between","mb-2"],[1,"font-semibold","text-gray-900","text-sm"],[3,"variant"],[1,"text-xs","text-gray-500","mb-2","line-clamp-2"],[1,"flex","items-center","justify-between","text-xs","text-gray-400"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex-1","overflow-y-auto","p-4","space-y-4"],[1,"flex","gap-3",3,"flex-row-reverse"],[1,"p-4","border-t","border-gray-200"],[1,"flex","gap-2",3,"ngSubmit","formGroup"],["type","text","formControlName","message","placeholder","Type your message...",1,"flex-1","px-4","py-2","border","border-gray-300","rounded-[var(--radius-md)]","focus:outline-none","focus:ring-2","focus:ring-[var(--primary-bg)]"],["type","submit","variant","primary",3,"disabled"],[1,"flex","gap-3"],[1,"max-w-[70%]","rounded-lg","p-3"],[1,"text-sm","text-gray-900"],[1,"text-xs","text-gray-500","mt-1"]],template:function(e,o){if(e&1){let c=D();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-button",4),w("onClick",function(){k(c);let C=z(15);return x(C.open())}),L(),t(4,"svg",5),u(5,"path",6),i(),r(6," Create New Ticket "),i()(),H(),t(7,"div",7),T(8,ke,2,0,"div",8)(9,xe,2,0,"div",8)(10,Te,3,0,"div",9),i()(),t(11,"div",10),T(12,we,18,6,"div",10)(13,Se,2,0,"div",11),i()(),t(14,"app-modal",12,0),w("confirmed",function(){return k(c),x(o.createTicket())}),t(16,"form",13)(17,"div")(18,"label",14),r(19," Subject "),t(20,"span",15),r(21,"*"),i()(),u(22,"input",16),i(),t(23,"div")(24,"label",14),r(25," Screen/Page "),t(26,"span",15),r(27,"*"),i()(),t(28,"select",17)(29,"option",18),r(30,"Select Screen"),i(),t(31,"option",19),r(32,"Dashboard"),i(),t(33,"option",20),r(34,"Drugs"),i(),t(35,"option",21),r(36,"Add Drug"),i(),t(37,"option",22),r(38,"Patients"),i(),t(39,"option",23),r(40,"Invoices"),i(),t(41,"option",24),r(42,"Purchases"),i(),t(43,"option",25),r(44,"Suppliers"),i(),t(45,"option",26),r(46,"Payments"),i(),t(47,"option",27),r(48,"Bundles"),i(),t(49,"option",28),r(50,"Inventory Alerts"),i(),t(51,"option",29),r(52,"Pharmacy Staff"),i(),t(53,"option",30),r(54,"Settings"),i(),t(55,"option",31),r(56,"Reports"),i()()(),t(57,"div")(58,"label",14),r(59," Description "),t(60,"span",15),r(61,"*"),i()(),u(62,"textarea",32),i(),t(63,"div")(64,"label",14),r(65," Screenshot (Optional) "),i(),t(66,"input",33),w("change",function(C){return k(c),x(o.onFileSelected(C))}),i(),T(67,Ce,2,1,"p",34),i()()()}e&2&&(s(3),d("fullWidth",!0),s(5),y(o.loading?8:o.tickets().length===0?9:10),s(4),y(o.selectedTicket()?12:13),s(2),d("showFooter",!0)("confirmText","Create Ticket")("confirmLoading",o.creating()),s(2),d("formGroup",o.ticketForm),s(51),y(o.selectedFile()?67:-1))},dependencies:[S,U,le,te,ae,se,X,re,Z,ee,ie,ne,ce,pe,de],encapsulation:2})};function _e(a,n){if(a&1&&(t(0,"p",5)(1,"a",6),r(2),i()()),a&2){let e=m().$implicit;s(),d("routerLink",e.link),s(),N(" ",e.linkText," \u2192 ")}}function Ie(a,n){if(a&1&&(t(0,"div",1)(1,"h3",2),r(2),i(),t(3,"div",3)(4,"p",4),r(5),i(),T(6,_e,3,2,"p",5),i()()),a&2){let e=n.$implicit;s(2),l(e.question),s(3),l(e.answer),s(),y(e.link&&e.linkText?6:-1)}}var j=class a{faqs=p([{question:"Where can I sell products?",answer:`You can sell products (create invoices) from the Sales/Invoices section of the application.

To create a new invoice:
1. Navigate to the Sales/Invoices page from the sidebar
2. Click on the "Add New Invoice" button
3. Select the patient/customer
4. Add products to the invoice
5. Review and complete the sale

The invoice will be automatically saved and can be viewed or printed later.`,link:"/invoices",linkText:"Go to Invoices Page"},{question:"How do I add a new drug to the system?",answer:`To add a new drug:
1. Go to the Drugs section from the sidebar
2. Click on the "Add New Drug" button
3. Fill in the required information:
   - Select a general drug from the list
   - Enter internal barcode (PLU)
   - Set the price and stock quantity
   - Set expiry date if applicable
4. Click "Create Drug" to save

The drug will be immediately available for sale and inventory tracking.`,link:"/drugs/new",linkText:"Add New Drug"},{question:"How do I manage inventory alerts?",answer:`Inventory alerts help you track low stock and expiring drugs.

To view alerts:
1. Navigate to Inventory Alerts from the Drugs menu
2. You'll see:
   - Low stock alerts for drugs below threshold
   - Expiring drugs alerts for items nearing expiry date

You can take action by purchasing more stock or managing expiring items.`,link:"/inventory/alerts",linkText:"View Inventory Alerts"},{question:"How do I add a new patient?",answer:`To add a new patient:
1. Go to the Patients/Customers section
2. Click on "Add New Patient"
3. Fill in patient information:
   - Full name
   - Contact information (email, phone)
   - Address details
4. Save the patient

Patients can then be selected when creating invoices.`,link:"/patients",linkText:"Manage Patients"},{question:"How do I track purchases from suppliers?",answer:`To track purchases:
1. Navigate to Purchases from the Suppliers menu
2. View all purchase invoices
3. Create a new purchase by clicking "Add New Purchase"
4. Select supplier and add items
5. Track payment status and due dates

This helps you manage supplier relationships and inventory restocking.`,link:"/purchases",linkText:"View Purchases"},{question:"How do I customize the theme/appearance?",answer:`You can customize the application's appearance from Settings:
1. Go to Settings from the sidebar
2. Click on the "Theme Settings" tab
3. Adjust colors for:
   - Primary colors (buttons, highlights)
   - Sidebar colors
   - Card and page backgrounds
   - Status colors
4. Changes are applied in real-time
5. Click "Save Changes" to persist your theme

Your theme preferences are saved and will be remembered.`,link:"/settings",linkText:"Go to Settings"},{question:"How do I manage pharmacy staff?",answer:`To manage staff members:
1. Go to Pharmacy Staff from the sidebar
2. View all staff members with their roles and status
3. Add new staff by clicking "Add New Staff"
4. Edit or view staff details by clicking on a staff member
5. Assign appropriate roles (Manager, Staff)

Staff members can be given access to the system based on their roles.`,link:"/pharmacy-staff",linkText:"Manage Staff"}]);static \u0275fac=function(e){return new(e||a)};static \u0275cmp=b({type:a,selectors:[["app-faq"]],decls:3,vars:0,consts:[[1,"space-y-4"],[1,"bg-white","rounded-[var(--radius-lg)]","shadow-[var(--shadow-sm)]","p-6"],[1,"text-lg","font-semibold","text-gray-900","mb-3"],[1,"text-gray-700","leading-relaxed"],[1,"whitespace-pre-line"],[1,"mt-3"],[1,"text-[var(--primary-bg)]","hover:underline","font-medium",3,"routerLink"]],template:function(e,o){e&1&&(t(0,"div",0),_(1,Ie,7,3,"div",1,R),i()),e&2&&(s(),I(o.faqs()))},dependencies:[S,J],encapsulation:2})};var ve=class a{static \u0275fac=function(e){return new(e||a)};static \u0275cmp=b({type:a,selectors:[["app-reports"]],decls:13,vars:11,consts:[[1,"space-y-[var(--spacing-gap)]"],[1,"bg-[var(--card-bg)]","rounded-[var(--radius-lg)]","shadow-[var(--shadow-sm)]","p-[var(--spacing-card)]"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-[var(--text-primary)]"],[3,"title","active"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),r(4),h(5,"translate"),i()(),t(6,"app-tabs")(7,"app-tab",4),h(8,"translate"),u(9,"app-tickets"),i(),t(10,"app-tab",4),h(11,"translate"),u(12,"app-faq"),i()()()()),e&2&&(s(4),l(V(5,5,"nav.helpSupport")),s(3),d("title",V(8,7,"reports.tabs.tickets"))("active",!0),s(3),d("title",V(11,9,"reports.tabs.faq"))("active",!1))},dependencies:[S,ue,me,P,j,K],encapsulation:2})};export{ve as ReportsComponent};
