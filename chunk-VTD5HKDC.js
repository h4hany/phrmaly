import{a as W}from"./chunk-FMYBUIAP.js";import{a as L}from"./chunk-55KWSP26.js";import{a as z,b as H}from"./chunk-4PK2EB7K.js";import{a as j}from"./chunk-CPH2TRFL.js";import{a as P}from"./chunk-PUVF5ECJ.js";import"./chunk-Y5QUESDN.js";import{d as h,e as O,f as T,h as q,k as G,n as A,t as V,v as B,w as D,x as R}from"./chunk-VW37JDOU.js";import{b as x,d as N}from"./chunk-QHH3SHC3.js";import"./chunk-KPWAPXFF.js";import"./chunk-ACQN7LQS.js";import{b as k}from"./chunk-7DC7YEPQ.js";import{$a as i,$b as w,Bb as F,Cb as C,Ga as _,La as E,Ra as t,S as m,Sa as I,Wa as M,_ as g,ab as o,bb as l,eb as b,nb as y,pb as S,xa as r}from"./chunk-OKFD3A6M.js";import"./chunk-KAT7YFEL.js";function K(n,p){n&1&&(g(),i(0,"svg",15),l(1,"circle",17)(2,"path",18),o())}function Q(n,p){n&1&&(g(),i(0,"svg",16),l(1,"path",19),o())}var J=class n{fb=m(B);router=m(N);route=m(x);suppliersService=m(W);supplierForm;loading=!1;errorMessage="";isEdit=!1;supplierId=null;typeOptions=[{value:"manufacturer",label:"button.manufacturer"},{value:"warehouse",label:"button.warehouse"}];statusOptions=[{value:"active",label:"common.active"},{value:"inactive",label:"common.inactive"}];ngOnInit(){this.supplierId=this.route.snapshot.paramMap.get("id"),this.isEdit=!!this.supplierId,this.supplierForm=this.fb.group({name:["",[h.required]],type:["",[h.required]],phone:[""],email:["",[h.email]],address:[""],status:["active"],notes:[""]}),this.isEdit&&this.supplierId&&this.loadSupplier()}loadSupplier(){this.suppliersService.getById(this.supplierId).subscribe({next:p=>{p&&this.supplierForm.patchValue(p)},error:()=>{this.errorMessage="error.loadSupplier"}})}onSubmit(){this.supplierForm.valid?(this.loading=!0,this.errorMessage="",(this.isEdit?this.suppliersService.update(this.supplierId,this.supplierForm.value):this.suppliersService.create(this.supplierForm.value)).subscribe({next:()=>{this.router.navigate(["/suppliers"])},error:a=>{this.errorMessage=a.message||"error.saveSupplier",this.loading=!1}})):Object.keys(this.supplierForm.controls).forEach(p=>{this.supplierForm.get(p)?.markAsTouched()})}onCancel(){this.router.navigate(["/suppliers"])}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=_({type:n,selectors:[["app-supplier-form"]],decls:28,vars:38,consts:[[3,"title","description","errorMessage"],[1,"p-8",3,"ngSubmit","formGroup"],[3,"title"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["type","text","formControlName","name","prefixIcon","tag",3,"label","required","hasError","errorMessage"],["formControlName","type","prefixIcon","factory",3,"label","required","options","placeholder","hasError","errorMessage"],["type","tel","formControlName","phone","prefixIcon","phone",3,"label"],["type","email","formControlName","email","prefixIcon","mail",3,"label","hasError","errorMessage"],[1,"md:col-span-2"],["type","text","formControlName","address","prefixIcon","map-pin",3,"label"],["formControlName","status","prefixIcon","check-circle",3,"label","options","placeholder"],["formControlName","notes","prefixIcon","document-text",3,"label","rows"],[1,"flex","items-center","justify-end","gap-4","pt-8","border-t-2","border-gray-100"],["type","button",1,"px-6","py-3","border-2","border-gray-300","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-50","hover:border-gray-400","transition-all","duration-200",3,"click"],["type","submit",1,"px-6","py-3","rounded-xl","font-semibold","hover:shadow-xl","hover:scale-105","active:scale-95","disabled:opacity-50","disabled:cursor-not-allowed","disabled:hover:scale-100","disabled:hover:shadow-none","transition-all","duration-200","flex","items-center","gap-2",3,"disabled"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(a,e){if(a&1&&(i(0,"app-modern-form-wrapper",0)(1,"form",1),b("ngSubmit",function(){return e.onSubmit()}),i(2,"app-form-section",2)(3,"div",3)(4,"div"),l(5,"app-text-input",4),o(),i(6,"div"),l(7,"app-autocomplete-input",5),o(),i(8,"div"),l(9,"app-text-input",6),o(),i(10,"div"),l(11,"app-text-input",7),o(),i(12,"div",8),l(13,"app-text-input",9),o(),i(14,"div",8),l(15,"app-autocomplete-input",10),o()()(),i(16,"app-form-section",2)(17,"div"),l(18,"app-textarea-input",11),o()(),i(19,"div",12)(20,"button",13),b("click",function(){return e.onCancel()}),y(21),F(22,"translate"),o(),i(23,"button",14),E(24,K,3,0,":svg:svg",15)(25,Q,2,0,":svg:svg",16),y(26),F(27,"translate"),o()()()()),a&2){let s,u,d,c,f,v;t("title",e.isEdit?"form.editSupplier":"form.addSupplier")("description",e.isEdit?"form.editSupplierDescription":"form.addSupplierDescription")("errorMessage",e.errorMessage),r(),t("formGroup",e.supplierForm),r(),t("title","supplier.basicInfo"),r(3),t("label","form.supplier.name")("required",!0)("hasError",!!((s=e.supplierForm.get("name"))!=null&&s.invalid&&((s=e.supplierForm.get("name"))!=null&&s.touched)))("errorMessage",(u=e.supplierForm.get("name"))!=null&&u.invalid&&((u=e.supplierForm.get("name"))!=null&&u.touched)?"validation.nameRequired":void 0),r(2),t("label","form.supplier.type")("required",!0)("options",e.typeOptions)("placeholder","form.selectType")("hasError",!!((d=e.supplierForm.get("type"))!=null&&d.invalid&&((d=e.supplierForm.get("type"))!=null&&d.touched)))("errorMessage",(c=e.supplierForm.get("type"))!=null&&c.invalid&&((c=e.supplierForm.get("type"))!=null&&c.touched)?"validation.typeRequired":void 0),r(2),t("label","patient.phone"),r(2),t("label","patient.email")("hasError",!!((f=e.supplierForm.get("email"))!=null&&f.invalid&&((f=e.supplierForm.get("email"))!=null&&f.touched)))("errorMessage",(v=e.supplierForm.get("email"))!=null&&v.invalid&&((v=e.supplierForm.get("email"))!=null&&v.touched)?"validation.emailInvalid":void 0),r(2),t("label","form.supplier.address"),r(2),t("label","drug.status")("options",e.statusOptions)("placeholder","form.selectStatus"),r(),t("title","form.supplier.notes"),r(2),t("label","form.supplier.notes")("rows",3),r(3),S(" ",C(22,34,"common.cancel")," "),r(2),I("background","var(--primary-bg)")("color","var(--primary-text)"),t("disabled",e.supplierForm.invalid||e.loading),r(),M(e.loading?24:25),r(2),S(" ",C(27,36,e.isEdit?"form.updateSupplier":"form.createSupplier")," ")}},dependencies:[w,R,q,O,T,V,G,A,D,z,H,P,L,j,k],encapsulation:2})};export{J as SupplierFormComponent};
