import{a as y}from"./chunk-WSWMCXAC.js";import"./chunk-FXA7JHBB.js";import{a as g}from"./chunk-X72QHXER.js";import{a as h}from"./chunk-ZKJ45IBQ.js";import"./chunk-GHDX2O3N.js";import"./chunk-C4LLEIGY.js";import"./chunk-BYXBJQAS.js";import{a as S}from"./chunk-JBZ5JDSH.js";import"./chunk-ONVEZIWC.js";import"./chunk-K7KLI742.js";import{b as k}from"./chunk-7YN2F2UA.js";import"./chunk-J2A4D5WT.js";import{Da as f,Oa as n,Q as c,Wb as u,Ya as s,Za as o,_a as r,kb as m,lb as l,va as a,yb as p,zb as d}from"./chunk-ILVQMZIM.js";import"./chunk-7CGTOI24.js";var b=class v{movementEngine=c(y);totalMovements=0;suspiciousMovements=0;highRiskStaffCount=0;avgRiskScore=0;staffRiskScores=[];riskByTypeData={labels:["Sale","Purchase","Adjustment","Theft"],datasets:[{label:"Risk Score",data:[15,10,75,100]}]};dailyTrendData={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Daily Variance",data:[5,12,8,15,20,10,7]}]};chartOptions={responsive:!0,maintainAspectRatio:!1};staffColumns=[{key:"staffName",label:"movements.staff"},{key:"totalMovements",label:"movements.totalMovements"},{key:"suspiciousMovements",label:"movements.suspiciousMovements"},{key:"riskScore",label:"movements.riskScore"},{key:"riskLevel",label:"movements.riskLevel"}];ngOnInit(){this.loadStaffRiskScores()}loadStaffRiskScores(){this.movementEngine.getStaffRiskScores().subscribe({next:i=>{this.staffRiskScores=i,this.totalMovements=i.reduce((t,e)=>t+e.totalMovements,0),this.suspiciousMovements=i.reduce((t,e)=>t+e.suspiciousMovements,0),this.highRiskStaffCount=i.filter(t=>t.riskLevel==="high"||t.riskLevel==="critical").length,this.avgRiskScore=i.length>0?i.reduce((t,e)=>t+e.riskScore,0)/i.length:0}})}static \u0275fac=function(t){return new(t||v)};static \u0275cmp=f({type:v,selectors:[["app-movements-risk-dashboard"]],decls:22,vars:26,consts:[[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6"],["label","movements.totalMovements",3,"value","trend","trendPositive"],["label","movements.suspiciousMovements",3,"value","trend","trendPositive"],["label","movements.highRiskStaff",3,"value"],["label","movements.avgRiskScore",3,"value"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"p-6","rounded-lg",2,"background-color","var(--card-bg)"],[1,"text-lg","font-semibold","mb-4"],[3,"type","data","options"],[3,"columns","data","emptyMessage"]],template:function(t,e){t&1&&(s(0,"div",0)(1,"div",1),r(2,"app-stat-card",2)(3,"app-stat-card",3)(4,"app-stat-card",4)(5,"app-stat-card",5),o(),s(6,"div",6)(7,"div",7)(8,"h3",8),m(9),p(10,"translate"),o(),r(11,"app-chart",9),o(),s(12,"div",7)(13,"h3",8),m(14),p(15,"translate"),o(),r(16,"app-chart",9),o()(),s(17,"div",7)(18,"h3",8),m(19),p(20,"translate"),o(),r(21,"app-table",10),o()()),t&2&&(a(2),n("value",e.totalMovements)("trend","+12%")("trendPositive",!0),a(),n("value",e.suspiciousMovements)("trend","-3")("trendPositive",!0),a(),n("value",e.highRiskStaffCount),a(),n("value",e.avgRiskScore.toFixed(1)),a(4),l(d(10,20,"movements.riskByType")),a(2),n("type","bar")("data",e.riskByTypeData)("options",e.chartOptions),a(3),l(d(15,22,"movements.dailyTrend")),a(2),n("type","line")("data",e.dailyTrendData)("options",e.chartOptions),a(3),l(d(20,24,"movements.staffRiskScores")),a(2),n("columns",e.staffColumns)("data",e.staffRiskScores)("emptyMessage","movements.noStaffData"))},dependencies:[u,h,g,S,k],encapsulation:2})};export{b as MovementsRiskDashboardComponent};
