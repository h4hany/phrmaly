import{K as g,i as s,y as c}from"./chunk-E4S7NVXB.js";import{a as u,b as p}from"./chunk-C6Q5SG76.js";var f=class l{plans=[{id:"PLAN001",name:"Professional",description:"For growing pharmacy chains",tier:"professional",price:299,currency:"USD",billingCycle:"monthly",maxPharmacies:5,maxStaff:50,enabledModules:["inventory","hr","finance","automation","analytics"],features:{apiAccess:!0,prioritySupport:!0,customReports:!0},isActive:!0,isArchived:!1,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"PLAN002",name:"Starter",description:"For single pharmacies",tier:"starter",price:99,currency:"USD",billingCycle:"monthly",maxPharmacies:1,maxStaff:10,enabledModules:["inventory","finance"],features:{apiAccess:!1,prioritySupport:!1,customReports:!1},isActive:!0,isArchived:!1,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"PLAN003",name:"Enterprise",description:"For large organizations",tier:"enterprise",price:999,currency:"USD",billingCycle:"monthly",maxPharmacies:-1,maxStaff:-1,enabledModules:["inventory","hr","finance","automation","loyalty","api_access","ai_features","analytics"],features:{apiAccess:!0,prioritySupport:!0,customReports:!0,whiteLabel:!0,dedicatedSupport:!0},isActive:!0,isArchived:!1,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}];subscriptions=[{id:"SUB001",accountId:"ACC001",planId:"PLAN001",status:"active",currentPeriodStart:new Date("2024-11-01"),currentPeriodEnd:new Date("2024-12-01"),cancelAtPeriodEnd:!1,createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-11-01")},{id:"SUB002",accountId:"ACC002",planId:"PLAN002",status:"trial",currentPeriodStart:new Date("2024-11-20"),currentPeriodEnd:new Date("2024-12-20"),cancelAtPeriodEnd:!1,trialEndsAt:new Date("2024-12-20"),createdAt:new Date("2024-11-20"),updatedAt:new Date("2024-11-20")}];invoices=[{id:"INV001",subscriptionId:"SUB001",accountId:"ACC001",invoiceNumber:"INV-2024-11-001",amount:299,currency:"USD",status:"paid",dueDate:new Date("2024-11-01"),paidAt:new Date("2024-11-01"),createdAt:new Date("2024-11-01"),updatedAt:new Date("2024-11-01")}];getPlans(e){let t=[...this.plans];e?.tier&&(t=t.filter(n=>n.tier===e.tier)),e?.isActive!==void 0&&(t=t.filter(n=>n.isActive===e.isActive));let a=e?.page||1,i=e?.pageSize||10,r=(a-1)*i,o=r+i,d=t.slice(r,o);return s({data:d,total:t.length,page:a,pageSize:i,totalPages:Math.ceil(t.length/i)}).pipe(c(500))}getSubscriptions(e){let t=[...this.subscriptions];e?.accountId&&(t=t.filter(n=>n.accountId===e.accountId)),e?.status&&(t=t.filter(n=>n.status===e.status));let a=e?.page||1,i=e?.pageSize||10,r=(a-1)*i,o=r+i,d=t.slice(r,o);return s({data:d,total:t.length,page:a,pageSize:i,totalPages:Math.ceil(t.length/i)}).pipe(c(500))}getInvoices(e){let t=[...this.invoices];e?.accountId&&(t=t.filter(n=>n.accountId===e.accountId)),e?.status&&(t=t.filter(n=>n.status===e.status));let a=e?.page||1,i=e?.pageSize||10,r=(a-1)*i,o=r+i,d=t.slice(r,o);return s({data:d,total:t.length,page:a,pageSize:i,totalPages:Math.ceil(t.length/i)}).pipe(c(500))}createPlan(e){let t=p(u({},e),{id:`PLAN${String(this.plans.length+1).padStart(3,"0")}`,createdAt:new Date,updatedAt:new Date});return this.plans.push(t),s(t).pipe(c(500))}assignPlan(e,t){let a={id:`SUB${String(this.subscriptions.length+1).padStart(3,"0")}`,accountId:e,planId:t,status:"active",currentPeriodStart:new Date,currentPeriodEnd:new Date(Date.now()+2592e6),cancelAtPeriodEnd:!1,createdAt:new Date,updatedAt:new Date};return this.subscriptions.push(a),s(a).pipe(c(500))}static \u0275fac=function(t){return new(t||l)};static \u0275prov=g({token:l,factory:l.\u0275fac,providedIn:"root"})};export{f as a};
