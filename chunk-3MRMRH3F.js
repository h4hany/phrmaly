import{K as d,i as o,y as a}from"./chunk-E4S7NVXB.js";var p=class s{tickets=[{id:"TKT001",accountId:"ACC001",subject:"Unable to process payments",description:"Payment gateway integration is not working",priority:"high",status:"open",category:"technical",createdAt:new Date("2024-11-27T10:00:00"),updatedAt:new Date("2024-11-27T10:00:00"),createdBy:"user001",slaDeadline:new Date("2024-11-28T10:00:00")},{id:"TKT002",accountId:"ACC002",subject:"Billing question",description:"Need clarification on subscription pricing",priority:"medium",status:"assigned",category:"billing",assignedTo:"admin001",createdAt:new Date("2024-11-26T14:30:00"),updatedAt:new Date("2024-11-27T09:00:00"),createdBy:"user002",slaDeadline:new Date("2024-11-29T14:30:00")},{id:"TKT003",accountId:"ACC001",subject:"Feature request: Export reports",description:"Would like to export reports to Excel",priority:"low",status:"resolved",category:"feature_request",assignedTo:"admin001",resolvedAt:new Date("2024-11-25T16:00:00"),createdAt:new Date("2024-11-24T11:00:00"),updatedAt:new Date("2024-11-25T16:00:00"),createdBy:"user001"}];getAll(i){let t=[...this.tickets];i?.status&&(t=t.filter(n=>n.status===i.status)),i?.priority&&(t=t.filter(n=>n.priority===i.priority)),i?.category&&(t=t.filter(n=>n.category===i.category)),i?.accountId&&(t=t.filter(n=>n.accountId===i.accountId));let e=i?.page||1,r=i?.pageSize||10,c=(e-1)*r,u=c+r,l=t.slice(c,u);return o({data:l,total:t.length,page:e,pageSize:r,totalPages:Math.ceil(t.length/r)}).pipe(a(500))}getById(i){let t=this.tickets.find(e=>e.id===i);return o(t||null).pipe(a(300))}assignTicket(i,t){let e=this.tickets.find(r=>r.id===i);if(!e)throw new Error("Ticket not found");return e.assignedTo=t,e.status="assigned",e.updatedAt=new Date,o(e).pipe(a(300))}updateStatus(i,t){let e=this.tickets.find(r=>r.id===i);if(!e)throw new Error("Ticket not found");return e.status=t,(t==="resolved"||t==="closed")&&(e.resolvedAt=new Date),e.updatedAt=new Date,o(e).pipe(a(300))}addNote(i,t){let e=this.tickets.find(r=>r.id===i);if(!e)throw new Error("Ticket not found");return e.internalNotes=(e.internalNotes||"")+`
`+new Date().toISOString()+": "+t,e.updatedAt=new Date,o(e).pipe(a(300))}static \u0275fac=function(t){return new(t||s)};static \u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})};export{p as a};
