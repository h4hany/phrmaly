import{a as u}from"./chunk-URFUYTQU.js";import{K as m,Q as _}from"./chunk-E4S7NVXB.js";var c={routes:{"/dashboard":["account_owner"],"/patients":["account_owner","pharmacy_manager"],"/patients/:id":["account_owner","pharmacy_manager"],"/pharmacy-staff":["account_owner","pharmacy_manager"],"/pharmacy-staff/:id":["account_owner","pharmacy_manager"],"/people/payroll":["account_owner"],"/people/attendance":["account_owner","pharmacy_manager"],"/people/performance":["account_owner"],"/purchases":["account_owner","pharmacy_inventory_manager"],"/suppliers":["account_owner","pharmacy_inventory_manager"],"/audit-logs":["account_owner"],"/inventory/movements":["account_owner"],"/growth/referrals":["account_owner"],"/system/permissions":["account_owner"],"/system/features":["account_owner"],"/settings":["account_owner","pharmacy_manager"],"/invoices":["account_owner","pharmacy_manager","pharmacy_staff","pharmacy_inventory_manager"],"/invoices/new":["account_owner","pharmacy_manager","pharmacy_staff","pharmacy_inventory_manager"],"/invoices/:id":["account_owner","pharmacy_manager","pharmacy_staff","pharmacy_inventory_manager"],"/invoices/:id/edit":["account_owner","pharmacy_manager","pharmacy_staff"],"/drugs":["account_owner","pharmacy_manager","pharmacy_staff"],"/drugs/new":["account_owner","pharmacy_manager","pharmacy_staff"],"/bundles":["account_owner","pharmacy_staff","pharmacy_manager"],"/inventory/map":["account_owner","pharmacy_staff","pharmacy_manager"],"/inventory/transfers":["account_owner","pharmacy_staff","pharmacy_manager"],"/inventory/alerts":["account_owner","pharmacy_manager","pharmacy_inventory_manager"],"/inventory/requested-products":["account_owner","pharmacy_manager","pharmacy_staff","pharmacy_inventory_manager"],"/payments/methods":["account_owner","pharmacy_inventory_manager"],"/vouchers":["account_owner","pharmacy_manager","pharmacy_staff"],"/vouchers/new":["account_owner","pharmacy_manager","pharmacy_staff"],"/vouchers/:id/edit":["account_owner","pharmacy_manager","pharmacy_staff"]},groups:{overview:["account_owner"],operations:["account_owner","pharmacy_manager","pharmacy_staff"],people:["account_owner","pharmacy_manager"],inventory:["account_owner","pharmacy_manager","pharmacy_staff","pharmacy_inventory_manager"],procurement:["account_owner","pharmacy_inventory_manager"],finance:["account_owner","pharmacy_inventory_manager"],growth:["account_owner"],system:["account_owner","pharmacy_manager","pharmacy_inventory_manager"],support:["account_owner","pharmacy_staff","pharmacy_inventory_manager"]},items:{"/dashboard":["account_owner"],"/invoices":["account_owner","pharmacy_manager","pharmacy_staff","pharmacy_inventory_manager"],"/patients":["account_owner","pharmacy_manager"],"/pharmacy-staff":["account_owner","pharmacy_manager"],"/people/payroll":["account_owner"],"/people/performance":["account_owner"],"/people/attendance":["account_owner","pharmacy_manager"],"/people/training":["account_owner"],"/drugs":["account_owner","pharmacy_manager","pharmacy_staff"],"/bundles":["account_owner","pharmacy_staff","pharmacy_manager"],"/inventory/alerts":["account_owner","pharmacy_inventory_manager","pharmacy_manager"],"/inventory/requested-products":["account_owner","pharmacy_manager","pharmacy_staff","pharmacy_inventory_manager"],"/inventory/transfers":["account_owner","pharmacy_staff","pharmacy_manager"],"/inventory/map":["account_owner","pharmacy_staff","pharmacy_manager"],"/purchases":["account_owner","pharmacy_inventory_manager"],"/suppliers":["account_owner","pharmacy_inventory_manager"],"/payments":["account_owner"],"/payments/methods":["account_owner","pharmacy_inventory_manager"],"/audit-logs":["account_owner"],"/inventory/movements":["account_owner"],"/growth/referrals":["account_owner"],"/system/automation":["account_owner"],"/system/migration":["account_owner"],"/system/permissions":["account_owner"],"/system/features":["account_owner"],"/settings":["account_owner","pharmacy_manager"],"/reports":["account_owner"],"/vouchers":["account_owner","pharmacy_manager","pharmacy_staff"]},features:{"patient.overview.kpi-cards":["account_owner"],"patient.tabs.orders":["account_owner"],"patient.tabs.loyalty":["account_owner"],"patient.tabs.revenue":["account_owner"],"staff.tabs.details":["account_owner","pharmacy_manager"],"staff.tabs.performance":["account_owner"],"staff.tabs.risk":["account_owner"],"staff.tabs.activity":["account_owner"],"invoice.create":["account_owner","pharmacy_staff","pharmacy_manager"],"invoice.actions":["account_owner","pharmacy_staff","pharmacy_manager"],"settings.tabs.account":["account_owner"],"voucher.view":["account_owner","pharmacy_manager","pharmacy_staff"],"voucher.create":["account_owner","pharmacy_manager","pharmacy_staff"],"voucher.edit":["account_owner","pharmacy_manager","pharmacy_staff"],"voucher.actions":["account_owner","pharmacy_manager","pharmacy_staff"],"patient.tabs.vouchers":["account_owner","pharmacy_manager","pharmacy_staff"]}};function o(e,r,a){let t=c[r][a]||[];return e==="account_owner"?!0:t.includes(e)}function s(e,r){if(e===r)return!0;let a=e.replace(/:[^/]+/g,"[^/]+").replace(/\//g,"\\/");return new RegExp(`^${a}$`).test(r)}var i=class e{authService=_(u);getCurrentRole(){return this.authService.getCurrentUser()?.role||null}canAccessRoute(r){let a=this.getCurrentRole();if(!a)return!1;if(a==="account_owner")return!0;let n=r.split("?")[0].replace(/\/$/,"")||"/";if(c.routes[n])return o(a,"routes",n);for(let t of Object.keys(c.routes))if(s(t,n))return o(a,"routes",t);return!1}canAccessGroup(r){let a=this.getCurrentRole();return a?a==="account_owner"?!0:o(a,"groups",r):!1}canAccessItem(r){let a=this.getCurrentRole();if(!a)return!1;if(a==="account_owner")return!0;let n=r.split("?")[0].replace(/\/$/,"")||"/";if(c.items[n])return o(a,"items",n);for(let t of Object.keys(c.items))if(s(t,n))return o(a,"items",t);return!1}canAccessFeature(r){let a=this.getCurrentRole();return a?a==="account_owner"?!0:o(a,"features",r):!1}hasRole(r){return this.getCurrentRole()===r}hasAnyRole(r){let a=this.getCurrentRole();return a?r.includes(a):!1}getHomeRoute(){let r=this.getCurrentRole();if(!r)return"/login";switch(r){case"pharmacy_manager":case"pharmacy_staff":return"/drugs";case"pharmacy_inventory_manager":return"/inventory/alerts";case"account_owner":default:return"/dashboard"}}static \u0275fac=function(a){return new(a||e)};static \u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})};export{i as a};
