import{a as V}from"./chunk-47X5MO5M.js";import"./chunk-6CFKC637.js";import{a as q}from"./chunk-5PFWNSG3.js";import{b as P}from"./chunk-3UJCRMW3.js";import{$a as l,Ab as f,Bb as h,Fa as M,Ka as g,Qa as x,Ta as p,Ua as T,Va as m,W as y,X as b,Ya as $,Za as F,_a as a,_b as I,ab as w,cb as N,da as E,db as C,eb as s,mb as c,nb as u,ob as D,qb as B,wa as o}from"./chunk-E4S7NVXB.js";import"./chunk-C6Q5SG76.js";var Q=(i,t)=>t.id;function R(i,t){if(i&1&&(a(0,"p",9),c(1),f(2,"translate"),l()),i&2){let e=s(2);p(e.subtitleStyles),o(),u(h(2,3,e.subtitle))}}function j(i,t){if(i&1&&(a(0,"div",1)(1,"h3",7),c(2),f(3,"translate"),l(),g(4,R,3,5,"p",8),l()),i&2){let e=s();o(),p(e.titleStyles),o(),u(h(3,4,e.title)),o(2),m(e.subtitle?4:-1)}}function z(i,t){if(i&1&&(a(0,"div",16),c(1),l()),i&2){let e=s(2).$implicit,n=s();p(n.getQuantityStyles(e)),o(),D(" Qty: ",e.quantity," ")}}function J(i,t){if(i&1&&(a(0,"div",14),c(1),l(),g(2,z,2,3,"div",15)),i&2){let e=s().$implicit;x("title",e.drugName),o(),D(" ",e.drugName," "),o(),m(e.quantity!==void 0?2:-1)}}function K(i,t){i&1&&(a(0,"div",12),c(1),f(2,"translate"),l()),i&2&&(o(),u(h(2,1,"shelf.empty")))}function U(i,t){i&1&&(a(0,"app-badge",13),c(1,"Low"),l())}function W(i,t){if(i&1){let e=N();a(0,"div",10),C("click",function(){let r=y(e).$implicit,d=s();return b(d.onLocationClick(r))})("mouseenter",function(){let r=y(e).$implicit,d=s();return b(d.hoveredLocation=r.id)})("mouseleave",function(){y(e);let r=s();return b(r.hoveredLocation=null)}),a(1,"div",11),c(2),l(),g(3,J,3,3)(4,K,3,3,"div",12)(5,U,2,0,"app-badge",13),l()}if(i&2){let e=t.$implicit,n=s();p(n.getCellStyles(e)),T(n.getCellClasses(e)),o(2),B("",e.shelf,"-",e.row,"-",e.column,""),o(),m(e.drugName?3:4),o(2),m(e.status==="low_stock"?5:-1)}}function X(i,t){if(i&1&&(a(0,"div",17)(1,"div",18),w(2,"div",19),a(3,"span"),c(4),f(5,"translate"),l()(),a(6,"div",18),w(7,"div",20),a(8,"span"),c(9),f(10,"translate"),l()(),a(11,"div",18),w(12,"div",21),a(13,"span"),c(14),f(15,"translate"),l()()()),i&2){let e=s();p(e.legendStyles),o(4),u(h(5,5,"shelf.occupied")),o(5),u(h(10,7,"shelf.lowStock")),o(5),u(h(15,9,"shelf.empty"))}}var L=class i{locations=[];title="";subtitle="";columns=8;showLegend=!0;highlightDrugId;locationClick=new E;hoveredLocation=null;get containerStyles(){return"background-color: var(--card-bg); border-radius: var(--radius-lg); padding: 1.5rem;"}get gridStyles(){return`grid-template-columns: repeat(${this.columns}, minmax(0, 1fr));`}get titleStyles(){return"color: var(--card-text);"}get subtitleStyles(){return"color: var(--card-text); opacity: 0.7;"}get legendStyles(){return"color: var(--card-text);"}getCellClasses(t){let e="p-2 rounded border-2 cursor-pointer transition-all min-h-[80px]",n=this.highlightDrugId===t.drugId,r=this.hoveredLocation===t.id;return n?`${e} ring-2 ring-offset-2`:r?`${e} transform scale-105`:e}getCellStyles(t){let e=this.highlightDrugId===t.drugId;return t.status==="low_stock"?"background-color: #fef3c7; border-color: #f59e0b; color: #92400e;":t.drugId?e?"background-color: #dbeafe; border-color: #3b82f6; color: #1e40af; ring-color: #3b82f6;":"background-color: #d1fae5; border-color: #10b981; color: #065f46;":"background-color: #f3f4f6; border-color: #d1d5db; color: #6b7280;"}getQuantityStyles(t){return t.status==="low_stock"?"color: #92400e; font-weight: 600;":"color: inherit; opacity: 0.8;"}onLocationClick(t){this.locationClick.emit(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-shelf-map"]],inputs:{locations:"locations",title:"title",subtitle:"subtitle",columns:"columns",showLegend:"showLegend",highlightDrugId:"highlightDrugId"},outputs:{locationClick:"locationClick"},decls:8,vars:6,consts:[[1,"w-full"],[1,"mb-4"],[1,"overflow-x-auto"],[1,"inline-block","min-w-full"],[1,"grid","gap-2"],[3,"class","style"],[1,"mt-4","flex","flex-wrap","gap-4","text-sm",3,"style"],[1,"text-lg","font-semibold"],[1,"text-sm","mt-1",3,"style"],[1,"text-sm","mt-1"],[3,"click","mouseenter","mouseleave"],[1,"text-xs","font-medium","mb-1"],[1,"text-xs","opacity-50"],["variant","warning",1,"mt-1","text-xs"],[1,"text-xs","truncate",3,"title"],[1,"text-xs","mt-1",3,"style"],[1,"text-xs","mt-1"],[1,"mt-4","flex","flex-wrap","gap-4","text-sm"],[1,"flex","items-center","gap-2"],[1,"w-4","h-4","rounded",2,"background-color","#10b981"],[1,"w-4","h-4","rounded",2,"background-color","#f59e0b"],[1,"w-4","h-4","rounded","border-2",2,"background-color","#f3f4f6","border-color","#d1d5db"]],template:function(e,n){e&1&&(a(0,"div",0),g(1,j,5,6,"div",1),a(2,"div",2)(3,"div",3)(4,"div",4),$(5,W,6,9,"div",5,Q),l()()(),g(7,X,16,11,"div",6),l()),e&2&&(p(n.containerStyles),o(),m(n.title?1:-1),o(3),p(n.gridStyles),o(),F(n.locations),o(2),m(n.showLegend?7:-1))},dependencies:[I,q,P],encapsulation:2})};var O=class i{shelfLocations=[];highlightedDrugId;ngOnInit(){this.loadShelfLocations()}loadShelfLocations(){let t=[],e=["A","B","C","D"],n=[{id:"PDRG001",name:"Paracetamol 500mg",quantity:150},{id:"PDRG002",name:"Ibuprofen 200mg",quantity:100},{id:"PDRG003",name:"Amoxicillin 250mg",quantity:25}];e.forEach((r,d)=>{for(let _=1;_<=4;_++)for(let v=1;v<=8;v++){let A=(d*32+(_-1)*8+v-1)%n.length,k=n[A],S=Math.random()>.3;t.push({id:`${r}-${_}-${v}`,shelf:r,row:_,column:v,drugId:S?k.id:void 0,drugName:S?k.name:void 0,quantity:S?Math.floor(Math.random()*k.quantity):void 0,status:S?Math.random()>.7?"low_stock":"occupied":"empty"})}}),this.shelfLocations=t}handleSearch(t){if(t){let e=this.shelfLocations.find(n=>n.drugName?.toLowerCase().includes(t.toLowerCase()));this.highlightedDrugId=e?.drugId}else this.highlightedDrugId=void 0}onLocationClick(t){console.log("Location clicked:",t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-inventory-map"]],decls:3,vars:7,consts:[[1,"space-y-6"],["title","shelfMap.title",3,"onSearch","showSearch"],[3,"locationClick","locations","title","subtitle","columns","showLegend","highlightDrugId"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"app-action-toolbar",1),C("onSearch",function(d){return n.handleSearch(d)}),l(),a(2,"app-shelf-map",2),C("locationClick",function(d){return n.onLocationClick(d)}),l()()),e&2&&(o(),x("showSearch",!0),o(),x("locations",n.shelfLocations)("title","shelfMap.pharmacyLayout")("subtitle","shelfMap.subtitle")("columns",8)("showLegend",!0)("highlightDrugId",n.highlightedDrugId))},dependencies:[I,L,V],encapsulation:2})};export{O as InventoryMapComponent};
