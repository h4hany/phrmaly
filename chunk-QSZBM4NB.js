import{A as c,M as l,j as n}from"./chunk-OKFD3A6M.js";import{a as D,b as u}from"./chunk-KAT7YFEL.js";var g=class d{generalDrugs=[{id:"DRG001",name:"Paracetamol 500mg",description:"Pain reliever and fever reducer",manufacturer:"ABC Pharmaceuticals",internationalBarcode:"1234567890123"},{id:"DRG002",name:"Ibuprofen 200mg",description:"Nonsteroidal anti-inflammatory drug",manufacturer:"MedTech Industries",internationalBarcode:"1234567890124"},{id:"DRG003",name:"Amoxicillin 250mg",description:"Antibiotic",manufacturer:"ABC Pharmaceuticals",internationalBarcode:"1234567890125"},{id:"DRG004",name:"Aspirin 100mg",description:"Blood thinner and pain reliever",manufacturer:"MedTech Industries",internationalBarcode:"1234567890126"},{id:"DRG005",name:"Metformin 500mg",description:"Diabetes medication",manufacturer:"ABC Pharmaceuticals",internationalBarcode:"1234567890127"}];pharmacyDrugs=[{id:"PDRG001",generalDrugId:"DRG001",pharmacyId:"ph1",internalBarcode:"123456",price:5.5,priceAfterDiscount:5,stockQuantity:150,minimumStock:50,expiryDate:new Date("2025-12-31"),status:"active",classification:"medicinal",origin:"local",costLayers:[{quantity:150,unitCost:3.5,purchaseDate:new Date("2024-01-15"),expiryDate:new Date("2025-12-31")}],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-11-27")},{id:"PDRG002",generalDrugId:"DRG002",pharmacyId:"ph1",internalBarcode:"123457",price:8,priceAfterDiscount:7.5,stockQuantity:100,minimumStock:30,expiryDate:new Date("2025-11-30"),status:"active",classification:"medicinal",origin:"imported",costLayers:[{quantity:100,unitCost:5,purchaseDate:new Date("2024-02-10"),expiryDate:new Date("2025-11-30")}],createdAt:new Date("2024-02-10"),updatedAt:new Date("2024-11-26")},{id:"PDRG003",generalDrugId:"DRG003",pharmacyId:"ph1",internalBarcode:"123458",price:12,priceAfterDiscount:11.5,stockQuantity:25,minimumStock:50,expiryDate:new Date("2025-06-30"),status:"active",classification:"medicinal",origin:"imported",costLayers:[{quantity:50,unitCost:8,purchaseDate:new Date("2024-03-15"),expiryDate:new Date("2025-06-30")}],createdAt:new Date("2024-03-15"),updatedAt:new Date("2024-11-25")},{id:"PDRG004",generalDrugId:"DRG001",pharmacyId:"ph1",internalBarcode:"123459",price:6,priceAfterDiscount:5.5,stockQuantity:15,minimumStock:40,expiryDate:new Date("2025-01-15"),status:"active",classification:"medicinal",origin:"local",costLayers:[{quantity:40,unitCost:4,purchaseDate:new Date("2024-04-20"),expiryDate:new Date("2025-01-15")}],createdAt:new Date("2024-04-20"),updatedAt:new Date("2024-11-24")},{id:"PDRG005",generalDrugId:"DRG002",pharmacyId:"ph1",internalBarcode:"123460",price:9,priceAfterDiscount:8.5,stockQuantity:200,minimumStock:50,expiryDate:new Date("2026-01-24"),status:"active",classification:"cosmetic",origin:"local",costLayers:[{quantity:200,unitCost:6,purchaseDate:new Date("2024-05-10"),expiryDate:new Date("2026-01-24")}],createdAt:new Date("2024-05-10"),updatedAt:new Date("2024-11-23")},{id:"PDRG006",generalDrugId:"DRG003",pharmacyId:"ph1",internalBarcode:"123461",price:15,priceAfterDiscount:14,stockQuantity:8,minimumStock:30,expiryDate:new Date("2026-01-17"),status:"active",classification:"medicinal",origin:"imported",costLayers:[{quantity:30,unitCost:10,purchaseDate:new Date("2024-06-01"),expiryDate:new Date("2026-01-17")}],createdAt:new Date("2024-06-01"),updatedAt:new Date("2024-11-22")},{id:"PDRG007",generalDrugId:"DRG001",pharmacyId:"ph1",internalBarcode:"123462",price:5.75,priceAfterDiscount:5.25,stockQuantity:45,minimumStock:60,expiryDate:new Date("2025-03-15"),status:"active",classification:"medicinal",origin:"local",costLayers:[{quantity:60,unitCost:3.75,purchaseDate:new Date("2024-07-15"),expiryDate:new Date("2025-03-15")}],createdAt:new Date("2024-07-15"),updatedAt:new Date("2024-11-21")},{id:"PDRG015",generalDrugId:"DRG004",pharmacyId:"ph1",internalBarcode:"123463",price:3.5,priceAfterDiscount:3,stockQuantity:120,minimumStock:50,expiryDate:new Date("2024-12-28"),status:"active",classification:"medicinal",origin:"local",costLayers:[{quantity:120,unitCost:2,purchaseDate:new Date("2024-08-01"),expiryDate:new Date("2024-12-28")}],createdAt:new Date("2024-08-01"),updatedAt:new Date("2024-11-20")},{id:"PDRG016",generalDrugId:"DRG005",pharmacyId:"ph1",internalBarcode:"123464",price:10,priceAfterDiscount:9.5,stockQuantity:90,minimumStock:40,expiryDate:new Date("2025-01-02"),status:"active",classification:"medicinal",origin:"imported",costLayers:[{quantity:90,unitCost:7,purchaseDate:new Date("2024-08-15"),expiryDate:new Date("2025-01-02")}],createdAt:new Date("2024-08-15"),updatedAt:new Date("2024-11-19")},{id:"PDRG008",generalDrugId:"DRG001",pharmacyId:"ph2",internalBarcode:"223456",price:5.5,priceAfterDiscount:5,stockQuantity:20,minimumStock:50,expiryDate:new Date("2025-10-31"),status:"active",classification:"medicinal",origin:"local",costLayers:[{quantity:20,unitCost:3.5,purchaseDate:new Date("2024-08-10"),expiryDate:new Date("2025-10-31")}],createdAt:new Date("2024-08-10"),updatedAt:new Date("2024-11-27")},{id:"PDRG009",generalDrugId:"DRG002",pharmacyId:"ph2",internalBarcode:"223457",price:8,priceAfterDiscount:7.5,stockQuantity:15,minimumStock:30,expiryDate:new Date("2025-11-15"),status:"active",classification:"cosmetic",origin:"imported",costLayers:[{quantity:15,unitCost:5,purchaseDate:new Date("2024-09-05"),expiryDate:new Date("2025-11-15")}],createdAt:new Date("2024-09-05"),updatedAt:new Date("2024-11-26")},{id:"PDRG010",generalDrugId:"DRG003",pharmacyId:"ph2",internalBarcode:"223458",price:12,priceAfterDiscount:11.5,stockQuantity:10,minimumStock:40,expiryDate:new Date("2025-12-20"),status:"active",classification:"medicinal",origin:"imported",costLayers:[{quantity:10,unitCost:8,purchaseDate:new Date("2024-10-12"),expiryDate:new Date("2025-12-20")}],createdAt:new Date("2024-10-12"),updatedAt:new Date("2024-11-25")},{id:"PDRG011",generalDrugId:"DRG001",pharmacyId:"ph2",internalBarcode:"223459",price:6,priceAfterDiscount:5.5,stockQuantity:80,minimumStock:40,expiryDate:new Date("2025-01-10"),status:"active",classification:"medicinal",origin:"local",costLayers:[{quantity:80,unitCost:4,purchaseDate:new Date("2024-04-20"),expiryDate:new Date("2025-01-10")}],createdAt:new Date("2024-04-20"),updatedAt:new Date("2024-11-24")},{id:"PDRG012",generalDrugId:"DRG002",pharmacyId:"ph2",internalBarcode:"223460",price:9,priceAfterDiscount:8.5,stockQuantity:60,minimumStock:50,expiryDate:new Date("2025-01-05"),status:"active",classification:"cosmetic",origin:"local",costLayers:[{quantity:60,unitCost:6,purchaseDate:new Date("2024-05-10"),expiryDate:new Date("2025-01-05")}],createdAt:new Date("2024-05-10"),updatedAt:new Date("2024-11-23")},{id:"PDRG013",generalDrugId:"DRG003",pharmacyId:"ph2",internalBarcode:"223461",price:15,priceAfterDiscount:14,stockQuantity:35,minimumStock:30,expiryDate:new Date("2024-12-25"),status:"active",classification:"medicinal",origin:"imported",costLayers:[{quantity:35,unitCost:10,purchaseDate:new Date("2024-06-01"),expiryDate:new Date("2024-12-25")}],createdAt:new Date("2024-06-01"),updatedAt:new Date("2024-11-22")},{id:"PDRG014",generalDrugId:"DRG001",pharmacyId:"ph2",internalBarcode:"223462",price:5.75,priceAfterDiscount:5.25,stockQuantity:100,minimumStock:60,expiryDate:new Date("2024-12-20"),status:"active",classification:"medicinal",origin:"local",costLayers:[{quantity:100,unitCost:3.75,purchaseDate:new Date("2024-07-15"),expiryDate:new Date("2024-12-20")}],createdAt:new Date("2024-07-15"),updatedAt:new Date("2024-11-21")},{id:"PDRG017",generalDrugId:"DRG004",pharmacyId:"ph2",internalBarcode:"223463",price:3.5,priceAfterDiscount:3,stockQuantity:25,minimumStock:50,expiryDate:new Date("2025-08-15"),status:"active",classification:"medicinal",origin:"local",costLayers:[{quantity:25,unitCost:2,purchaseDate:new Date("2024-09-20"),expiryDate:new Date("2025-08-15")}],createdAt:new Date("2024-09-20"),updatedAt:new Date("2024-11-18")},{id:"PDRG018",generalDrugId:"DRG005",pharmacyId:"ph2",internalBarcode:"223464",price:10,priceAfterDiscount:9.5,stockQuantity:18,minimumStock:40,expiryDate:new Date("2025-09-10"),status:"active",classification:"medicinal",origin:"imported",costLayers:[{quantity:18,unitCost:7,purchaseDate:new Date("2024-10-05"),expiryDate:new Date("2025-09-10")}],createdAt:new Date("2024-10-05"),updatedAt:new Date("2024-11-17")}];getAllGeneralDrugs(){return n([...this.generalDrugs]).pipe(c(300))}getGeneralDrugById(t){let e=this.generalDrugs.find(a=>a.id===t);return n(e||null).pipe(c(200))}getPharmacyDrugs(t){let e=t?.page||1,a=t?.pageSize||10,r=(e-1)*a,i=r+a,s=[...this.pharmacyDrugs],m=s.slice(r,i).map(p=>{let y=this.generalDrugs.find(h=>h.id===p.generalDrugId);return u(D({},p),{generalDrug:y||void 0})});return n({data:m,total:s.length,page:e,pageSize:a,totalPages:Math.ceil(s.length/a)}).pipe(c(500))}getPharmacyDrugById(t){let e=this.pharmacyDrugs.find(a=>a.id===t);if(e){let a=this.generalDrugs.find(r=>r.id===e.generalDrugId);return n(u(D({},e),{generalDrug:a||void 0})).pipe(c(300))}return n(null).pipe(c(300))}getPharmacyDrugByBarcode(t){let e=this.pharmacyDrugs.find(a=>a.internalBarcode===t);if(e){let a=this.generalDrugs.find(r=>r.id===e.generalDrugId);return n(u(D({},e),{generalDrug:a||void 0})).pipe(c(300))}return n(null).pipe(c(300))}createPharmacyDrug(t){let e=u(D({},t),{id:`PDRG${String(this.pharmacyDrugs.length+1).padStart(3,"0")}`,costLayers:t.costLayers||[],createdAt:new Date,updatedAt:new Date});return this.pharmacyDrugs.push(e),n(e).pipe(c(500))}updatePharmacyDrug(t,e){let a=this.pharmacyDrugs.findIndex(r=>r.id===t);if(a===-1)throw new Error("Pharmacy drug not found");return this.pharmacyDrugs[a]=u(D(D({},this.pharmacyDrugs[a]),e),{id:t,updatedAt:new Date}),n(this.pharmacyDrugs[a]).pipe(c(500))}deletePharmacyDrug(t){let e=this.pharmacyDrugs.findIndex(a=>a.id===t);return e===-1?n(!1).pipe(c(300)):(this.pharmacyDrugs.splice(e,1),n(!0).pipe(c(500)))}searchPharmacyDrugs(t){let e=t.toLowerCase(),r=this.pharmacyDrugs.filter(i=>{let s=this.generalDrugs.find(o=>o.id===i.generalDrugId);return i.internalBarcode.includes(t)||s?.name.toLowerCase().includes(e)||s?.internationalBarcode.includes(t)}).map(i=>{let s=this.generalDrugs.find(o=>o.id===i.generalDrugId);return u(D({},i),{generalDrug:s||void 0})});return n(r).pipe(c(300))}getLowStockDrugs(t){let a=this.pharmacyDrugs.filter(r=>r.stockQuantity<=(t||r.minimumStock)).map(r=>{let i=this.generalDrugs.find(s=>s.id===r.generalDrugId);return u(D({},r),{generalDrug:i||void 0})});return n(a).pipe(c(300))}getExpiringDrugs(t=30){let e=new Date;e.setDate(e.getDate()+t);let r=this.pharmacyDrugs.filter(i=>i.expiryDate&&i.expiryDate<=e&&i.expiryDate>=new Date).map(i=>{let s=this.generalDrugs.find(o=>o.id===i.generalDrugId);return u(D({},i),{generalDrug:s||void 0})});return n(r).pipe(c(300))}static \u0275fac=function(e){return new(e||d)};static \u0275prov=l({token:d,factory:d.\u0275fac,providedIn:"root"})};export{g as a};
