import{L as p,j as r,z as s}from"./chunk-W6WRXJJ4.js";import{a as n,b as u}from"./chunk-7CGTOI24.js";var d=class o{purchases=[{id:"PUR001",invoiceNumber:"INV-2024-001",supplierId:"SUP001",purchaseDate:new Date("2024-11-20"),dueDate:new Date("2024-12-20"),items:[{id:"1",drugId:"PDRG001",drugName:"Paracetamol 500mg",quantity:100,unitCost:3.5,totalCost:350}],totalAmount:350,paidAmount:150,remainingAmount:200,paymentStatus:"partial",pharmacyId:"ph1",createdAt:new Date("2024-11-20"),updatedAt:new Date("2024-11-20")},{id:"PUR002",invoiceNumber:"INV-2024-002",supplierId:"SUP002",purchaseDate:new Date("2024-11-25"),dueDate:new Date("2024-12-25"),items:[{id:"2",drugId:"PDRG002",drugName:"Ibuprofen 200mg",quantity:50,unitCost:5,totalCost:250}],totalAmount:250,paidAmount:250,remainingAmount:0,paymentStatus:"paid",pharmacyId:"ph1",createdAt:new Date("2024-11-25"),updatedAt:new Date("2024-11-25")}];getAll(a){let e=a?.page||1,t=a?.pageSize||10,i=(e-1)*t,h=i+t,c=[...this.purchases],l=c.slice(i,h);return r({data:l,total:c.length,page:e,pageSize:t,totalPages:Math.ceil(c.length/t)}).pipe(s(500))}getById(a){let e=this.purchases.find(t=>t.id===a);return r(e||null).pipe(s(300))}create(a){let e=u(n({},a),{id:`PUR${String(this.purchases.length+1).padStart(3,"0")}`,createdAt:new Date,updatedAt:new Date});return this.purchases.push(e),r(e).pipe(s(500))}update(a,e){let t=this.purchases.findIndex(i=>i.id===a);if(t===-1)throw new Error("Purchase invoice not found");return this.purchases[t]=u(n(n({},this.purchases[t]),e),{id:a,updatedAt:new Date}),r(this.purchases[t]).pipe(s(500))}delete(a){let e=this.purchases.findIndex(t=>t.id===a);return e===-1?r(!1).pipe(s(300)):(this.purchases.splice(e,1),r(!0).pipe(s(500)))}search(a){let e=a.toLowerCase();return r(this.purchases.filter(t=>t.invoiceNumber.toLowerCase().includes(e)||t.supplierId.toLowerCase().includes(e))).pipe(s(300))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=p({token:o,factory:o.\u0275fac,providedIn:"root"})};export{d as a};
