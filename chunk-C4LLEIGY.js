import{d as b}from"./chunk-J2A4D5WT.js";import{K as d,Q as h,f as m,i as u,y as p}from"./chunk-ILVQMZIM.js";import{a as l,b as c,c as i}from"./chunk-7CGTOI24.js";var f=class s{router=h(b);currentUserSubject=new m(null);currentUser$=this.currentUserSubject.asObservable();mockUsers=[{id:"1",email:"owner@pharmly.com",username:"owner",phone:"+1234567890",password:"password",role:"account_owner",fullName:"James Bond",avatarUrl:"https://ui-avatars.com/api/?name=James+Bond",pharmacies:[{id:"ph1",name:"Main Pharmacy",address:"123 Main St",phone:"+1234567890",email:"main@pharmly.com",primaryColor:"#166534",secondaryColor:"#22c55e",sidebarColor:"#14532d",rtlEnabled:!1},{id:"ph2",name:"Branch Pharmacy",address:"456 Branch Ave",phone:"+1234567891",email:"branch@pharmly.com",primaryColor:"#166534",secondaryColor:"#22c55e",sidebarColor:"#14532d",rtlEnabled:!1}]},{id:"2",email:"manager@pharmly.com",username:"manager",password:"password",role:"pharmacy_manager",fullName:"John Manager",pharmacyId:"ph1"},{id:"3",email:"staff@pharmly.com",username:"staff",password:"password",role:"pharmacy_staff",fullName:"Jane Staff",pharmacyId:"ph1"}];constructor(){let r=localStorage.getItem("currentUser");r&&this.currentUserSubject.next(JSON.parse(r))}login(r,e){let o=this.mockUsers.find(a=>(a.email===r||a.username===r||a.phone===r)&&a.password===e);if(o){let n=o,{password:a}=n,U=i(n,["password"]),t=c(l({},o),{password:""});return localStorage.setItem("currentUser",JSON.stringify(t)),this.currentUserSubject.next(t),u(t).pipe(p(500))}throw new Error("Invalid credentials")}logout(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null),this.router.navigate(["/login"])}getCurrentUser(){return this.currentUserSubject.value}isAuthenticated(){return this.currentUserSubject.value!==null}hasRole(r){return this.currentUserSubject.value?.role===r}hasAnyRole(r){let e=this.currentUserSubject.value;return e?r.includes(e.role):!1}static \u0275fac=function(e){return new(e||s)};static \u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})};export{f as a};
