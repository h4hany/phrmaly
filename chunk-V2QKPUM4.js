import{a as ve}from"./chunk-CUGV46X5.js";import{a as me}from"./chunk-PUVF5ECJ.js";import{a as O}from"./chunk-Y5QUESDN.js";import{a as ee,d as f,e as te,f as ie,h as ne,j as ae,k as re,l as oe,m as le,n as ce,t as pe,v as se,x as de}from"./chunk-VW37JDOU.js";import{a as ue}from"./chunk-YJWIIGXE.js";import{d as X}from"./chunk-QHH3SHC3.js";import{a as ge}from"./chunk-JO3IY5V3.js";import{a as he}from"./chunk-TLPU4UMA.js";import"./chunk-ACQN7LQS.js";import{a as Z,b as B}from"./chunk-7DC7YEPQ.js";import{$ as V,$a as a,$b as A,Bb as c,Cb as p,Ga as k,Ka as R,L as U,La as S,Nb as Q,Ra as m,S as M,Sa as N,Ta as I,Wa as C,Xa as K,Y as x,Ya as j,Z as _,Za as F,_ as P,_a as E,aa as W,ab as r,bb as b,db as w,eb as v,fa as z,fb as d,gb as $,hb as H,nb as l,ob as u,pb as g,qb as T,rb as Y,ua as G,xa as i,xb as J}from"./chunk-OKFD3A6M.js";import"./chunk-KAT7YFEL.js";var Ce=["*"],be=(o,t)=>t.number;function ye(o,t){if(o&1&&(a(0,"div",4)(1,"div",12),l(2),c(3,"translate"),r()()),o&2){let e=d();i(2),g(" ",p(3,1,e.errorMessage)," ")}}function Se(o,t){o&1&&(P(),a(0,"svg",15),b(1,"path",20),r())}function we(o,t){o&1&&(P(),a(0,"svg",15),b(1,"path",20),r())}function Pe(o,t){if(o&1&&(a(0,"span",16),l(1),r()),o&2){let e=d().$implicit;i(),g(" ",e.number," ")}}function Fe(o,t){if(o&1){let e=w();a(0,"div",13),v("click",function(){let s=x(e).$implicit,h=d();return _(h.canNavigateToStep(s.number)&&h.goToStep(s.number))}),a(1,"div",14),S(2,Se,2,0,":svg:svg",15)(3,we,2,0,":svg:svg",15)(4,Pe,2,1,"span",16),r(),a(5,"div",17)(6,"p",18),l(7),c(8,"translate"),r(),a(9,"p",19),l(10),c(11,"translate"),r()()()}if(o&2){let e=t.$implicit,n=d();I("cursor-pointer",n.canNavigateToStep(e.number)),i(),N("background",n.currentStep>=e.number?"var(--sidebar-bg)":"white")("border-color",n.currentStep>=e.number?"var(--sidebar-bg)":"#d1d5db"),I("bg-white",n.currentStep<e.number)("border-gray-300",n.currentStep<e.number)("scale-110",n.currentStep===e.number),i(),C(n.currentStep>e.number||e.completed?2:n.currentStep===e.number?3:4),i(4),N("color",n.currentStep===e.number?"var(--sidebar-active-text)":""),I("text-gray-900",n.currentStep>e.number||e.completed)("text-gray-500",n.currentStep<e.number&&!e.completed),i(),g(" ",p(8,21,e.title)," "),i(3),u(p(11,23,e.subtitle))}}var D=class o{translationService=M(Z);steps=[];currentStep=1;errorMessage="";allowStepNavigation=!0;stepChange=new z;isRTL=Q(()=>this.translationService.getCurrentLanguage()==="ar");getStepsForDisplay(){return this.isRTL()?[...this.steps].reverse():this.steps}getCurrentStepTitle(){return this.steps.find(e=>e.number===this.currentStep)?.title||""}getCurrentStepDescription(){return this.steps.find(e=>e.number===this.currentStep)?.subtitle||""}getProgressWidth(){return this.steps.length===0?"0%":`${(this.currentStep-1)/(this.steps.length-1)*100}%`}getProgressPosition(){return this.isRTL()?`${100-(this.currentStep-1)/(this.steps.length-1)*100}%`:"0"}canNavigateToStep(t){if(!this.allowStepNavigation)return!1;let e=this.steps.find(n=>n.number===t);return t<this.currentStep||e?.completed===!0}goToStep(t){this.canNavigateToStep(t)&&this.stepChange.emit(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=k({type:o,selectors:[["app-wizard"]],inputs:{steps:"steps",currentStep:"currentStep",errorMessage:"errorMessage",allowStepNavigation:"allowStepNavigation"},outputs:{stepChange:"stepChange"},ngContentSelectors:Ce,decls:18,vars:17,consts:[[1,"wizard-container"],[1,"mb-8","animate-fade-in"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"mb-6","animate-slide-down"],[1,"mb-12","animate-fade-in-up",2,"animation-delay","0.1s"],[1,"relative"],[1,"absolute","top-5","left-0","right-0","h-1","bg-gray-200","rounded-full"],[1,"absolute","top-5","h-1","rounded-full","transition-all","duration-700","ease-out"],[1,"relative","flex","justify-between"],[1,"flex","flex-col","items-center","group",3,"cursor-pointer"],[1,"rounded-2xl","shadow-xl","border","border-gray-100","overflow-hidden","animate-fade-in-up",2,"animation-delay","0.2s","background","var(--card-bg)"],[1,"bg-red-50","border","border-red-200","text-red-800","px-4","py-3","rounded-lg"],[1,"flex","flex-col","items-center","group",3,"click"],[1,"w-12","h-12","rounded-full","flex","items-center","justify-center","transition-all","duration-300","shadow-lg","border-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],[1,"text-lg","font-bold","text-gray-500"],[1,"mt-3","text-center"],[1,"text-sm","font-semibold","transition-colors"],[1,"text-xs","text-gray-500","mt-1","max-w-[120px]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M5 13l4 4L19 7"]],template:function(e,n){e&1&&($(),a(0,"div",0)(1,"div",1)(2,"h1",2),l(3),c(4,"translate"),r(),a(5,"p",3),l(6),c(7,"translate"),r()(),S(8,ye,4,3,"div",4),a(9,"div",5)(10,"div",6),b(11,"div",7)(12,"div",8),a(13,"div",9),F(14,Fe,12,25,"div",10,be),r()()(),a(16,"div",11),H(17),r()()),e&2&&(i(3),g(" ",p(4,13,n.getCurrentStepTitle())," "),i(3),g(" ",p(7,15,n.getCurrentStepDescription())," "),i(2),C(n.errorMessage?8:-1),i(4),N("width",n.getProgressWidth())("background","var(--sidebar-bg)")("left",n.isRTL()?"auto":"0")("right",n.isRTL()?"0":"auto"),i(),I("flex-row-reverse",n.isRTL()),i(),E(n.getStepsForDisplay()))},dependencies:[A,B],styles:[".wizard-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--page-bg)}","@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in-up{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slide-down{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-up .6s ease-out}.animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-down .3s ease-out}"]})};function Ee(o,t){if(o&1&&(b(0,"img",3),c(1,"translate")),o&2){let e=d();m("src",e.previewUrl,G)("alt",p(1,2,"fileInput.imagePreview"))}}function Me(o,t){o&1&&(a(0,"span",6),l(1,"\u{1F4C1}"),r(),a(2,"span",7),l(3),c(4,"translate"),r()),o&2&&(i(3),u(p(4,1,"fileInput.clickOrDragFile")))}function Ie(o,t){if(o&1&&(a(0,"div",5),l(1),r()),o&2){let e=d();i(),u(e.selectedFile.name)}}var q=class o extends O{accept=".pdf,.doc,.docx,.txt";selectedFile=null;isDragOver=!1;previewUrl=null;isImageFile=!1;onFileChange(t){let e=t.target;e.files&&e.files.length>0&&(this.selectedFile=e.files[0],this.checkIfImage(),this.onChange(this.selectedFile),this.fileSelected.emit(this.selectedFile))}onDragOver(t){this.disabled||(t.preventDefault(),t.stopPropagation(),this.isDragOver=!0)}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1}onDrop(t){if(this.disabled)return;t.preventDefault(),t.stopPropagation(),this.isDragOver=!1;let e=t.dataTransfer?.files;e&&e.length>0&&(this.selectedFile=e[0],this.checkIfImage(),this.onChange(this.selectedFile),this.fileSelected.emit(this.selectedFile))}checkIfImage(){if(!this.selectedFile){this.isImageFile=!1,this.previewUrl=null;return}let t=this.selectedFile.type;if(this.isImageFile=t.startsWith("image/"),this.isImageFile){let e=new FileReader;e.onload=n=>{this.previewUrl=n.target?.result},e.readAsDataURL(this.selectedFile)}else this.previewUrl=null}fileSelected=new z;writeValue(t){t==null?(this.selectedFile=null,this.previewUrl=null,this.isImageFile=!1):t instanceof File&&(this.selectedFile=t,this.checkIfImage())}static \u0275fac=(()=>{let t;return function(n){return(t||(t=W(o)))(n||o)}})();static \u0275cmp=k({type:o,selectors:[["app-file-upload"]],inputs:{accept:"accept"},outputs:{fileSelected:"fileSelected"},features:[J([{provide:ee,useExisting:U(()=>o),multi:!0}]),R],decls:7,vars:19,consts:[[3,"label","required","disabled","hasError","errorMessage","hint","inputId"],[1,"file-input-wrapper"],[1,"file-input-3",3,"dragover","dragleave","drop","for"],[1,"preview-image",3,"src","alt"],["type","file",3,"change","id","accept","disabled"],[1,"file-name"],[1,"file-icon"],[1,"file-text"]],template:function(e,n){e&1&&(a(0,"app-base-input",0)(1,"div",1)(2,"label",2),v("dragover",function(h){return n.onDragOver(h)})("dragleave",function(h){return n.onDragLeave(h)})("drop",function(h){return n.onDrop(h)}),S(3,Ee,2,4,"img",3)(4,Me,5,3),r(),a(5,"input",4),v("change",function(h){return n.onFileChange(h)}),r(),S(6,Ie,2,1,"div",5),r()()),e&2&&(m("label",n.label)("required",n.required)("disabled",n.disabled)("hasError",n.hasError)("errorMessage",n.errorMessage)("hint",n.hint)("inputId",n.inputId),i(2),I("disabled",n.disabled)("drag-over",n.isDragOver)("has-preview",n.previewUrl),m("for",n.inputId),i(),C(n.previewUrl&&n.isImageFile?3:4),i(2),m("id",n.inputId)("accept",n.accept)("disabled",n.disabled),i(),C(n.selectedFile&&!n.isImageFile?6:-1))},dependencies:[A,B,O],styles:[".file-input-wrapper[_ngcontent-%COMP%]{width:100%}input[type=file][_ngcontent-%COMP%]{display:none}.file-input-3[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background:#e3f4f50d;border:3px dashed var(--sidebar-bg);border-radius:12px;cursor:pointer;transition:all .3s ease;min-height:150px;position:relative;overflow:hidden}.file-input-3.has-preview[_ngcontent-%COMP%]{padding:0}.file-input-3.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.file-input-3[_ngcontent-%COMP%]:hover:not(.disabled){border-color:var(--sidebar-bg);background:#d9f2751a}.file-input-3.drag-over[_ngcontent-%COMP%]{border-color:var(--sidebar-bg);background:#d9f27526}.file-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:10px}.file-text[_ngcontent-%COMP%]{color:var(--sidebar-active-text);font-weight:500}.preview-image[_ngcontent-%COMP%]{width:100%;height:100%;min-height:150px;object-fit:contain;display:block}.file-name[_ngcontent-%COMP%]{margin-top:10px;color:var(--sidebar-active-text);font-size:.9rem;text-align:center}"]})};var L=(o,t)=>t.id;function ke(o,t){if(o&1){let e=w();a(0,"app-selectable-card",8),v("cardClick",function(){let s=x(e).$implicit,h=d(2);return _(h.selectPlan(s))}),a(1,"div",9)(2,"h3",10),l(3),r()(),a(4,"p",11),l(5),r(),a(6,"div",12)(7,"div",13),P(),a(8,"svg",14),b(9,"path",15),r(),l(10),c(11,"translate"),c(12,"translate"),r(),V(),a(13,"div",13),P(),a(14,"svg",14),b(15,"path",15),r(),l(16),c(17,"translate"),c(18,"translate"),r()(),V(),a(19,"div",16),l(20),a(21,"span",17),l(22),r()()()}if(o&2){let e=t.$implicit,n=d(2);m("selected",(n.selectedPlan==null?null:n.selectedPlan.id)===e.id),i(3),u(e.name),i(2),u(e.description),i(5),g(" ",e.maxPharmacies===-1?p(11,7,"account.create.unlimitedPharmacies"):e.maxPharmacies+" "+p(12,9,"account.create.pharmacies")," "),i(6),g(" ",e.maxStaff===-1?p(17,11,"account.create.unlimitedStaff"):e.maxStaff+" "+p(18,13,"account.create.staff")," "),i(4),g(" ",e.price,""),i(2),g("/",e.billingCycle,"")}}function Te(o,t){if(o&1){let e=w();a(0,"div",2)(1,"div",3),F(2,ke,23,15,"app-selectable-card",4,L),r(),a(4,"div",5)(5,"app-button",6),v("onClick",function(){x(e);let s=d();return _(s.onCancel())}),l(6),c(7,"translate"),r(),a(8,"app-button",7),v("onClick",function(){x(e);let s=d();return _(s.nextStep())}),l(9),c(10,"translate"),r()()()}if(o&2){let e=d();i(2),E(e.plans),i(4),g(" ",p(7,3,"common.cancel")," "),i(2),m("disabled",!e.selectedPlan),i(),g(" ",p(10,5,"common.next")," ")}}function Ae(o,t){if(o&1&&(a(0,"div",13),P(),a(1,"svg",14),b(2,"path",15),r(),l(3),r()),o&2){let e=t.$implicit;i(3),g(" ",e," ")}}function Be(o,t){if(o&1){let e=w();a(0,"app-selectable-card",8),v("cardClick",function(){let s=x(e).$implicit,h=d(2);return _(h.toggleModule(s))}),a(1,"div",9)(2,"h3",10),l(3),c(4,"translate"),r()(),a(5,"p",11),l(6),c(7,"translate"),r(),a(8,"div",12),F(9,Ae,4,1,"div",13,j),r(),a(11,"div",16),l(12),a(13,"span",17),l(14),c(15,"translate"),r()()()}if(o&2){let e=t.$implicit,n=d(2);m("selected",n.isModuleSelected(e)),i(3),u(p(4,5,e.nameKey)),i(3),u(p(7,7,e.descriptionKey)),i(3),E(e.capabilities),i(3),g(" ",e.pricePerMonth,""),i(2),g("/",p(15,9,"account.create.perMonth"),"")}}function Ve(o,t){if(o&1){let e=w();a(0,"div",2)(1,"div",18),F(2,Be,16,11,"app-selectable-card",4,L),r(),a(4,"div",5)(5,"app-button",6),v("onClick",function(){x(e);let s=d();return _(s.previousStep())}),l(6),c(7,"translate"),r(),a(8,"app-button",19),v("onClick",function(){x(e);let s=d();return _(s.nextStep())}),l(9),c(10,"translate"),r()()()}if(o&2){let e=d();i(2),E(e.modules),i(4),g(" ",p(7,2,"common.back")," "),i(3),g(" ",p(10,4,"common.next")," ")}}function ze(o,t){if(o&1){let e=w();a(0,"div",2)(1,"form",20)(2,"div",21),b(3,"app-text-input",22)(4,"app-text-input",23)(5,"app-text-input",24)(6,"app-text-input",25)(7,"app-text-input",26)(8,"app-text-input",27),r(),a(9,"div",21)(10,"app-file-upload",28),v("fileSelected",function(s){x(e);let h=d();return _(h.onContractFileChange(s))}),r(),a(11,"app-file-upload",28),v("fileSelected",function(s){x(e);let h=d();return _(h.onLogoFileChange(s))}),r()(),a(12,"div",5)(13,"app-button",6),v("onClick",function(){x(e);let s=d();return _(s.previousStep())}),l(14),c(15,"translate"),r(),a(16,"app-button",7),v("onClick",function(){x(e);let s=d();return _(s.nextStep())}),l(17),c(18,"translate"),r()()()()}if(o&2){let e=d();i(),m("formGroup",e.accountForm),i(2),m("label","account.create.accountName")("required",!0)("placeholder","account.create.accountNamePlaceholder"),i(),m("label","account.create.email")("required",!0)("placeholder","account.create.emailPlaceholder"),i(),m("label","account.create.username")("required",!0)("placeholder","account.create.usernamePlaceholder"),i(),m("label","account.create.password")("required",!0)("placeholder","account.create.passwordPlaceholder")("showPasswordToggle",!0),i(),m("label","account.create.phone")("required",!0)("placeholder","account.create.phonePlaceholder"),i(),m("label","account.create.website")("placeholder","account.create.websitePlaceholder"),i(2),m("label","account.create.contract")("accept",".pdf,.doc,.docx"),i(),m("label","account.create.logo")("accept","image/*"),i(3),g(" ",p(15,26,"common.back")," "),i(2),m("disabled",e.accountForm.invalid),i(),g(" ",p(18,28,"common.next")," ")}}function Ne(o,t){if(o&1){let e=w();a(0,"button",48),v("click",function(){x(e);let s=d().$index,h=d(2);return _(h.removePharmacy(s))}),P(),a(1,"svg",49),b(2,"path",50),r()()}}function De(o,t){if(o&1&&(a(0,"div",35)(1,"div",37)(2,"h4",38),l(3),c(4,"translate"),r(),S(5,Ne,3,0,"button",39),r(),a(6,"div",40),b(7,"app-text-input",41)(8,"app-text-input",41)(9,"app-text-input",41)(10,"app-text-input",41)(11,"app-text-input",41)(12,"app-text-input",42)(13,"app-text-input",42),r(),a(14,"div",43)(15,"h5",44),l(16),c(17,"translate"),r(),a(18,"div",45),b(19,"app-text-input",41)(20,"app-text-input",46)(21,"app-text-input",47),r()()()),o&2){let e=t.$index,n=d(2);m("formGroupName",e),i(3),T(" ",p(4,46,"account.create.pharmacy")," ",e+1," "),i(2),C(n.pharmaciesArray.length>1?5:-1),i(2),m("formControl",n.getPharmacyControl(e,"name"))("label","account.create.pharmacyName")("required",!0)("placeholder","account.create.pharmacyNamePlaceholder"),i(),m("formControl",n.getPharmacyControl(e,"address"))("label","account.create.address")("required",!0)("placeholder","account.create.addressPlaceholder"),i(),m("formControl",n.getPharmacyControl(e,"city"))("label","account.create.city")("required",!0)("placeholder","account.create.cityPlaceholder"),i(),m("formControl",n.getPharmacyControl(e,"area"))("label","account.create.area")("required",!0)("placeholder","account.create.areaPlaceholder"),i(),m("formControl",n.getPharmacyControl(e,"country"))("label","account.create.country")("required",!0)("placeholder","account.create.countryPlaceholder"),i(),m("formControl",n.getPharmacyControl(e,"lat"))("label","account.create.latitude")("required",!0)("placeholder","account.create.latitudePlaceholder"),i(),m("formControl",n.getPharmacyControl(e,"long"))("label","account.create.longitude")("required",!0)("placeholder","account.create.longitudePlaceholder"),i(3),g(" ",p(17,48,"account.create.pharmacyManager")," "),i(3),m("formControl",n.getManagerControl(e,"fullName"))("label","account.create.managerFullName")("required",!0)("placeholder","account.create.managerFullNamePlaceholder"),i(),m("formControl",n.getManagerControl(e,"email"))("label","account.create.managerEmail")("required",!0)("placeholder","account.create.managerEmailPlaceholder"),i(),m("formControl",n.getManagerControl(e,"password"))("label","account.create.managerPassword")("required",!0)("placeholder","account.create.managerPasswordPlaceholder")("showPasswordToggle",!0)}}function qe(o,t){if(o&1){let e=w();a(0,"div",2)(1,"div",29)(2,"h3",10),l(3),c(4,"translate"),r(),a(5,"app-button",30),v("onClick",function(){x(e);let s=d();return _(s.addPharmacy())}),P(),a(6,"svg",31),b(7,"path",32),r(),l(8),c(9,"translate"),r()(),V(),a(10,"form",33)(11,"div",34),F(12,De,22,50,"div",35,K),r()(),a(14,"div",36)(15,"app-button",6),v("onClick",function(){x(e);let s=d();return _(s.previousStep())}),l(16),c(17,"translate"),r(),a(18,"app-button",7),v("onClick",function(){x(e);let s=d();return _(s.nextStep())}),l(19),c(20,"translate"),r()()()}if(o&2){let e=d();i(3),u(p(4,6,"account.create.pharmacies")),i(5),g(" ",p(9,8,"account.create.addPharmacy")," "),i(2),m("formGroup",e.pharmaciesForm),i(2),E(e.pharmaciesArray.controls),i(4),g(" ",p(17,10,"common.back")," "),i(2),m("disabled",e.pharmaciesForm.invalid||e.pharmaciesArray.length===0),i(),g(" ",p(20,12,"common.next")," ")}}function Ke(o,t){if(o&1&&(a(0,"div",54)(1,"div")(2,"label",61),l(3),c(4,"translate"),r(),a(5,"p",66),l(6),r()(),a(7,"div")(8,"label",61),l(9),c(10,"translate"),r(),a(11,"p",66),l(12),r()()()),o&2){let e=d(2);i(3),u(p(4,5,"account.create.planName")),i(3),u(e.selectedPlan.name),i(3),u(p(10,7,"account.create.planPrice")),i(3),T("",e.selectedPlan.price,"/",e.selectedPlan.billingCycle,"")}}function Oe(o,t){if(o&1&&(a(0,"div",67)(1,"div")(2,"p",68),l(3),c(4,"translate"),r(),a(5,"p",69),l(6),c(7,"translate"),r()(),a(8,"p",66),l(9),c(10,"translate"),r()()),o&2){let e=t.$implicit;i(3),u(p(4,4,e.nameKey)),i(3),u(p(7,6,e.descriptionKey)),i(3),T("",e.pricePerMonth,"/",p(10,8,"account.create.perMonth"),"")}}function Le(o,t){if(o&1&&(a(0,"div",55),F(1,Oe,11,10,"div",67,L),r()),o&2){let e=d(2);i(),E(e.selectedModules)}}function Ue(o,t){o&1&&(a(0,"p",56),l(1),c(2,"translate"),r()),o&2&&(i(),u(p(2,1,"account.create.noModulesSelected")))}function We(o,t){if(o&1&&(a(0,"div",64)(1,"h4",70),l(2),c(3,"translate"),r(),a(4,"div",71)(5,"div")(6,"span",56),l(7),c(8,"translate"),r(),a(9,"span",72),l(10),r()(),a(11,"div")(12,"span",56),l(13),c(14,"translate"),r(),a(15,"span",72),l(16),r()(),a(17,"div")(18,"span",56),l(19),c(20,"translate"),r(),a(21,"span",72),l(22),r()(),a(23,"div")(24,"span",56),l(25),c(26,"translate"),r(),a(27,"span",72),l(28),r()()()()),o&2){let e=t.$index,n=d(2);i(2),Y(" ",p(3,11,"account.create.pharmacy")," ",e+1,": ",n.getPharmacyValue(e,"name")," "),i(5),g("",p(8,13,"account.create.address"),":"),i(3),u(n.getPharmacyValue(e,"address")),i(3),g("",p(14,15,"account.create.city"),":"),i(3),u(n.getPharmacyValue(e,"city")),i(3),g("",p(20,17,"account.create.managerFullName"),":"),i(3),u(n.getManagerValue(e,"fullName")),i(3),g("",p(26,19,"account.create.managerEmail"),":"),i(3),u(n.getManagerValue(e,"email"))}}function Ge(o,t){if(o&1){let e=w();a(0,"div",2)(1,"div",51)(2,"div",52)(3,"h3",53),l(4),c(5,"translate"),r(),S(6,Ke,13,9,"div",54),r(),a(7,"div",52)(8,"h3",53),l(9),c(10,"translate"),r(),S(11,Le,3,0,"div",55)(12,Ue,3,3,"p",56),r(),a(13,"div",57)(14,"div",58)(15,"h3",38),l(16),c(17,"translate"),r(),a(18,"p",59),l(19),a(20,"span",60),l(21),c(22,"translate"),r()()()(),a(23,"div",52)(24,"h3",53),l(25),c(26,"translate"),r(),a(27,"div",54)(28,"div")(29,"label",61),l(30),c(31,"translate"),r(),a(32,"p",62),l(33),r()(),a(34,"div")(35,"label",61),l(36),c(37,"translate"),r(),a(38,"p",62),l(39),r()(),a(40,"div")(41,"label",61),l(42),c(43,"translate"),r(),a(44,"p",62),l(45),r()(),a(46,"div")(47,"label",61),l(48),c(49,"translate"),r(),a(50,"p",62),l(51),r()()()(),a(52,"div",52)(53,"h3",53),l(54),c(55,"translate"),r(),a(56,"div",63),F(57,We,29,21,"div",64,K),r()()(),a(59,"div",36)(60,"app-button",6),v("onClick",function(){x(e);let s=d();return _(s.previousStep())}),l(61),c(62,"translate"),r(),a(63,"app-button",65),v("onClick",function(){x(e);let s=d();return _(s.createAccount())}),l(64),c(65,"translate"),r()()()}if(o&2){let e,n,s,h,y=d();i(4),u(p(5,22,"account.create.selectedPlan")),i(2),C(y.selectedPlan?6:-1),i(3),T("",p(10,24,"account.create.selectedModules")," (",y.selectedModules.length,")"),i(2),C(y.selectedModules.length>0?11:12),i(5),u(p(17,26,"account.create.totalMonthlyPrice")),i(3),u(y.getTotalMonthlyPrice()),i(2),g("/",p(22,28,"account.create.perMonth"),""),i(4),u(p(26,30,"account.create.accountInformation")),i(5),u(p(31,32,"account.create.accountName")),i(3),u((e=y.accountForm.get("name"))==null?null:e.value),i(3),u(p(37,34,"account.create.email")),i(3),u((n=y.accountForm.get("email"))==null?null:n.value),i(3),u(p(43,36,"account.create.username")),i(3),u((s=y.accountForm.get("username"))==null?null:s.value),i(3),u(p(49,38,"account.create.website")),i(3),u(((h=y.accountForm.get("website"))==null?null:h.value)||"-"),i(3),T(" ",p(55,40,"account.create.pharmacies")," (",y.pharmaciesArray.length,") "),i(3),E(y.pharmaciesArray.controls),i(4),g(" ",p(62,42,"common.back")," "),i(2),m("loading",y.loading),i(),g(" ",p(65,44,"account.create.createAccount")," ")}}var _e=class o{fb=M(se);router=M(X);subscriptionsService=M(he);accountsService=M(ge);currentStep=1;selectedPlan=null;selectedModules=[];plans=[];modules=[];loading=!1;errorMessage="";contractFile=null;logoFile=null;accountForm;pharmaciesForm;wizardSteps=[{number:1,title:"account.create.wizard.step1",subtitle:"account.create.wizard.step1Subtitle",completed:!1},{number:2,title:"account.create.wizard.step2Modules",subtitle:"account.create.wizard.step2ModulesSubtitle",completed:!1},{number:3,title:"account.create.wizard.step3",subtitle:"account.create.wizard.step3Subtitle",completed:!1},{number:4,title:"account.create.wizard.step4",subtitle:"account.create.wizard.step4Subtitle",completed:!1},{number:5,title:"account.create.wizard.step5",subtitle:"account.create.wizard.step5Subtitle",completed:!1}];ngOnInit(){this.initializeForms(),this.loadPlans(),this.initializeModules()}initializeForms(){this.accountForm=this.fb.group({name:["PharmaCorp Inc.",[f.required]],email:["admin@pharmacorp.com",[f.required,f.email]],username:["pharmacorp_admin",[f.required]],password:["SecurePass123!",[f.required,f.minLength(8)]],phone:["+201234567890",[f.required]],website:["https://pharmacorp.com",[]]}),this.pharmaciesForm=this.fb.group({pharmacies:this.fb.array([])}),this.addPharmacy()}loadPlans(){this.subscriptionsService.getPlans({page:1,pageSize:100,isActive:!0}).subscribe({next:t=>{this.plans=t.data},error:t=>{console.error("Error loading plans:",t)}})}initializeModules(){this.modules=[{id:"inventory",name:"Inventory",nameKey:"account.create.modules.inventory.name",description:"Comprehensive inventory management system with real-time tracking, stock alerts, and automated reordering.",descriptionKey:"account.create.modules.inventory.description",capabilities:["Real-time stock tracking","Automated reorder points","Batch and expiry management","Multi-location inventory","Stock movement history"],capabilitiesKey:"account.create.modules.inventory.capabilities",pricePerMonth:150},{id:"hr",name:"HR & People",nameKey:"account.create.modules.hr.name",description:"Complete human resources management including employee records, scheduling, attendance, and payroll integration.",descriptionKey:"account.create.modules.hr.description",capabilities:["Employee management","Shift scheduling","Attendance tracking","Payroll integration","Performance reviews"],capabilitiesKey:"account.create.modules.hr.capabilities",pricePerMonth:200},{id:"finance",name:"Finance",nameKey:"account.create.modules.finance.name",description:"Financial management tools for accounting, invoicing, payments, and comprehensive financial reporting.",descriptionKey:"account.create.modules.finance.description",capabilities:["Accounting & bookkeeping","Invoice generation","Payment processing","Financial reports","Tax management"],capabilitiesKey:"account.create.modules.finance.capabilities",pricePerMonth:180},{id:"automation",name:"Automation",nameKey:"account.create.modules.automation.name",description:"Automate repetitive tasks, workflows, and business processes to increase efficiency and reduce manual work.",descriptionKey:"account.create.modules.automation.description",capabilities:["Workflow automation","Task scheduling","Rule-based actions","Notification automation","Integration automation"],capabilitiesKey:"account.create.modules.automation.capabilities",pricePerMonth:120},{id:"loyalty",name:"Loyalty",nameKey:"account.create.modules.loyalty.name",description:"Customer loyalty program management with points, rewards, discounts, and customer engagement tools.",descriptionKey:"account.create.modules.loyalty.description",capabilities:["Points system","Rewards management","Customer segmentation","Promotional campaigns","Loyalty analytics"],capabilitiesKey:"account.create.modules.loyalty.capabilities",pricePerMonth:100},{id:"api_access",name:"API Access",nameKey:"account.create.modules.apiAccess.name",description:"Full API access for custom integrations, third-party connections, and advanced system integrations.",descriptionKey:"account.create.modules.apiAccess.description",capabilities:["RESTful API access","Webhook support","API documentation","Rate limiting","Custom integrations"],capabilitiesKey:"account.create.modules.apiAccess.capabilities",pricePerMonth:250},{id:"ai_features",name:"AI Features",nameKey:"account.create.modules.aiFeatures.name",description:"Artificial intelligence powered features including demand forecasting, smart recommendations, and predictive analytics.",descriptionKey:"account.create.modules.aiFeatures.description",capabilities:["Demand forecasting","Smart recommendations","Predictive analytics","Fraud detection","Chatbot support"],capabilitiesKey:"account.create.modules.aiFeatures.capabilities",pricePerMonth:300},{id:"analytics",name:"Analytics",nameKey:"account.create.modules.analytics.name",description:"Advanced analytics and business intelligence with customizable dashboards, reports, and data visualization.",descriptionKey:"account.create.modules.analytics.description",capabilities:["Custom dashboards","Data visualization","Trend analysis","KPI tracking","Export capabilities"],capabilitiesKey:"account.create.modules.analytics.capabilities",pricePerMonth:170},{id:"reports",name:"Reports",nameKey:"account.create.modules.reports.name",description:"Comprehensive reporting system with pre-built and custom reports for all aspects of your pharmacy operations.",descriptionKey:"account.create.modules.reports.description",capabilities:["Pre-built reports","Custom report builder","Scheduled reports","Export to PDF/Excel","Report templates"],capabilitiesKey:"account.create.modules.reports.capabilities",pricePerMonth:90},{id:"multi_branch",name:"Multi-Branch",nameKey:"account.create.modules.multiBranch.name",description:"Manage multiple pharmacy branches from a single platform with centralized control and branch-specific settings.",descriptionKey:"account.create.modules.multiBranch.description",capabilities:["Multi-location management","Centralized inventory","Branch-specific settings","Inter-branch transfers","Unified reporting"],capabilitiesKey:"account.create.modules.multiBranch.capabilities",pricePerMonth:220}]}toggleModule(t){let e=this.selectedModules.findIndex(n=>n.id===t.id);e>=0?this.selectedModules.splice(e,1):this.selectedModules.push(t)}isModuleSelected(t){return this.selectedModules.some(e=>e.id===t.id)}getTotalMonthlyPrice(){let t=0;this.selectedPlan&&(this.selectedPlan.billingCycle==="annual"?t=this.selectedPlan.price/12:t=this.selectedPlan.price);let e=this.selectedModules.reduce((n,s)=>n+s.pricePerMonth,0);return t+e}selectPlan(t){this.selectedPlan=t}get pharmaciesArray(){return this.pharmaciesForm.get("pharmacies")}addPharmacy(){let t=this.fb.group({name:["Main Pharmacy",[f.required]],address:["123 Main Street",[f.required]],city:["Cairo",[f.required]],area:["Downtown",[f.required]],country:["Egypt",[f.required]],lat:[30.0444,[f.required]],long:[31.2357,[f.required]],manager:this.fb.group({fullName:["Ahmed Mohamed",[f.required]],email:["ahmed@pharmacy.com",[f.required,f.email]],password:["ManagerPass123!",[f.required,f.minLength(8)]]})});this.pharmaciesArray.push(t)}removePharmacy(t){this.pharmaciesArray.removeAt(t)}getPharmacyControl(t,e){return this.pharmaciesArray.at(t).get(e)}getManagerControl(t,e){return this.pharmaciesArray.at(t).get("manager")?.get(e)}getPharmacyValue(t,e){return this.pharmaciesArray.at(t).get(e)?.value||""}getManagerValue(t,e){return this.pharmaciesArray.at(t).get("manager")?.get(e)?.value||""}onStepChange(t){this.canNavigateToStep(t)&&(this.currentStep=t,this.updateWizardSteps())}canNavigateToStep(t){return t===1?!0:t===2?!!this.selectedPlan:t===3?!!this.selectedPlan:t===4?this.accountForm.valid:t===5?this.pharmaciesForm.valid&&this.pharmaciesArray.length>0:!1}updateWizardSteps(){this.wizardSteps.forEach(t=>{t.number<this.currentStep&&(t.completed=!0)})}nextStep(){if(this.currentStep===1&&!this.selectedPlan){this.errorMessage="account.create.validationError";return}if(this.currentStep===3&&this.accountForm.invalid){this.accountForm.markAllAsTouched(),this.errorMessage="account.create.validationError";return}if(this.currentStep===4&&(this.pharmaciesForm.invalid||this.pharmaciesArray.length===0)){this.pharmaciesForm.markAllAsTouched(),this.errorMessage="account.create.validationError";return}if(this.errorMessage="",this.currentStep<this.wizardSteps.length){let t=this.wizardSteps.find(e=>e.number===this.currentStep);t&&(t.completed=!0),this.currentStep++,this.updateWizardSteps()}}previousStep(){this.currentStep>1&&(this.errorMessage="",this.currentStep--)}createAccount(){if(!this.selectedPlan||this.accountForm.invalid||this.pharmaciesForm.invalid){this.errorMessage="account.create.validationError";return}this.loading=!0,this.errorMessage="";let t={name:this.accountForm.get("name")?.value,email:this.accountForm.get("email")?.value,username:this.accountForm.get("username")?.value,password:this.accountForm.get("password")?.value,website:this.accountForm.get("website")?.value,planId:this.selectedPlan.id,moduleIds:this.selectedModules.map(e=>e.id),pharmacies:this.pharmaciesArray.value.map(e=>({name:e.name,address:e.address,city:e.city,area:e.area,country:e.country,lat:parseFloat(e.lat),long:parseFloat(e.long),manager:{fullName:e.manager.fullName,email:e.manager.email,password:e.manager.password,role:"pharmacy_manager"}}))};console.log("Creating account:",t),setTimeout(()=>{this.loading=!1,this.router.navigate(["/super-admin/accounts"])},2e3)}onCancel(){this.router.navigate(["/super-admin/accounts"])}onContractFileChange(t){this.contractFile=t}onLogoFileChange(t){this.logoFile=t}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=k({type:o,selectors:[["app-create-account"]],decls:7,vars:8,consts:[[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[3,"stepChange","steps","currentStep","errorMessage"],[1,"p-8"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[3,"selected"],[1,"flex","items-center","justify-end","gap-4","pt-8","border-t-2","border-gray-100"],["variant","outline",3,"onClick"],["variant","primary",3,"onClick","disabled"],[3,"cardClick","selected"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-gray-600","mb-4"],[1,"space-y-2","mb-4"],[1,"flex","items-center","text-sm","text-gray-700"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","text-green-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","font-normal","text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6","mb-8"],["variant","primary",3,"onClick"],[1,"space-y-6",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["formControlName","name",3,"label","required","placeholder"],["formControlName","email","type","email",3,"label","required","placeholder"],["formControlName","username",3,"label","required","placeholder"],["formControlName","password","type","password",3,"label","required","placeholder","showPasswordToggle"],["formControlName","phone","type","tel",3,"label","required","placeholder"],["formControlName","website","type","text",3,"label","placeholder"],[3,"fileSelected","label","accept"],[1,"mb-6","flex","items-center","justify-between"],["variant","primary","size","sm",3,"onClick"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[3,"formGroup"],["formArrayName","pharmacies",1,"space-y-6"],[1,"border-2","border-gray-200","rounded-xl","p-6",3,"formGroupName"],[1,"flex","items-center","justify-end","gap-4","pt-8","border-t-2","border-gray-100","mt-8"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-900"],["type","button",1,"text-red-500","hover:text-red-700"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[3,"formControl","label","required","placeholder"],["type","number","step","0.000001",3,"formControl","label","required","placeholder"],[1,"border-t-2","border-gray-200","pt-6"],[1,"text-md","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["type","email",3,"formControl","label","required","placeholder"],["type","password",3,"formControl","label","required","placeholder","showPasswordToggle"],["type","button",1,"text-red-500","hover:text-red-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"space-y-6"],[1,"border-2","border-gray-200","rounded-xl","p-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-2","gap-4"],[1,"space-y-3","mb-4"],[1,"text-gray-600"],[1,"border-2","border-gray-200","rounded-xl","p-6","bg-gray-50"],[1,"flex","items-center","justify-between"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-lg","font-normal","text-gray-600"],[1,"text-sm","font-medium","text-gray-600"],[1,"text-gray-900"],[1,"space-y-4"],[1,"border","border-gray-200","rounded-lg","p-4"],["variant","primary",3,"onClick","loading"],[1,"text-lg","font-bold","text-gray-900"],[1,"flex","items-center","justify-between","p-3","bg-gray-50","rounded-lg"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"font-semibold","text-gray-900","mb-2"],[1,"grid","grid-cols-2","gap-2","text-sm"],[1,"text-gray-900","ml-2"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"app-wizard",1),v("stepChange",function(h){return n.onStepChange(h)}),S(2,Te,11,7,"div",2)(3,Ve,11,6,"div",2)(4,ze,19,30,"div",2)(5,qe,21,14,"div",2)(6,Ge,66,46,"div",2),r()()),e&2&&(i(),m("steps",n.wizardSteps)("currentStep",n.currentStep)("errorMessage",n.errorMessage),i(),C(n.currentStep===1?2:-1),i(),C(n.currentStep===2?3:-1),i(),C(n.currentStep===3?4:-1),i(),C(n.currentStep===4?5:-1),i(),C(n.currentStep===5?6:-1))},dependencies:[A,de,ne,te,ie,pe,ae,re,ce,oe,le,D,me,ue,B,ve,q],encapsulation:2})};export{_e as CreateAccountComponent};
