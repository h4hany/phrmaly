import{a as w}from"./chunk-MLJSMWVS.js";import{a as q}from"./chunk-2OFNFJK6.js";import{a as X}from"./chunk-EW5N2AGP.js";import"./chunk-EMAOCJ4C.js";import{a as J}from"./chunk-FRIZRQKD.js";import"./chunk-BYXBJQAS.js";import{a as S,b as k}from"./chunk-P3MRTKB5.js";import{c as H,d as C,e as N,f as U}from"./chunk-B4EO6REF.js";import{Da as f,Ia as g,Jb as j,Na as b,Oa as c,Pa as _,Q as u,Qa as V,Ta as y,W as F,Wa as T,X as A,Xa as G,Xb as h,Y as O,Ya as a,Z as R,Za as o,_a as l,ab as $,bb as x,cb as m,ja as z,kb as d,lb as v,mb as M,va as i,wb as D,yb as s,zb as p}from"./chunk-Z4T7VGFQ.js";import{a as L,b as P}from"./chunk-7CGTOI24.js";var Q=[{key:"overview",label:"nav.overview",icon:"layout-grid",items:[{path:"/dashboard",label:"nav.dashboard",icon:"layout-grid",exact:!0}],collapsedByDefault:!1,order:1},{key:"operations",label:"nav.operations",icon:"briefcase",items:[{path:"/invoices",label:"nav.sales",icon:"receipt"},{path:"/patients",label:"nav.customers",icon:"user-heart"},{path:"/pharmacy-staff",label:"nav.pharmacyStaff",icon:"id-badge"}],collapsedByDefault:!0,order:2},{key:"people",label:"nav.people",icon:"users",items:[{path:"/pharmacy-staff",label:"nav.staffProfiles",icon:"id-badge"},{path:"/people/attendance",label:"nav.attendance",icon:"clock"},{path:"/people/payroll",label:"nav.payroll",icon:"credit-card"},{path:"/people/performance",label:"nav.performance",icon:"chart"},{path:"/people/training",label:"nav.training",icon:"graduation-cap"}],collapsedByDefault:!0,order:3},{key:"inventory",label:"nav.inventory",icon:"package",items:[{path:"/drugs",label:"nav.products",icon:"pill-bottle"},{path:"/bundles",label:"nav.bundles",icon:"package"},{path:"/inventory/alerts",label:"nav.inventoryAlerts",icon:"bell-warning"},{path:"/inventory/transfers",label:"nav.transfers",icon:"arrows-left-right"},{path:"/inventory/map",label:"nav.pharmacyMap",icon:"map-grid"}],collapsedByDefault:!0,order:4},{key:"procurement",label:"nav.procurement",icon:"factory",items:[{path:"/suppliers",label:"nav.suppliers",icon:"factory"},{path:"/purchases",label:"nav.orders",icon:"clipboard-list"}],collapsedByDefault:!0,order:5},{key:"finance",label:"nav.finance",icon:"credit-card",items:[{path:"/payments",label:"nav.payments",icon:"credit-card"},{path:"/audit-logs",label:"nav.auditLogs",icon:"shield-check"},{path:"/inventory/movements",label:"nav.drugMovements",icon:"activity-pulse"}],collapsedByDefault:!0,order:6},{key:"growth",label:"nav.growth",icon:"trending-up",items:[{path:"/growth/referrals",label:"nav.referrals",icon:"handshake"}],collapsedByDefault:!0,order:7},{key:"system-console",label:"nav.systemConsole",icon:"shield-check",items:[{path:"/system/dashboard",label:"nav.platformDashboard",icon:"layout-grid"},{path:"/system/accounts",label:"nav.accounts",icon:"users"},{path:"/system/subscriptions",label:"nav.subscriptions",icon:"credit-card"},{path:"/system/catalog",label:"nav.globalDrugs",icon:"pill-bottle"},{path:"/system/support",label:"nav.supportTickets",icon:"help-circle"},{path:"/system/feature-flags",label:"nav.platformFeatures",icon:"toggle-sliders"},{path:"/system/risk",label:"nav.accountRisk",icon:"shield-check"},{path:"/system/admins",label:"nav.adminUsers",icon:"id-badge"},{path:"/system/analytics",label:"nav.platformAnalytics",icon:"chart"}],collapsedByDefault:!0,order:7,roles:["super_admin","support_admin","sales_admin","finance_admin"]},{key:"system",label:"nav.system",icon:"settings",items:[{path:"/system/automation",label:"nav.automation",icon:"magic-wand"},{path:"/system/migration",label:"nav.dataImport",icon:"database-arrow-down"},{path:"/system/permissions",label:"nav.accessControl",icon:"lock-key"},{path:"/system/features",label:"nav.featureFlags",icon:"toggle-sliders"},{path:"/settings",label:"nav.settings",icon:"gear"}],collapsedByDefault:!0,order:8},{key:"support",label:"nav.support",icon:"help-circle",items:[{path:"/reports",label:"nav.helpSupport",icon:"help-circle"}],collapsedByDefault:!1,order:9}];var Z=r=>({exact:r}),te=(r,t)=>t.key,ie=(r,t)=>t.path;function ae(r,t){if(r&1&&(a(0,"li")(1,"a",21),s(2,"translate"),l(3,"app-icon",22),a(4,"span"),d(5),s(6,"translate"),o()()()),r&2){let e,n=m(2).$implicit;i(),c("routerLink",n.items[0].path)("routerLinkActive","nav-item-active")("routerLinkActiveOptions",D(11,Z,(e=n.items[0].exact)!==null&&e!==void 0?e:!1)),b("aria-label",p(2,7,n.items[0].label)),i(2),c("name",n.items[0].icon)("color","currentColor"),i(2),v(p(6,9,n.items[0].label))}}function ne(r,t){if(r&1&&(a(0,"li")(1,"a",21),s(2,"translate"),l(3,"app-icon",22),a(4,"span"),d(5),s(6,"translate"),o()()()),r&2){let e,n=t.$implicit;i(),c("routerLink",n.path)("routerLinkActive","nav-item-active")("routerLinkActiveOptions",D(11,Z,(e=n.exact)!==null&&e!==void 0?e:!1)),b("aria-label",p(2,7,n.label)),i(2),c("name",n.icon)("color","currentColor"),i(2),v(p(6,9,n.label))}}function re(r,t){if(r&1&&(a(0,"ul",25),T(1,ne,7,13,"li",null,ie),o()),r&2){let e=m(3).$implicit,n=m();i(),G(n.getVisibleItems(e))}}function oe(r,t){if(r&1){let e=$();a(0,"li")(1,"button",23),s(2,"translate"),x("click",function(){F(e);let B=m(2).$implicit,ee=m();return A(ee.toggleGroup(B.key))}),a(3,"div",2),l(4,"app-icon",22),a(5,"span"),d(6),s(7,"translate"),o()(),l(8,"app-icon",24),o(),g(9,re,3,0,"ul",25),o()}if(r&2){let e=m(2).$implicit,n=m();i(),b("aria-expanded",!n.isGroupCollapsed(e.key))("aria-label",p(2,9,e.label)),i(3),c("name",e.icon)("color","currentColor"),i(2),v(p(7,11,e.label)),i(2),V("rotate-180",!n.isGroupCollapsed(e.key)),c("color","currentColor"),i(),y(n.isGroupCollapsed(e.key)?-1:9)}}function le(r,t){if(r&1&&g(0,ae,7,13,"li")(1,oe,10,13,"li"),r&2){let e=m().$implicit;y(e.items.length===1?0:1)}}function se(r,t){if(r&1&&g(0,le,2,1),r&2){let e=t.$implicit,n=m();y(n.shouldShowGroup(e)?0:-1)}}var I=class r{router=u(C);authService=u(J);platformContext=u(X);translationService=u(S);groups=Q;collapsedGroups=z({});visibleGroups=j(()=>{let t=this.platformContext.isPlatformMode();return this.groups.filter(e=>this.isGroupVisible(e,t))});ngOnInit(){let t={};this.groups.forEach(e=>{t[e.key]=e.collapsedByDefault??!0}),this.collapsedGroups.set(t)}toggleGroup(t){this.collapsedGroups.update(e=>P(L({},e),{[t]:!e[t]}))}isGroupCollapsed(t){return this.collapsedGroups()[t]??!1}isGroupVisible(t,e){if(e)return t.key==="system-console";if(t.key==="system-console")return!1;if(t.roles&&t.roles.length>0){let n=this.authService.getCurrentUser();return n?t.roles.includes(n.role):!1}return!0}isItemVisible(t){if(t.roles&&t.roles.length>0){let e=this.authService.getCurrentUser();return e?t.roles.includes(e.role):!1}return!0}getVisibleItems(t){return t.items.filter(e=>this.isItemVisible(e))}shouldShowGroup(t){return this.getVisibleItems(t).length>0}logout(){this.authService.logout(),this.router.navigate(["/login"])}get isRTL(){return this.translationService.getCurrentLanguage()==="ar"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-sidebar"]],decls:39,vars:29,consts:[[1,"w-64","h-full","rounded-[var(--radius-lg)]","flex","flex-col","relative","overflow-hidden","overflow-x-hidden",2,"background-color","var(--sidebar-bg)"],[1,"p-6","border-b","relative","z-10",2,"border-color","rgba(227, 244, 245, 0.1)"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-lg","flex","items-center","justify-center",2,"background-color","var(--primary-bg)"],[1,"text-xl","font-bold",2,"color","var(--primary-text)"],[1,"text-xl","font-bold",2,"color","var(--sidebar-text)"],[1,"flex-1","overflow-y-auto","overflow-x-hidden","p-4","relative","z-10"],[1,"absolute","inset-0","pointer-events-none",2,"opacity","0.15"],[1,"absolute"],["src","icons/medicine.svg","alt","",1,"w-24","h-24",2,"filter","brightness(0) invert(1)","opacity","0.4"],[1,"absolute",2,"transform","translateX(-50%)"],[1,"space-y-2","relative","z-10"],[1,"p-4","border-t","relative","z-10",2,"border-color","rgba(227, 244, 245, 0.1)"],[1,"rounded-[var(--radius-md)]","p-4",2,"background-color","rgba(227, 244, 245, 0.1)"],[1,"flex","items-center","gap-2","mb-2"],["name","lock","size","20",3,"color"],[1,"font-semibold","text-sm",2,"color","var(--sidebar-text)"],[1,"text-xs","mb-3",2,"color","var(--sidebar-text)","opacity","0.8"],[1,"w-full","rounded-[var(--radius-md)]","px-4","py-2","text-sm","font-medium","transition-opacity","hover:opacity-90",2,"background-color","var(--primary-bg)","color","var(--primary-text)"],[1,"w-full","flex","items-center","gap-3","px-4","py-3","rounded-[var(--radius-md)]","transition-colors","hover:opacity-80",2,"color","var(--sidebar-text)",3,"click"],["name","logout","size","20",3,"color"],["tabindex","0",1,"flex","items-center","gap-3","px-4","py-3","rounded-[var(--radius-md)]","transition-colors",2,"color","var(--sidebar-text)",3,"routerLink","routerLinkActive","routerLinkActiveOptions"],["size","20",3,"name","color"],["type","button",1,"w-full","flex","items-center","justify-between","gap-3","px-4","py-3","rounded-[var(--radius-md)]","transition-colors","hover:opacity-80",2,"color","var(--sidebar-text)",3,"click"],["name","chevron-down","size","16",1,"transition-transform","duration-200",3,"color"],[1,"mt-2","ml-4","space-y-1","group-transition"]],template:function(e,n){e&1&&(a(0,"aside",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),d(5,"P"),o()(),a(6,"span",5),d(7,"Pharmly"),o()()(),a(8,"nav",6)(9,"div",7)(10,"div",8),l(11,"img",9),o(),a(12,"div",8),l(13,"img",9),o(),a(14,"div",10),l(15,"img",9),o()(),a(16,"ul",11),T(17,se,1,1,null,null,te),o()(),a(19,"div",12)(20,"div",13)(21,"div",14),l(22,"app-icon",15),a(23,"span",16),d(24),s(25,"translate"),o()(),a(26,"p",17),d(27),s(28,"translate"),o(),a(29,"button",18),d(30),s(31,"translate"),o()()(),a(32,"div",12)(33,"button",19),s(34,"translate"),x("click",function(){return n.logout()}),l(35,"app-icon",20),a(36,"span"),d(37),s(38,"translate"),o()()()()),e&2&&(i(10),_("top",15,"%")("left",-5,"%"),i(2),_("top",50,"%")("right",-5,"%"),i(2),_("bottom",15,"%")("left",50,"%"),i(3),G(n.visibleGroups()),i(5),c("color","var(--sidebar-text)"),i(2),v(p(25,19,"upgrade.title")),i(3),M(" ",p(28,21,"upgrade.description")," "),i(3),M(" ",p(31,23,"upgrade.button")," "),i(3),b("aria-label",p(34,25,"nav.logout")),i(2),c("color","currentColor"),i(2),v(p(38,27,"nav.logout")))},dependencies:[h,N,U,k,w],styles:[".nav-item-active[_ngcontent-%COMP%]{background-color:var(--sidebar-active-bg)!important;color:var(--sidebar-active-text)!important}.nav-item-active[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:var(--sidebar-active-text)!important}.group-transition[_ngcontent-%COMP%]{transition:all .3s ease-in-out}"]})};function pe(r,t){if(r&1&&(a(0,"p",3),d(1),s(2,"translate"),o()),r&2){let e=m();i(),v(p(2,1,e.subtitle))}}var E=class r{themeService=u(q);translationService=u(S);title="nav.dashboard";subtitle;toggleLanguage(){this.themeService.toggleLanguage()}get currentLanguage(){return this.themeService.getCurrentLanguage()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-header"]],inputs:{title:"title",subtitle:"subtitle"},decls:32,vars:20,consts:[[1,"bg-white","rounded-[var(--radius-lg)]","px-6","py-4"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"flex","items-center","gap-4"],[1,"relative"],["type","button",1,"flex","items-center","gap-2","px-3","py-2","border","border-gray-300","rounded-[var(--radius-md)]","text-sm","font-medium","text-gray-700","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"],["type","text",1,"pl-10","pr-4","py-2","border","border-gray-300","rounded-[var(--radius-md)]","text-sm","focus:outline-none","focus:ring-2","focus:ring-[var(--primary-bg)]/20","focus:border-[var(--primary-bg)]",2,"background-color","white",3,"placeholder"],["name","search","size","20",1,"absolute","left-3","top-2.5","text-gray-400",3,"color"],[1,"relative","p-2","text-gray-600","hover:text-gray-900"],["name","bell","size","24",3,"color"],["aria-hidden","true",1,"absolute","top-1","right-1","w-2","h-2","bg-red-500","rounded-full"],[1,"flex","items-center","gap-3"],["aria-hidden","true",1,"w-10","h-10","bg-gray-300","rounded-full"],[1,"text-left"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],["name","chevron-down","size","16",3,"color"]],template:function(e,n){e&1&&(a(0,"header",0)(1,"div",1)(2,"div")(3,"h1",2),d(4),s(5,"translate"),o(),g(6,pe,3,3,"p",3),o(),a(7,"div",4)(8,"div",5)(9,"button",6),s(10,"translate"),x("click",function(){return n.toggleLanguage()}),O(),a(11,"svg",7),l(12,"path",8),o(),R(),a(13,"span"),d(14),o()()(),a(15,"div",5),l(16,"input",9),s(17,"translate"),s(18,"translate"),l(19,"app-icon",10),o(),a(20,"button",11),s(21,"translate"),l(22,"app-icon",12)(23,"span",13),o(),a(24,"div",14),l(25,"div",15),a(26,"div",16)(27,"div",17),d(28,"James Bond"),o(),a(29,"div",18),d(30,"@james.bond"),o()(),l(31,"app-icon",19),o()()()()),e&2&&(i(4),v(p(5,10,n.title)),i(2),y(n.subtitle?6:-1),i(3),b("aria-label",p(10,12,"header.language")),i(5),v(n.currentLanguage==="en"?"EN":"AR"),i(2),c("placeholder",p(17,14,"header.search")),b("aria-label",p(18,16,"header.search")),i(3),c("color","currentColor"),i(),b("aria-label",p(21,18,"header.notifications")),i(2),c("color","currentColor"),i(9),c("color","#9CA3AF"))},dependencies:[h,k,w],encapsulation:2})};var K=class r{router=u(C);currentTitle="nav.dashboard";subtitle;ngOnInit(){this.updateTitle(),this.router.events.subscribe(()=>{this.updateTitle()})}updateTitle(){let t=this.router.url.split("/")[1]||"dashboard",e={dashboard:"nav.dashboard",patients:"patient.list",drugs:"drug.list",purchases:"nav.orders",invoices:"nav.sales",payments:"nav.payments",suppliers:"nav.suppliers",reports:"nav.helpSupport",settings:"nav.settings",inventory:"inventory.alerts",bundles:"nav.bundles","pharmacy-staff":"nav.pharmacyStaff","audit-logs":"audit.title","inventory-movements":"movements.title","inventory-transfers":"transfers.title","inventory-map":"map.title","growth-referrals":"referrals.title","system-migration":"migration.title","system-automation":"automation.title","system-permissions":"permissions.title","system-features":"featureFlags.title"};this.currentTitle=e[t]||"nav.dashboard",this.subtitle=t==="dashboard"?"dashboard.subtitle":void 0}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-main-layout"]],decls:8,vars:2,consts:[[1,"flex","h-screen",2,"background-color","var(--page-bg)"],[1,"py-4","pl-4","flex-shrink-0"],[1,"flex-1","flex","flex-col","overflow-hidden"],[1,"pt-4",2,"padding-left","var(--spacing-page)","padding-right","var(--spacing-page)"],[3,"title","subtitle"],[1,"flex-1","overflow-y-auto",2,"padding","var(--spacing-page)","background-color","var(--page-bg)"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1),l(2,"app-sidebar"),o(),a(3,"div",2)(4,"div",3),l(5,"app-header",4),o(),a(6,"main",5),l(7,"router-outlet"),o()()()),e&2&&(i(5),c("title",n.currentTitle)("subtitle",n.subtitle))},dependencies:[h,H,I,E],encapsulation:2})};export{K as MainLayoutComponent};
