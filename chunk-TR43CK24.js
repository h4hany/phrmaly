import{a as ne}from"./chunk-J55IG6XL.js";import{a as ae}from"./chunk-EKSGP2SL.js";import{a as te,b as ie}from"./chunk-4PK2EB7K.js";import"./chunk-Y5QUESDN.js";import{c as $,d as y,e as W,f as Y,h as J,k as K,n as Q,t as U,v as X,w as Z,x as ee}from"./chunk-VW37JDOU.js";import{b as D,d as j}from"./chunk-QHH3SHC3.js";import"./chunk-KPWAPXFF.js";import{a as R,b as A}from"./chunk-7DC7YEPQ.js";import{$ as h,$a as e,$b as z,Bb as r,Cb as o,Ga as q,La as v,Ra as s,S as C,Sa as H,Ta as S,Wa as g,_ as m,ab as a,bb as p,eb as G,nb as d,ob as u,pb as f,xa as i}from"./chunk-OKFD3A6M.js";import"./chunk-KAT7YFEL.js";function oe(l,n){l&1&&(e(0,"p",12),d(1),r(2,"translate"),a()),l&2&&(i(),u(o(2,1,"validation.fullNameRequired")))}function le(l,n){l&1&&(e(0,"p",12),d(1),r(2,"translate"),a()),l&2&&(i(),u(o(2,1,"validation.dateOfBirthRequired")))}function de(l,n){l&1&&(e(0,"p",12),d(1),r(2,"translate"),a()),l&2&&(i(),u(o(2,1,"validation.phoneRequired")))}function pe(l,n){l&1&&(e(0,"p",12),d(1),r(2,"translate"),a()),l&2&&(i(),u(o(2,1,"validation.emailInvalid")))}function se(l,n){l&1&&(e(0,"p",12),d(1),r(2,"translate"),a()),l&2&&(i(),u(o(2,1,"validation.cityRequired")))}function me(l,n){l&1&&(e(0,"p",12),d(1),r(2,"translate"),a()),l&2&&(i(),u(o(2,1,"validation.areaRequired")))}function ue(l,n){l&1&&(e(0,"p",12),d(1),r(2,"translate"),a()),l&2&&(i(),u(o(2,1,"validation.streetRequired")))}function ce(l,n){l&1&&(m(),e(0,"svg",36),p(1,"circle",37)(2,"path",38),a())}function he(l,n){l&1&&(m(),e(0,"svg",10),p(1,"path",39),a())}var re=class l{fb=C(X);router=C(j);route=C(D);patientsService=C(ne);translationService=C(R);translate(n){return this.translationService.translate(n)}patientForm;loading=!1;errorMessage="";isEdit=!1;patientId=null;genderOptions=[{value:"male",label:"form.gender.male"},{value:"female",label:"form.gender.female"}];ngOnInit(){this.patientId=this.route.snapshot.paramMap.get("id"),this.isEdit=!!this.patientId,this.patientForm=this.fb.group({fullName:["",[y.required]],dateOfBirth:["",[y.required]],gender:["",[y.required]],phone:["",[y.required]],email:["",[y.email]],occupation:[""],city:["",[y.required]],area:["",[y.required]],street:["",[y.required]],addressNotes:[""],medicalNotes:[""]}),this.isEdit&&this.patientId&&this.loadPatient()}loadPatient(){this.patientsService.getById(this.patientId).subscribe({next:n=>{n&&this.patientForm.patchValue({fullName:n.fullName,dateOfBirth:this.formatDateForInput(n.dateOfBirth),gender:n.gender,phone:n.phone,email:n.email||"",occupation:n.occupation||"",city:n.address.city,area:n.address.area,street:n.address.street,addressNotes:n.address.notes||"",medicalNotes:n.medicalNotes||""})},error:n=>{this.errorMessage=this.translate("error.loadPatient")}})}onSubmit(){if(this.patientForm.valid){this.loading=!0,this.errorMessage="";let n=this.patientForm.value,c={fullName:n.fullName,dateOfBirth:new Date(n.dateOfBirth),gender:n.gender,phone:n.phone,email:n.email||void 0,occupation:n.occupation||void 0,address:{city:n.city,area:n.area,street:n.street,notes:n.addressNotes||void 0},medicalNotes:n.medicalNotes||void 0};(this.isEdit?this.patientsService.update(this.patientId,c):this.patientsService.create(c)).subscribe({next:()=>{this.router.navigate(["/patients"])},error:b=>{this.errorMessage=b.message||this.translate("error.savePatient"),this.loading=!1}})}else Object.keys(this.patientForm.controls).forEach(n=>{this.patientForm.get(n)?.markAsTouched()})}onCancel(){this.router.navigate(["/patients"])}formatDateForInput(n){let c=new Date(n),t=c.getFullYear(),b=String(c.getMonth()+1).padStart(2,"0"),x=String(c.getDate()).padStart(2,"0");return`${t}-${b}-${x}`}static \u0275fac=function(c){return new(c||l)};static \u0275cmp=q({type:l,selectors:[["app-patient-form"]],decls:139,vars:102,consts:[[3,"title","description","errorMessage"],[1,"p-8",3,"ngSubmit","formGroup"],[3,"title"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"group"],[1,"block","text-sm","font-semibold","text-gray-700","mb-2"],[1,"text-red-500","ml-1"],[1,"relative"],["type","text","formControlName","fullName","onfocus","this.style.borderColor='var(--sidebar-bg)'; this.style.boxShadow='0 0 0 4px rgba(0, 48, 50, 0.1)';","onblur","this.style.borderColor=this.classList.contains('border-red-500') ? '#ef4444' : '#e5e7eb'; this.style.boxShadow='none';",1,"w-full","px-4","py-3.5","pl-12","border-2","border-gray-200","rounded-xl","text-sm","bg-white","focus:outline-none","transition-all","duration-200","hover:border-gray-300",3,"placeholder"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-gray-400","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"mt-1","text-xs","text-red-500"],["type","date","formControlName","dateOfBirth","onfocus","this.style.borderColor='var(--sidebar-bg)'; this.style.boxShadow='0 0 0 4px rgba(0, 48, 50, 0.1)';","onblur","this.style.borderColor=this.classList.contains('border-red-500') ? '#ef4444' : '#e5e7eb'; this.style.boxShadow='none';",1,"w-full","px-4","py-3.5","pl-12","border-2","border-gray-200","rounded-xl","text-sm","bg-white","focus:outline-none","transition-all","duration-200","hover:border-gray-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["formControlName","gender",3,"label","required","radioOptions","hasError","errorMessage"],["type","tel","formControlName","phone","onfocus","this.style.borderColor='var(--sidebar-bg)'; this.style.boxShadow='0 0 0 4px rgba(0, 48, 50, 0.1)';","onblur","this.style.borderColor=this.classList.contains('border-red-500') ? '#ef4444' : '#e5e7eb'; this.style.boxShadow='none';",1,"w-full","px-4","py-3.5","pl-12","border-2","border-gray-200","rounded-xl","text-sm","bg-white","focus:outline-none","transition-all","duration-200","hover:border-gray-300",3,"placeholder"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],["type","email","formControlName","email","onfocus","this.style.borderColor='var(--sidebar-bg)'; this.style.boxShadow='0 0 0 4px rgba(0, 48, 50, 0.1)';","onblur","this.style.borderColor=this.classList.contains('border-red-500') ? '#ef4444' : '#e5e7eb'; this.style.boxShadow='none';",1,"w-full","px-4","py-3.5","pl-12","border-2","border-gray-200","rounded-xl","text-sm","bg-white","focus:outline-none","transition-all","duration-200","hover:border-gray-300",3,"placeholder"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["type","text","formControlName","occupation","onfocus","this.style.borderColor='var(--sidebar-bg)'; this.style.boxShadow='0 0 0 4px rgba(0, 48, 50, 0.1)';","onblur","this.style.borderColor='#e5e7eb'; this.style.boxShadow='none';",1,"w-full","px-4","py-3.5","pl-12","border-2","border-gray-200","rounded-xl","text-sm","bg-white","focus:outline-none","transition-all","duration-200","hover:border-gray-300",3,"placeholder"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["type","text","formControlName","city","onfocus","this.style.borderColor='var(--sidebar-bg)'; this.style.boxShadow='0 0 0 4px rgba(0, 48, 50, 0.1)';","onblur","this.style.borderColor=this.classList.contains('border-red-500') ? '#ef4444' : '#e5e7eb'; this.style.boxShadow='none';",1,"w-full","px-4","py-3.5","pl-12","border-2","border-gray-200","rounded-xl","text-sm","bg-white","focus:outline-none","transition-all","duration-200","hover:border-gray-300",3,"placeholder"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["type","text","formControlName","area","onfocus","this.style.borderColor='var(--sidebar-bg)'; this.style.boxShadow='0 0 0 4px rgba(0, 48, 50, 0.1)';","onblur","this.style.borderColor=this.classList.contains('border-red-500') ? '#ef4444' : '#e5e7eb'; this.style.boxShadow='none';",1,"w-full","px-4","py-3.5","pl-12","border-2","border-gray-200","rounded-xl","text-sm","bg-white","focus:outline-none","transition-all","duration-200","hover:border-gray-300",3,"placeholder"],[1,"group","md:col-span-2"],["type","text","formControlName","street","onfocus","this.style.borderColor='var(--sidebar-bg)'; this.style.boxShadow='0 0 0 4px rgba(0, 48, 50, 0.1)';","onblur","this.style.borderColor=this.classList.contains('border-red-500') ? '#ef4444' : '#e5e7eb'; this.style.boxShadow='none';",1,"w-full","px-4","py-3.5","pl-12","border-2","border-gray-200","rounded-xl","text-sm","bg-white","focus:outline-none","transition-all","duration-200","hover:border-gray-300",3,"placeholder"],["formControlName","addressNotes","rows","3","onfocus","this.style.borderColor='var(--sidebar-bg)'; this.style.boxShadow='0 0 0 4px rgba(0, 48, 50, 0.1)';","onblur","this.style.borderColor='#e5e7eb'; this.style.boxShadow='none';",1,"w-full","px-4","py-3.5","pl-12","border-2","border-gray-200","rounded-xl","text-sm","bg-white","focus:outline-none","transition-all","duration-200","hover:border-gray-300","resize-none",3,"placeholder"],[1,"absolute","left-4","top-4","text-gray-400","pointer-events-none"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["formControlName","medicalNotes","rows","4","onfocus","this.style.borderColor='var(--sidebar-bg)'; this.style.boxShadow='0 0 0 4px rgba(0, 48, 50, 0.1)';","onblur","this.style.borderColor='#e5e7eb'; this.style.boxShadow='none';",1,"w-full","px-4","py-3.5","pl-12","border-2","border-gray-200","rounded-xl","text-sm","bg-white","focus:outline-none","transition-all","duration-200","hover:border-gray-300","resize-none",3,"placeholder"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"flex","items-center","justify-end","gap-4","pt-8","border-t-2","border-gray-100"],["type","button",1,"px-6","py-3","border-2","border-gray-300","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-50","hover:border-gray-400","transition-all","duration-200",3,"click"],["type","submit",1,"px-6","py-3","rounded-xl","font-semibold","hover:shadow-xl","hover:scale-105","active:scale-95","disabled:opacity-50","disabled:cursor-not-allowed","disabled:hover:scale-100","disabled:hover:shadow-none","transition-all","duration-200","flex","items-center","gap-2",3,"disabled"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(c,t){if(c&1&&(e(0,"app-modern-form-wrapper",0)(1,"form",1),G("ngSubmit",function(){return t.onSubmit()}),e(2,"app-form-section",2)(3,"div",3)(4,"div",4)(5,"label",5),d(6),r(7,"translate"),e(8,"span",6),d(9,"*"),a()(),e(10,"div",7),p(11,"input",8),r(12,"translate"),e(13,"div",9),m(),e(14,"svg",10),p(15,"path",11),a()()(),v(16,oe,3,3,"p",12),a(),h(),e(17,"div",4)(18,"label",5),d(19),r(20,"translate"),e(21,"span",6),d(22,"*"),a()(),e(23,"div",7),p(24,"input",13),e(25,"div",9),m(),e(26,"svg",10),p(27,"path",14),a()()(),v(28,le,3,3,"p",12),a(),h(),e(29,"div",4),p(30,"app-radio-input",15),a(),e(31,"div",4)(32,"label",5),d(33),r(34,"translate"),e(35,"span",6),d(36,"*"),a()(),e(37,"div",7),p(38,"input",16),r(39,"translate"),e(40,"div",9),m(),e(41,"svg",10),p(42,"path",17),a()()(),v(43,de,3,3,"p",12),a(),h(),e(44,"div",4)(45,"label",5),d(46),r(47,"translate"),a(),e(48,"div",7),p(49,"input",18),r(50,"translate"),e(51,"div",9),m(),e(52,"svg",10),p(53,"path",19),a()()(),v(54,pe,3,3,"p",12),a(),h(),e(55,"div",4)(56,"label",5),d(57),r(58,"translate"),a(),e(59,"div",7),p(60,"input",20),r(61,"translate"),e(62,"div",9),m(),e(63,"svg",10),p(64,"path",21),a()()()()()(),h(),e(65,"app-form-section",2)(66,"div",3)(67,"div",4)(68,"label",5),d(69),r(70,"translate"),e(71,"span",6),d(72,"*"),a()(),e(73,"div",7),p(74,"input",22),r(75,"translate"),e(76,"div",9),m(),e(77,"svg",10),p(78,"path",23)(79,"path",24),a()()(),v(80,se,3,3,"p",12),a(),h(),e(81,"div",4)(82,"label",5),d(83),r(84,"translate"),e(85,"span",6),d(86,"*"),a()(),e(87,"div",7),p(88,"input",25),r(89,"translate"),e(90,"div",9),m(),e(91,"svg",10),p(92,"path",23)(93,"path",24),a()()(),v(94,me,3,3,"p",12),a(),h(),e(95,"div",26)(96,"label",5),d(97),r(98,"translate"),e(99,"span",6),d(100,"*"),a()(),e(101,"div",7),p(102,"input",27),r(103,"translate"),e(104,"div",9),m(),e(105,"svg",10),p(106,"path",23)(107,"path",24),a()()(),v(108,ue,3,3,"p",12),a(),h(),e(109,"div",26)(110,"label",5),d(111),r(112,"translate"),a(),e(113,"div",7),p(114,"textarea",28),r(115,"translate"),e(116,"div",29),m(),e(117,"svg",10),p(118,"path",30),a()()()()()(),h(),e(119,"app-form-section",2)(120,"div",4)(121,"label",5),d(122),r(123,"translate"),a(),e(124,"div",7),p(125,"textarea",31),r(126,"translate"),e(127,"div",29),m(),e(128,"svg",10),p(129,"path",32),a()()()()(),h(),e(130,"div",33)(131,"button",34),G("click",function(){return t.onCancel()}),d(132),r(133,"translate"),a(),e(134,"button",35),v(135,ce,3,0,":svg:svg",36)(136,he,2,0,":svg:svg",10),d(137),r(138,"translate"),a()()()()),c&2){let b,x,_,F,w,E,B,N,M,k,I,P,V,T,O,L;s("title",t.isEdit?"form.editPatient":"form.addPatient")("description",t.isEdit?"form.editPatientDescription":"form.addPatientDescription")("errorMessage",t.errorMessage),i(),s("formGroup",t.patientForm),i(),s("title","patient.personalInfo"),i(4),f(" ",o(7,60,"patient.fullName")," "),i(5),S("border-red-500",((b=t.patientForm.get("fullName"))==null?null:b.invalid)&&((b=t.patientForm.get("fullName"))==null?null:b.touched)),s("placeholder",o(12,62,"placeholder.fullName")),i(5),g((x=t.patientForm.get("fullName"))!=null&&x.invalid&&((x=t.patientForm.get("fullName"))!=null&&x.touched)?16:-1),i(3),f(" ",o(20,64,"patient.dateOfBirth")," "),i(5),S("border-red-500",((_=t.patientForm.get("dateOfBirth"))==null?null:_.invalid)&&((_=t.patientForm.get("dateOfBirth"))==null?null:_.touched)),i(4),g((F=t.patientForm.get("dateOfBirth"))!=null&&F.invalid&&((F=t.patientForm.get("dateOfBirth"))!=null&&F.touched)?28:-1),i(2),s("label","patient.gender")("required",!0)("radioOptions",t.genderOptions)("hasError",!!((w=t.patientForm.get("gender"))!=null&&w.invalid&&((w=t.patientForm.get("gender"))!=null&&w.touched)))("errorMessage",(E=t.patientForm.get("gender"))!=null&&E.invalid&&((E=t.patientForm.get("gender"))!=null&&E.touched)?"validation.genderRequired":void 0),i(3),f(" ",o(34,66,"patient.phone")," "),i(5),S("border-red-500",((B=t.patientForm.get("phone"))==null?null:B.invalid)&&((B=t.patientForm.get("phone"))==null?null:B.touched)),s("placeholder",o(39,68,"placeholder.phone")),i(5),g((N=t.patientForm.get("phone"))!=null&&N.invalid&&((N=t.patientForm.get("phone"))!=null&&N.touched)?43:-1),i(3),u(o(47,70,"patient.email")),i(3),S("border-red-500",((M=t.patientForm.get("email"))==null?null:M.invalid)&&((M=t.patientForm.get("email"))==null?null:M.touched)),s("placeholder",o(50,72,"placeholder.email")),i(5),g((k=t.patientForm.get("email"))!=null&&k.invalid&&((k=t.patientForm.get("email"))!=null&&k.touched)?54:-1),i(3),u(o(58,74,"patient.occupation")),i(3),s("placeholder",o(61,76,"form.selectOrType")),i(5),s("title","patient.addressInfo"),i(4),f(" ",o(70,78,"patient.city")," "),i(5),S("border-red-500",((I=t.patientForm.get("city"))==null?null:I.invalid)&&((I=t.patientForm.get("city"))==null?null:I.touched)),s("placeholder",o(75,80,"form.selectOrType")),i(6),g((P=t.patientForm.get("city"))!=null&&P.invalid&&((P=t.patientForm.get("city"))!=null&&P.touched)?80:-1),i(3),f(" ",o(84,82,"patient.area")," "),i(5),S("border-red-500",((V=t.patientForm.get("area"))==null?null:V.invalid)&&((V=t.patientForm.get("area"))==null?null:V.touched)),s("placeholder",o(89,84,"form.selectOrType")),i(6),g((T=t.patientForm.get("area"))!=null&&T.invalid&&((T=t.patientForm.get("area"))!=null&&T.touched)?94:-1),i(3),f(" ",o(98,86,"patient.street")," "),i(5),S("border-red-500",((O=t.patientForm.get("street"))==null?null:O.invalid)&&((O=t.patientForm.get("street"))==null?null:O.touched)),s("placeholder",o(103,88,"placeholder.street")),i(6),g((L=t.patientForm.get("street"))!=null&&L.invalid&&((L=t.patientForm.get("street"))!=null&&L.touched)?108:-1),i(3),u(o(112,90,"patient.notes")),i(3),s("placeholder",o(115,92,"placeholder.addressNotes")),i(5),s("title","patient.medicalInfo"),i(3),u(o(123,94,"patient.medicalNotes")),i(3),s("placeholder",o(126,96,"placeholder.medicalNotes")),i(7),f(" ",o(133,98,"common.cancel")," "),i(2),H("background","var(--primary-bg)")("color","var(--primary-text)"),s("disabled",t.patientForm.invalid||t.loading),i(),g(t.loading?135:136),i(2),f(" ",o(138,100,t.isEdit?"form.updatePatient":"form.createPatient")," ")}},dependencies:[z,ee,J,$,W,Y,U,K,Q,Z,te,ie,ae,A],encapsulation:2})};export{re as PatientFormComponent};
