import{a as E}from"./chunk-Y5QUESDN.js";import{a as W,c as $,e as U,g as J,t as K,w as X}from"./chunk-VW37JDOU.js";import{a as Z}from"./chunk-ACQN7LQS.js";import{b as Y}from"./chunk-7DC7YEPQ.js";import{$a as r,$b as G,Bb as C,Cb as v,Ga as P,Ka as T,L as k,La as _,Qa as N,Ra as h,Ta as M,Wa as m,X as S,Y as u,Z as d,Za as L,_ as g,_a as D,aa as F,ab as l,bb as f,db as O,eb as y,fa as b,fb as s,jb as I,kb as A,la as w,lb as V,nb as x,ob as z,pb as R,qb as B,ub as q,vb as H,wb as Q,xa as a,xb as j}from"./chunk-OKFD3A6M.js";var te=["input"],ne=["container"];function oe(o,t){return this.getOptionValue(t)}function ie(o,t){if(o&1&&(r(0,"div",4),f(1,"app-icon",8),l()),o&2){let n=s();a(),h("name",n.prefixIcon)("size",n.iconSize)("color","currentColor")}}function re(o,t){o&1&&(r(0,"div",4),g(),r(1,"svg",9),f(2,"path",10),l()())}function ae(o,t){o&1&&(r(0,"div",6),g(),r(1,"svg",9),f(2,"path",11),l()())}function le(o,t){if(o&1&&f(0,"app-icon",18),o&2){let n=s().$implicit;h("name",n.icon)}}function se(o,t){o&1&&(g(),r(0,"svg",19),f(1,"path",20),l())}function pe(o,t){if(o&1){let n=O();r(0,"button",16),y("click",function(){let i=u(n).$implicit,p=s(3);return d(p.selectOption(i))})("mouseenter",function(i){u(n);let p=s(3);return d(p.onOptionHover(i))})("mouseleave",function(i){u(n);let p=s(3);return d(p.onOptionLeave(i))}),r(1,"div",17),_(2,le,1,1,"app-icon",18)(3,se,2,0,":svg:svg",19),r(4,"span"),x(5),C(6,"translate"),l()()()}if(o&2){let n=t.$implicit,e=s(3);a(2),m(n.icon?2:e.defaultIcon?3:-1),a(3),z(v(6,2,e.getOptionLabel(n)))}}function ue(o,t){if(o&1&&L(0,pe,7,4,"button",15,oe,!0),o&2){let n=s(2);D(n.filteredOptions())}}function de(o,t){if(o&1&&(r(0,"div",13),x(1),C(2,"translate"),l()),o&2){let n=s(2);a(),R(" ",v(2,1,n.noDataMessage)," ")}}function ce(o,t){if(o&1){let n=O();r(0,"button",21),y("click",function(){u(n);let i=s(2);return d(i.onAddNew.emit(i.inputValue))}),r(1,"div",17),g(),r(2,"svg",22),f(3,"path",23),l(),x(4),C(5,"translate"),l()()}if(o&2){let n=s(2);a(4),B(" ",v(5,2,n.addNewLabel),": ",n.inputValue," ")}}function me(o,t){if(o&1&&(r(0,"div",7)(1,"div",12),_(2,ue,2,0)(3,de,3,3,"div",13)(4,ce,6,4,"button",14),l()()),o&2){let n=s();a(2),m(n.filteredOptions().length>0?2:n.showNoDataMessage&&!n.allowAddNew?3:-1),a(2),m(n.allowAddNew&&n.inputValue.trim()&&n.filteredOptions().length===0?4:-1)}}var ee=class o extends E{placeholder="";name;readonly=!1;prefixIcon;iconSize=20;options=[];defaultIcon=!0;allowAddNew=!1;showNoDataMessage=!0;noDataMessage="common.noData";addNewLabel="common.addNew";filterFunction;displayFunction;optionSelected=new b;inputChanged=new b;onAddNew=new b;inputRef;containerRef;inputValue="";isOpen=w(!1);isFocused=w(!1);filteredOptions=w([]);selectedOption=null;ngOnInit(){super.ngOnInit(),this.options.length>0&&this.filteredOptions.set([...this.options]),document.addEventListener("click",this.handleClickOutside)}ngOnChanges(t){super.ngOnChanges(t),t.serverError&&(this.hasError=!!this.serverError||this.hasError),t.options&&this.filteredOptions.set([...this.options])}ngOnDestroy(){document.removeEventListener("click",this.handleClickOutside)}handleClickOutside=t=>{this.containerRef&&!this.containerRef.nativeElement.contains(t.target)&&(this.isOpen.set(!1),this.isFocused.set(!1))};onInputChange(t){this.inputValue=t,this.inputChanged.emit(t),this.filterOptions(t),this.isOpen.set(!0),this.onChangeCallback(this.selectedOption?.value||null)}onAutocompleteInput(t){let n=t.target.value;this.inputValue=n,this.inputChanged.emit(n),this.filterOptions(n),this.isOpen.set(!0),this.onChangeCallback(this.selectedOption?.value||null)}onFocus(){this.isFocused.set(!0),this.isOpen.set(!0),this.filterOptions(this.inputValue)}onBlur(){super.onBlur(),this.isFocused.set(!1),setTimeout(()=>{this.isFocused()||this.isOpen.set(!1)},200)}filterOptions(t){if(!t.trim()){this.filteredOptions.set([...this.options]);return}let n=t.toLowerCase();this.filterFunction?this.filteredOptions.set(this.options.filter(e=>this.filterFunction(e,n))):this.filteredOptions.set(this.options.filter(e=>this.getOptionLabel(e).toLowerCase().includes(n)))}selectOption(t){this.selectedOption=t,this.inputValue=this.getOptionLabel(t),this.value=t.value,this.isOpen.set(!1),this.isFocused.set(!1),this.onChangeCallback(t.value),this.onTouchedCallback(),this.optionSelected.emit(t)}getOptionLabel(t){return this.displayFunction?this.displayFunction(t):t.label}getOptionValue(t){return t.value}onOptionHover(t){let n=t.currentTarget;n.style.backgroundColor="rgba(0, 48, 50, 0.1)",n.style.borderLeftColor="var(--sidebar-bg)"}onOptionLeave(t){let n=t.currentTarget;n.style.backgroundColor="",n.style.borderLeftColor="transparent"}writeValue(t){if(super.writeValue(t),t){let n=this.options.find(e=>e.value===t);n?(this.selectedOption=n,this.inputValue=this.getOptionLabel(n),this.value=t):(this.selectedOption=null,this.inputValue="",this.value="")}else this.selectedOption=null,this.inputValue="",this.value=""}static \u0275fac=(()=>{let t;return function(e){return(t||(t=F(o)))(e||o)}})();static \u0275cmp=P({type:o,selectors:[["app-autocomplete-input"]],viewQuery:function(n,e){if(n&1&&(I(te,5),I(ne,5)),n&2){let i;A(i=V())&&(e.inputRef=i.first),A(i=V())&&(e.containerRef=i.first)}},inputs:{placeholder:"placeholder",name:"name",readonly:"readonly",prefixIcon:"prefixIcon",iconSize:"iconSize",options:"options",defaultIcon:"defaultIcon",allowAddNew:"allowAddNew",showNoDataMessage:"showNoDataMessage",noDataMessage:"noDataMessage",addNewLabel:"addNewLabel",filterFunction:"filterFunction",displayFunction:"displayFunction"},outputs:{optionSelected:"optionSelected",inputChanged:"inputChanged",onAddNew:"onAddNew"},features:[j([{provide:W,useExisting:k(()=>o),multi:!0}]),T,S],decls:10,vars:32,consts:[["container",""],["input",""],[3,"label","required","disabled","hasError","errorMessage","hint","inputId","serverError"],[1,"input-container"],[1,"input-prefix-icon"],["type","text",1,"input-field",3,"ngModelChange","blur","focus","input","id","ngModel","placeholder","disabled","readonly","required"],[1,"input-suffix-icon","autocomplete-arrow"],[1,"autocomplete-dropdown"],[3,"name","size","color"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"autocomplete-dropdown-content"],[1,"autocomplete-no-data"],["type","button",1,"autocomplete-add-new"],["type","button",1,"autocomplete-option"],["type","button",1,"autocomplete-option",3,"click","mouseenter","mouseleave"],[1,"flex","items-center"],["size","16",1,"mr-2","text-gray-400",3,"name"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["type","button",1,"autocomplete-add-new",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"]],template:function(n,e){if(n&1){let i=O();r(0,"app-base-input",2)(1,"div",3,0),_(3,ie,2,3,"div",4)(4,re,3,0,"div",4),r(5,"input",5,1),C(7,"translate"),Q("ngModelChange",function(c){return u(i),H(e.inputValue,c)||(e.inputValue=c),d(c)}),y("ngModelChange",function(c){return u(i),d(e.onInputChange(c))})("blur",function(){return u(i),d(e.onBlur())})("focus",function(){return u(i),d(e.onFocus())})("input",function(c){return u(i),d(e.onAutocompleteInput(c))}),l(),_(8,ae,3,0,"div",6),l(),_(9,me,5,2,"div",7),l()}n&2&&(h("label",e.label)("required",e.required)("disabled",e.disabled)("hasError",e.hasError||!!e.serverError)("errorMessage",e.serverError||e.errorMessage)("hint",e.hint)("inputId",e.inputId)("serverError",e.serverError),a(),M("has-icon",e.prefixIcon)("has-suffix",e.options.length>0)("autocomplete-mode",!0),a(2),m(e.prefixIcon?3:4),a(2),M("has-error",e.hasError||!!e.serverError)("has-prefix",!0)("has-suffix",e.options.length>0),h("id",e.inputId),q("ngModel",e.inputValue),h("placeholder",v(7,30,e.placeholder))("disabled",e.disabled)("readonly",e.readonly)("required",e.required),N("name",e.name||null),a(3),m(e.options.length>0?8:-1),a(),m(e.isOpen()&&(e.filteredOptions().length>0||e.showNoDataMessage||e.allowAddNew&&e.inputValue.trim())?9:-1))},dependencies:[G,X,$,U,K,J,Y,Z,E],styles:[".input-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-container.has-icon[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{padding-left:3.5rem}.input-container.has-suffix[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{padding-right:3rem}.input-prefix-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#9ca3af;pointer-events:none;z-index:1;display:flex;align-items:center;justify-content:center}.input-suffix-icon[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:#9ca3af;pointer-events:none;z-index:1}.autocomplete-arrow[_ngcontent-%COMP%]{pointer-events:none}.input-field[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;border:2px solid rgb(229,231,235);border-radius:.75rem;font-size:.875rem;background-color:#fff;color:#111827;transition:all .2s ease;font-family:inherit}.input-field.has-prefix[_ngcontent-%COMP%]{padding-left:3.5rem}.input-field[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--sidebar-bg, rgb(0, 48, 50));box-shadow:0 0 0 4px #0030321a}.input-field[_ngcontent-%COMP%]:hover:not(:disabled):not(:read-only){border-color:#d1d5db}.input-field.has-error[_ngcontent-%COMP%]{border-color:#ef4444}.input-field.has-error[_ngcontent-%COMP%]:focus{border-color:#ef4444;box-shadow:0 0 0 4px #ef44441a}.input-field[_ngcontent-%COMP%]:disabled, .input-field[readonly][_ngcontent-%COMP%]{background-color:#f9fafb;color:#9ca3af;cursor:not-allowed;border-color:#e5e7eb}.autocomplete-dropdown[_ngcontent-%COMP%]{position:absolute;z-index:20;margin-top:.5rem;width:100%;background:#fff;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;max-height:16rem;border-radius:.75rem;border:1px solid rgb(243,244,246);overflow:hidden;animation:_ngcontent-%COMP%_slide-down .2s ease-out}@keyframes _ngcontent-%COMP%_slide-down{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.autocomplete-dropdown-content[_ngcontent-%COMP%]{padding:.5rem 0;max-height:16rem;overflow-y:auto}.autocomplete-option[_ngcontent-%COMP%]{display:block;width:100%;text-align:left;padding:.75rem 1rem;font-size:.875rem;transition:all .2s;cursor:pointer;border-left:4px solid transparent;color:#374151;background:transparent;border-top:none;border-right:none;border-bottom:none}.autocomplete-option[_ngcontent-%COMP%]:hover{background-color:#0030321a;border-left-color:var(--sidebar-bg)}.autocomplete-no-data[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.875rem;color:#6b7280}.autocomplete-add-new[_ngcontent-%COMP%]{display:block;width:100%;text-align:left;padding:.75rem 1rem;font-size:.875rem;font-weight:600;transition:all .2s;cursor:pointer;color:#16a34a;background:transparent;border:none;border-left:4px solid transparent}.autocomplete-add-new[_ngcontent-%COMP%]:hover{background-color:#f0fdf4;border-left-color:#16a34a}"]})};export{ee as a};
