import{a as o}from"./chunk-DG5RLGZG.js";import{L as i,R as n,g as c}from"./chunk-W6WRXJJ4.js";var h=class a{authService=n(o);currentPharmacySubject=new c(null);currentPharmacy$=this.currentPharmacySubject.asObservable();constructor(){let r=this.authService.getCurrentUser();if(r){if(r.role==="account_owner"&&r.pharmacies&&r.pharmacies.length>0){let e=localStorage.getItem("currentPharmacyId"),t=e?r.pharmacies.find(s=>s.id===e):r.pharmacies[0];t&&this.setCurrentPharmacy(t)}else if(r.pharmacyId){let e={id:r.pharmacyId,name:"Main Pharmacy",primaryColor:"#166534",secondaryColor:"#22c55e",sidebarColor:"#14532d"};this.setCurrentPharmacy(e)}}}setCurrentPharmacy(r){localStorage.setItem("currentPharmacyId",r.id),this.currentPharmacySubject.next(r)}getCurrentPharmacy(){return this.currentPharmacySubject.value}canSwitchPharmacies(){let r=this.authService.getCurrentUser();return r?.role==="account_owner"&&(r.pharmacies?.length||0)>1}getAvailablePharmacies(){return this.authService.getCurrentUser()?.pharmacies||[]}static \u0275fac=function(e){return new(e||a)};static \u0275prov=i({token:a,factory:a.\u0275fac,providedIn:"root"})};export{h as a};
